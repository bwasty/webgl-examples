{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"gloperate\"","webpack:////Users/bwasty/proggen/gltf/gltf-loader-ts/lib/gltf-loader.js","webpack:///./gltf/gltfrenderer.ts","webpack:///./gltf/example.ts"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","e","t","default","this","__awaiter","Promise","next","throw","done","then","apply","GltfLoader","[object Object]","manager","LoadingManager","LoaderUtils","extractUrlBase","FileLoader","responseType","load","parse","match","replace","Error","URL","createObjectURL","urlModifier","has","push","fetchAll","revokeObjectURL","forEach","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","content","JSON","asset","version","GltfAsset","onStart","onProgress","onLoad","onError","isLoading","itemsLoaded","itemsTotal","TextDecoder","decode","String","fromCharCode","decodeURIComponent","escape","split","length","pop","join","path","resolveURL","XMLHttpRequest","open","onload","response","status","console","warn","itemEnd","statusText","itemError","onprogress","onerror","withCredentials","mimeType","overrideMimeType","requestHeaders","setRequestHeader","send","itemStart","gltf","extensions","bufferData","imageData","bufferViews","buffer","byteLength","byteOffset","slice","all","bufferCache","baseUri","loader","buffers","uri","body","u","map","BufferData","imageCache","images","bufferView","bufferViewData","Blob","type","Image","src","test","ImageData","DataView","header","magic","getUint32","GltfRenderer","_super","__extends","onInitialize","context","callback","mouseEventProvider","onUninitialize","error","onUpdate","onPrepare","onFrame","frameNumber","onSwap","Renderer","gloperate","gltfrenderer_1","gltf_loader_ts_1","canvas","Canvas","renderer","element","addEventListener","viewer","Fullscreen","toggle","_a","sent","log","loadGltf","document","readyState"],"mappings":"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","file":"gltf.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"gloperate\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"gloperate\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"gloperate\")) : factory(root[\"gloperate\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=6)}([function(e,t,r){\"use strict\";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){e.done?s(e.value):new r(function(t){t(e.value)}).then(o,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,\"__esModule\",{value:!0});const s=r(3),n=r(5),o=r(4),a=r(2),c=r(1);t.GltfLoader=class{constructor(e){this.manager=e||new c.LoadingManager}load(e,t){return i(this,void 0,void 0,function*(){const r=a.LoaderUtils.extractUrlBase(e),i=new s.FileLoader(this.manager);i.responseType=\"arraybuffer\";const n=yield i.load(e,t);return yield this.parse(n,r)})}loadFromFiles(e){return i(this,void 0,void 0,function*(){let t,r;for(const[i,s]of e)s.name.match(/\\.(gltf|glb)$/)&&(t=s,r=i.replace(s.name,\"\"));if(!t)throw new Error(\"No .gltf or .glb asset found.\");const i=\"string\"==typeof t?t:URL.createObjectURL(t),s=a.LoaderUtils.extractUrlBase(i),n=[];this.manager.urlModifier=(t=>{const i=r+t.replace(s,\"\").replace(/^(\\.?\\/)/,\"\");if(e.has(i)){const t=e.get(i),r=URL.createObjectURL(t);return n.push(r),r}return t});const o=yield this.load(i);return yield o.fetchAll(),URL.revokeObjectURL(i),n.forEach(URL.revokeObjectURL),o})}parse(e,r){return i(this,void 0,void 0,function*(){let i;const s={};\"string\"==typeof e?i=e:a.LoaderUtils.decodeText(new Uint8Array(e,0,4))===n.BINARY_EXTENSION_HEADER_MAGIC?(s[t.EXTENSIONS.KHR_BINARY_GLTF]=new n.GLTFBinaryExtension(e),i=s[t.EXTENSIONS.KHR_BINARY_GLTF].content):i=a.LoaderUtils.decodeText(new Uint8Array(e));const c=JSON.parse(i);if(void 0===c.asset||c.asset.version[0]<2)throw new Error(\"Unsupported asset. glTF versions >=2.0 are supported.\");return new o.GltfAsset(c,r||\"\",s,this.manager)})}},t.EXTENSIONS={KHR_BINARY_GLTF:\"KHR_binary_glTF\"}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.LoadingManager=class{constructor(){this.urlModifier=void 0,this.onStart=void 0,this.onProgress=void 0,this.onLoad=void 0,this.onError=void 0,this.isLoading=!1,this.itemsLoaded=0,this.itemsTotal=0}itemStart(e){this.itemsTotal++,!this.isLoading&&this.onStart&&this.onStart(e,this.itemsLoaded,this.itemsTotal),this.isLoading=!0}itemEnd(e){this.itemsLoaded++,this.onProgress&&this.onProgress(e,this.itemsLoaded,this.itemsTotal),this.itemsLoaded===this.itemsTotal&&(this.isLoading=!1,this.onLoad&&this.onLoad())}itemError(e){this.onError&&this.onError(e)}resolveURL(e){return this.urlModifier?this.urlModifier(e):e}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.LoaderUtils=class{static decodeText(e){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t=\"\";for(const r of e)t+=String.fromCharCode(r);return decodeURIComponent(escape(t))}static extractUrlBase(e){const t=e.split(\"/\");return 1===t.length?\"./\":(t.pop(),t.join(\"/\")+\"/\")}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.FileLoader=class{constructor(e){this.manager=e}load(e,t){return void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e),new Promise((r,i)=>{const s=new XMLHttpRequest;s.open(\"GET\",e,!0);const n=this;s.onload=function(t){const o=this.response;0===this.status?(console.warn(\"FileLoader: HTTP Status 0 received.\"),r(o),n.manager.itemEnd(e)):200===this.status?(r(o),n.manager.itemEnd(e)):(i({status:this.status,statusText:s.statusText}),n.manager.itemEnd(e),n.manager.itemError(e))},s.onprogress=(e=>{t&&t(e)}),s.onerror=function(t){i({status:this.status,statusText:s.statusText}),n.manager.itemEnd(e),n.manager.itemError(e)},this.responseType&&(s.responseType=this.responseType),this.withCredentials&&(s.withCredentials=this.withCredentials),this.mimeType&&s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(const e in this.requestHeaders)s.setRequestHeader(e,this.requestHeaders[e]);s.send(null),this.manager.itemStart(e)})}setRequestHeader(e,t){return this.requestHeaders[e]=t,this}}},function(e,t,r){\"use strict\";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){e.done?s(e.value):new r(function(t){t(e.value)}).then(o,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,\"__esModule\",{value:!0});const s=r(3),n=r(0),o=r(1);t.GltfAsset=class{constructor(e,t,r,i=new o.LoadingManager){this.gltf=e,this.extensions=r,this.bufferData=new a(this,t,i),this.imageData=new c(this,t,i)}bufferViewData(e){return i(this,void 0,void 0,function*(){if(!this.gltf.bufferViews)throw new Error(\"No buffer views found.\");const t=this.gltf.bufferViews[e],r=yield this.bufferData.get(t.buffer),i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}fetchAll(){return i(this,void 0,void 0,function*(){return Promise.all([this.bufferData.fetchAll(),this.imageData.fetchAll()])})}};class a{constructor(e,t,r){this.bufferCache=[],this.asset=e,this.baseUri=t,this.manager=r,this.loader=new s.FileLoader(r),this.loader.responseType=\"arraybuffer\"}get(e){return i(this,void 0,void 0,function*(){if(void 0!==this.bufferCache[e])return this.bufferCache[e];const t=this.asset.gltf;if(!t.buffers)throw new Error(\"No buffers found.\");const r=t.buffers[e];if(void 0===r.uri){if(0!==e)throw new Error(\"GLB container is required to be the first buffer\");return this.asset.extensions[n.EXTENSIONS.KHR_BINARY_GLTF].body}const i=u(r.uri,this.baseUri),s=yield this.loader.load(i);return this.bufferCache[e]=s,s})}fetchAll(){return i(this,void 0,void 0,function*(){const e=this.asset.gltf.buffers;return e?Promise.all(e.map((e,t)=>this.get(t))):[]})}}t.BufferData=a;class c{constructor(e,t,r){this.imageCache=[],this.asset=e,this.baseUri=t,this.manager=r}get(e){return i(this,void 0,void 0,function*(){if(void 0!==this.imageCache[e])return this.imageCache[e];const t=this.asset.gltf;if(!t.images)throw new Error(\"No images found.\");const r=t.images[e];let i,s=!1;if(void 0!==r.bufferView){const e=yield this.asset.bufferViewData(r.bufferView);s=!0;const t=new Blob([e],{type:r.mimeType});i=URL.createObjectURL(t)}else{if(void 0===r.uri)throw new Error(\"Invalid glTF: image must either have a `uri` or a `bufferView`\");i=this.manager.resolveURL(u(r.uri,this.baseUri))}const n=new Image;return new Promise((t,r)=>{n.onerror=(()=>{r(`Failed to load ${i}`),this.manager.itemEnd(i),this.manager.itemError(i)}),n.onload=(()=>{s&&URL.revokeObjectURL(i),this.imageCache[e]=n,t(n),this.manager.itemEnd(i)}),n.src=i,this.manager.itemStart(i)})})}fetchAll(){return i(this,void 0,void 0,function*(){const e=this.asset.gltf.images;return e?Promise.all(e.map((e,t)=>this.get(t))):[]})}}function u(e,t){return\"string\"!=typeof e||\"\"===e?\"\":/^(https?:)?\\/\\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}t.ImageData=c,t.resolveURL=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const i=r(0),s=r(2);t.BINARY_EXTENSION_HEADER_MAGIC=\"glTF\";const n=12,o={JSON:1313821514,BIN:5130562};t.GLTFBinaryExtension=class{constructor(e){this.name=i.EXTENSIONS.KHR_BINARY_GLTF;const r=new DataView(e,0,n);if(this.header={magic:s.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==t.BINARY_EXTENSION_HEADER_MAGIC)throw new Error(\"Unsupported glTF-Binary header.\");if(this.header.version<2)throw new Error(\"Unsupported legacy binary file detected.\");const a=new DataView(e,n);let c=0;for(;c<a.byteLength;){const t=a.getUint32(c,!0);c+=4;const r=a.getUint32(c,!0);if(c+=4,r===o.JSON){const r=new Uint8Array(e,n+c,t);this.content=s.LoaderUtils.decodeText(r)}else if(r===o.BIN){const r=n+c;this.body=e.slice(r,r+t)}c+=t}if(null===this.content)throw new Error(\"glTF-Binary: JSON content not found.\")}}},function(e,t,r){e.exports=r(0)}]);\n//# sourceMappingURL=gltf-loader.js.map","import { Context, Invalidate, MouseEventProvider, Renderer } from 'webgl-operate';\n\n\nexport class GltfRenderer extends Renderer {\n    protected onInitialize(\n        context: Context,\n        callback: Invalidate,\n        mouseEventProvider: MouseEventProvider | undefined): boolean {\n\n        return true;\n    }\n    protected onUninitialize(): void {\n        console.error('Method not implemented.');\n    }\n    protected onUpdate(): boolean {\n        console.error('Method not implemented.');\n        return false; // whether to redraw\n    }\n    protected onPrepare(): void {\n        console.error('Method not implemented.');\n    }\n    protected onFrame(frameNumber: number): void {\n        console.error('Method not implemented.');\n    }\n    protected onSwap(): void {\n        console.error('Method not implemented.');\n    }\n}\n","\n\nimport * as gloperate from 'webgl-operate';\n\nimport { GltfRenderer } from './gltfrenderer';\n\nimport { GltfLoader } from 'gltf-loader-ts';\n\nasync function loadGltf(renderer: GltfRenderer) {\n    const loader = new GltfLoader();\n    const uri = 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/' +\n        'BoxTextured/glTF/BoxTextured.gltf';\n    const asset = await loader.load(uri);\n    await asset.fetchAll();\n    console.log('loaded ' + uri, asset);\n    (window as any)['asset'] = asset;\n}\n\n\nfunction onload() {\n    const canvas = new gloperate.Canvas('example-canvas');\n    const context = canvas.context;\n    const renderer = new GltfRenderer();\n    canvas.renderer = renderer;\n    canvas.element.addEventListener('click', () => gloperate.viewer.Fullscreen.toggle(canvas.element));\n    canvas.element.addEventListener('touchstart', () => gloperate.viewer.Fullscreen.toggle(canvas.element));\n\n    loadGltf(renderer);\n\n    // export variables\n    (window as any)['canvas'] = canvas;\n    (window as any)['context'] = context;\n    (window as any)['renderer'] = renderer;\n}\n\nif (window.document.readyState === 'complete') {\n    onload();\n} else {\n    window.onload = onload;\n}\n"],"sourceRoot":""}