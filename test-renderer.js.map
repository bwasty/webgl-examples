{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"gloperate\"","webpack:///./test-renderer/example.ts","webpack:///./test-renderer/testrenderer.ts","webpack:///./test-renderer/testrenderer.vert","webpack:///./test-renderer/testrenderer.frag"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","gloperate","testrenderer_1","onload","canvas","Canvas","context","renderer","TestRenderer","element","addEventListener","viewer","Fullscreen","toggle","document","readyState","webgl_operate_1","Renderer","[object Object]","this","_extensions","_testNavigation","update","redraw","altered","reset","_altered","any","gl","_context","gl2facade","multiFrameNumber","_ndcOffsetKernel","width","_multiFrameNumber","_intermediateFBO","initialized","frameSize","resize","_frameSize","_colorRenderTexture","initialize","isWebGL2","RGBA8","RGBA","UNSIGNED_BYTE","_depthRenderbuffer","DEPTH_COMPONENT16","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","clearColor","_clearColor","_accumulate","frameNumber","viewport","_program","ndcOffset","uniform2fv","_uNdcOffset","uniform1i","_uFrameNumber","clear","COLOR_BUFFER_BIT","_ndcTriangle","draw","unbind","frame","_blit","framebuffer","callback","mouseEventProvider","isWebGL1","auxiliaries","assert","supportsStandardDerivatives","standardDerivatives","vert","Shader","VERTEX_SHADER","frag","FRAGMENT_SHADER","Program","uniform","NdcFillingTriangle","aVertex","attribute","AntiAliasingKernel","_defaultFBO","DefaultFramebuffer","Texture2","Renderbuffer","Framebuffer","AccumulatePass","precision","_framePrecision","texture","BlitPass","readBuffer","drawBuffer","BACK","target","debug","TestNavigation","invalidate","uninitialize"],"mappings":"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","file":"test-renderer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"gloperate\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"gloperate\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"gloperate\")) : factory(root[\"gloperate\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\r\n\r\nimport * as gloperate from 'webgl-operate';\r\n\r\nimport { TestRenderer } from './testrenderer';\r\n\r\n\r\nfunction onload() {\r\n    const canvas = new gloperate.Canvas('example-canvas');\r\n    const context = canvas.context;\r\n    const renderer = new TestRenderer();\r\n    canvas.renderer = renderer;\r\n\r\n    canvas.element.addEventListener('click', () => { gloperate.viewer.Fullscreen.toggle(canvas.element); });\r\n    canvas.element.addEventListener('touchstart', () => { gloperate.viewer.Fullscreen.toggle(canvas.element); });\r\n\r\n    // export variables\r\n    (window as any)['canvas'] = canvas;\r\n    (window as any)['context'] = context;\r\n    (window as any)['renderer'] = renderer;\r\n}\r\n\r\nif (window.document.readyState === 'complete') {\r\n    onload();\r\n} else {\r\n    window.onload = onload;\r\n}\r\n","\r\nimport {\r\n    AccumulatePass, AntiAliasingKernel, auxiliaries, BlitPass, Context, debug, DefaultFramebuffer,\r\n    Framebuffer, Invalidate, MouseEventProvider, NdcFillingTriangle, Program, Renderbuffer, Renderer, Shader,\r\n    Texture2,\r\n} from 'webgl-operate';\r\n\r\n\r\nexport class TestRenderer extends Renderer {\r\n\r\n    protected _extensions = false;\r\n    protected _program: Program;\r\n\r\n    protected _ndcOffsetKernel: AntiAliasingKernel;\r\n    protected _uNdcOffset: WebGLUniformLocation;\r\n    protected _uFrameNumber: WebGLUniformLocation;\r\n    protected _ndcTriangle: NdcFillingTriangle;\r\n\r\n    protected _accumulate: AccumulatePass;\r\n    protected _blit: BlitPass;\r\n\r\n    protected _defaultFBO: DefaultFramebuffer;\r\n    protected _colorRenderTexture: Texture2;\r\n    protected _depthRenderbuffer: Renderbuffer;\r\n    protected _intermediateFBO: Framebuffer;\r\n\r\n    protected _testNavigation: debug.TestNavigation;\r\n\r\n\r\n    protected onUpdate(): boolean {\r\n        this._testNavigation.update();\r\n\r\n        const redraw = this._testNavigation.altered;\r\n        this._testNavigation.reset();\r\n\r\n        return this._altered.any || redraw;\r\n    }\r\n\r\n    protected onPrepare(): void {\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        if (this._altered.multiFrameNumber) {\r\n            this._ndcOffsetKernel.width = this._multiFrameNumber;\r\n        }\r\n\r\n        if (!this._intermediateFBO.initialized) {\r\n            this._colorRenderTexture.initialize(this._frameSize[0], this._frameSize[1],\r\n                this._context.isWebGL2 ? gl.RGBA8 : gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE);\r\n            this._depthRenderbuffer.initialize(this._frameSize[0], this._frameSize[1], gl.DEPTH_COMPONENT16);\r\n            this._intermediateFBO.initialize([[gl2facade.COLOR_ATTACHMENT0, this._colorRenderTexture]\r\n                , [gl.DEPTH_ATTACHMENT, this._depthRenderbuffer]]);\r\n\r\n        } else if (this._altered.frameSize) {\r\n            this._intermediateFBO.resize(this._frameSize[0], this._frameSize[1]);\r\n        }\r\n\r\n        if (this._altered.clearColor) {\r\n            this._intermediateFBO.clearColor(this._clearColor);\r\n        }\r\n\r\n        this._accumulate.update();\r\n\r\n        this._altered.reset();\r\n    }\r\n\r\n    protected onFrame(frameNumber: number): void {\r\n        const gl = this._context.gl;\r\n\r\n        gl.viewport(0, 0, this._frameSize[0], this._frameSize[1]);\r\n\r\n        this._program.bind();\r\n\r\n        const ndcOffset = this._ndcOffsetKernel.get(frameNumber);\r\n        ndcOffset[0] = 2.0 * ndcOffset[0] / this._frameSize[0];\r\n        ndcOffset[1] = 2.0 * ndcOffset[1] / this._frameSize[1];\r\n        gl.uniform2fv(this._uNdcOffset, ndcOffset);\r\n        gl.uniform1i(this._uFrameNumber, frameNumber);\r\n\r\n        this._intermediateFBO.clear(gl.COLOR_BUFFER_BIT, true, false);\r\n        this._ndcTriangle.bind();\r\n        this._ndcTriangle.draw();\r\n        this._intermediateFBO.unbind();\r\n\r\n        this._accumulate.frame(frameNumber);\r\n    }\r\n\r\n    protected onSwap(): void {\r\n        this._blit.framebuffer = this._accumulate.framebuffer ?\r\n            this._accumulate.framebuffer : this._blit.framebuffer = this._intermediateFBO;\r\n        this._blit.frame();\r\n    }\r\n\r\n\r\n    protected onInitialize(context: Context, callback: Invalidate, mouseEventProvider: MouseEventProvider): boolean {\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        /* Enable required extensions. */\r\n\r\n        if (this._extensions === false && this._context.isWebGL1) {\r\n            auxiliaries.assert(this._context.supportsStandardDerivatives,\r\n                `expected OES_standard_derivatives support`);\r\n            /* tslint:disable-next-line:no-unused-expression */\r\n            this._context.standardDerivatives;\r\n            this._extensions = true;\r\n        }\r\n\r\n        /* Create and configure program and geometry. */\r\n\r\n        const vert = new Shader(this._context, gl.VERTEX_SHADER, 'testrenderer.vert');\r\n        vert.initialize(require('./testrenderer.vert'));\r\n        const frag = new Shader(this._context, gl.FRAGMENT_SHADER, 'testrenderer.frag');\r\n        frag.initialize(require('./testrenderer.frag'));\r\n\r\n        this._program = new Program(this._context);\r\n        this._program.initialize([vert, frag]);\r\n\r\n        this._uNdcOffset = this._program.uniform('u_ndcOffset');\r\n        this._uFrameNumber = this._program.uniform('u_frameNumber');\r\n\r\n        this._ndcTriangle = new NdcFillingTriangle(this._context);\r\n        const aVertex = this._program.attribute('a_vertex', 0);\r\n        this._ndcTriangle.initialize(aVertex);\r\n\r\n        this._ndcOffsetKernel = new AntiAliasingKernel(this._multiFrameNumber);\r\n\r\n        /* Create framebuffers, textures, and render buffers. */\r\n\r\n        this._defaultFBO = new DefaultFramebuffer(this._context, 'DefaultFBO');\r\n        this._defaultFBO.initialize();\r\n\r\n        this._colorRenderTexture = new Texture2(this._context, 'ColorRenderTexture');\r\n        this._depthRenderbuffer = new Renderbuffer(this._context, 'DepthRenderbuffer');\r\n\r\n        this._intermediateFBO = new Framebuffer(this._context, 'IntermediateFBO');\r\n\r\n        /* Create and configure accumulation pass. */\r\n\r\n        this._accumulate = new AccumulatePass(this._context);\r\n        this._accumulate.initialize(this._ndcTriangle);\r\n        this._accumulate.precision = this._framePrecision;\r\n        this._accumulate.texture = this._colorRenderTexture;\r\n        // this._accumulate.depthStencilAttachment = this._depthRenderbuffer;\r\n\r\n        /* Create and configure blit pass. */\r\n\r\n        this._blit = new BlitPass(this._context);\r\n        this._blit.initialize(this._ndcTriangle);\r\n        this._blit.readBuffer = gl2facade.COLOR_ATTACHMENT0;\r\n        this._blit.drawBuffer = gl.BACK;\r\n        this._blit.target = this._defaultFBO;\r\n\r\n        /* Create and configure test navigation. */\r\n\r\n        this._testNavigation = new debug.TestNavigation(() => this.invalidate(), mouseEventProvider);\r\n\r\n        return true;\r\n    }\r\n\r\n    protected onUninitialize(): void {\r\n        this._uNdcOffset = -1;\r\n        this._uFrameNumber = -1;\r\n        this._program.uninitialize();\r\n\r\n        this._ndcTriangle.uninitialize();\r\n\r\n        this._intermediateFBO.uninitialize();\r\n        this._defaultFBO.uninitialize();\r\n        this._colorRenderTexture.uninitialize();\r\n        this._depthRenderbuffer.uninitialize();\r\n\r\n        this._blit.uninitialize();\r\n    }\r\n\r\n}\r\n\r\n","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n#else \\r\\n    #define varying out\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    attribute vec2 a_vertex;\\r\\n#else \\r\\n    layout(location = 0) in vec2 a_vertex;\\r\\n#endif\\r\\n\\r\\nuniform vec2 u_ndcOffset;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    v_uv = a_vertex.xy * 0.5 + 0.5;\\r\\n\\r\\n    vec4 vertex = vec4(a_vertex, 0.0, 1.0);\\r\\n    vertex.xy = u_ndcOffset * vec2(vertex.w) + vertex.xy;\\r\\n\\r\\n    gl_Position = vertex;\\r\\n}\\r\\n\"","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\r\\n#else \\r\\n    #define varying in\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define fragColor gl_FragColor\\r\\n    #extension GL_OES_standard_derivatives : enable\\r\\n#else \\r\\n    layout(location = 0) out vec4 fragColor;\\r\\n#endif\\r\\n\\r\\nuniform int u_frameNumber;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    vec3 color = vec3(28.0 / 255.0, 117.0 / 255.0, 188.0 / 255.0);\\r\\n    color += (vec3(0.0, v_uv) - 0.5) * 0.125;\\r\\n\\r\\n    vec2 awidth = fwidth(v_uv) * (sin(float(u_frameNumber) * 0.1) * 7.0 + 8.0);\\r\\n    vec2 cstep = abs(step(awidth, v_uv) - step(awidth, 1.0 - v_uv));\\r\\n    if(!any(bvec2(cstep))) {\\r\\n        discard;\\r\\n    }\\r\\n    fragColor = vec4(color, 1.0); \\r\\n}\\r\\n\""],"sourceRoot":""}