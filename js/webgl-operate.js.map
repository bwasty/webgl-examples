{"version":3,"sources":["webpack://gloperate/webpack/universalModuleDefinition","webpack://gloperate/webpack/bootstrap","webpack://gloperate/./auxiliaries.ts","webpack://gloperate/./initializable.ts","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/common.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/mat2.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/mat2d.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/mat3.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/mat4.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/vec3.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/vec4.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/quat.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix/vec2.js","webpack://gloperate/../node_modules/gl-matrix/src/gl-matrix.js","webpack://gloperate/./gl-matrix-extensions.ts","webpack://gloperate/./object.ts","webpack://gloperate/./cameramodifier.ts","webpack://gloperate/external \"Rx\"","webpack://gloperate/./ndcfillingtriangle.ts","webpack://gloperate/./shader.ts","webpack://gloperate/./program.ts","webpack://gloperate/./texture2.ts","webpack://gloperate/./framebuffer.ts","webpack://gloperate/./tuples.ts","webpack://gloperate/./shaders/ndcvertices.vert","webpack://gloperate/./geometry.ts","webpack://gloperate/./formatbytesizes.ts","webpack://gloperate/./buffer.ts","webpack://gloperate/./changelookup.ts","webpack://gloperate/./pointerlock.ts","webpack://gloperate/./mouseeventprovider.ts","webpack://gloperate/./context.ts","webpack://gloperate/../node_modules/jsonschema/lib/helpers.js","webpack://gloperate/./renderbuffer.ts","webpack://gloperate/./eventhandler.ts","webpack://gloperate/./kernel.ts","webpack://gloperate/./randomsquarekernel.ts","webpack://gloperate/./turntablemodifier.ts","webpack://gloperate/./trackballmodifier.ts","webpack://gloperate/./firstpersonmodifier.ts","webpack://gloperate/./camera.ts","webpack://gloperate/./wizard.ts","webpack://gloperate/./vertexarray.ts","webpack://gloperate/./controller.ts","webpack://gloperate/./color.ts","webpack://gloperate/./extensions.ts","webpack://gloperate/./extensionshash.ts","webpack://gloperate/./contextmasquerade.ts","webpack://gloperate/./blitpass.ts","webpack://gloperate/./accumulatepass.ts","webpack://gloperate/./antialiasingkernel.ts","webpack://gloperate/./renderer.ts","webpack://gloperate/./defaultframebuffer.ts","webpack://gloperate/../node_modules/jsonschema/lib/scan.js","webpack://gloperate/../node_modules/url/url.js","webpack://gloperate/./raymath.ts","webpack://gloperate/./shaders/readbackdepth.frag","webpack://gloperate/./readbackpass.ts","webpack://gloperate/./shaders/blit.frag","webpack://gloperate/./shaders/accumulate.frag","webpack://gloperate/./ndcfillingrectangle.ts","webpack://gloperate/./zoommodifier.ts","webpack://gloperate/./panmodifier.ts","webpack://gloperate/./navigation.ts","webpack://gloperate/./texturecube.ts","webpack://gloperate/./resizable.ts","webpack://gloperate/./canvas.ts","webpack://gloperate/./gl2facade.ts","webpack://gloperate/./allocationregister.ts","webpack://gloperate/../node_modules/decode-uri-component/index.js","webpack://gloperate/../node_modules/strict-uri-encode/index.js","webpack://gloperate/../node_modules/query-string/index.js","webpack://gloperate/./webgl-operate.slim.ts","webpack://gloperate/./debug/testnavigation.ts","webpack://gloperate/./viewer/fullscreen.ts","webpack://gloperate/./viewer/eventblocker.ts","webpack://gloperate/./debug/testrenderer.frag","webpack://gloperate/./debug/testrenderer.vert","webpack://gloperate/./debug/testrenderer.ts","webpack://gloperate/../node_modules/jsonschema/lib/attribute.js","webpack://gloperate/../node_modules/querystring-es3/encode.js","webpack://gloperate/../node_modules/querystring-es3/decode.js","webpack://gloperate/../node_modules/querystring-es3/index.js","webpack://gloperate/../node_modules/url/util.js","webpack://gloperate/../node_modules/webpack/buildin/global.js","webpack://gloperate/../node_modules/webpack/buildin/module.js","webpack://gloperate/../node_modules/punycode/punycode.js","webpack://gloperate/../node_modules/jsonschema/lib/validator.js","webpack://gloperate/../node_modules/jsonschema/lib/index.js","webpack://gloperate/./properties.ts","webpack://gloperate/./webgl-operate.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__6__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","auxiliaries","query_string_1","disableAssertions","error","logVerbosityThreshold","log","verbosity","message","console","LogLevel","assert","expression","EvalError","logIf","rand","min","max","Math","random","prefixes","GETsearch","location","search","prettyPrintBytes","bytes","prefix","floor","prefixedBytes","pow","toFixed","bitInBitfield","flags","flag","undefined","RAD2DEG","DEG2RAD","GETparameter","parameter","parse","auxiliaries_1","Initializable","_this","this","_initialized","assertInitialized","assertInitializedFalse","assertUninitialized","initialize","target","propertyKey","descriptor","apply","arguments","assertUninitializedFalse","uninitialize","assert_initialized","assert_uninitialized","constructor","EPSILON","ARRAY_TYPE","Float32Array","Array","RANDOM","setMatrixArrayType","type","degree","PI","toRadian","a","common_equals","b","abs","mat2_create","out","mat2_clone","mat2_copy","mat2_identity","mat2_fromValues","m00","m01","m10","m11","mat2_set","mat2_transpose","a1","mat2_invert","a0","a2","a3","det","mat2_adjoint","mat2_determinant","mat2_multiply","b0","b1","b2","b3","mat2_rotate","rad","sin","cos","mat2_scale","v","v0","v1","mat2_fromRotation","mat2_fromScaling","mat2_str","mat2_frob","sqrt","mat2_LDU","L","D","U","mat2_add","mat2_subtract","mat2_exactEquals","mat2_equals","mat2_multiplyScalar","mat2_multiplyScalarAndAdd","scale","mat2_mul","mat2_sub","mat2d_create","mat2d_clone","mat2d_copy","mat2d_identity","mat2d_fromValues","tx","ty","mat2d_set","mat2d_invert","aa","ab","ac","ad","atx","aty","mat2d_determinant","mat2d_multiply","a4","a5","b4","b5","mat2d_rotate","mat2d_scale","mat2d_translate","mat2d_fromRotation","mat2d_fromScaling","mat2d_fromTranslation","mat2d_str","mat2d_frob","mat2d_add","mat2d_subtract","mat2d_multiplyScalar","mat2d_multiplyScalarAndAdd","mat2d_exactEquals","mat2d_equals","mat2d_mul","mat2d_sub","mat3_create","mat3_fromMat4","mat3_clone","mat3_copy","mat3_fromValues","m02","m12","m20","m21","m22","mat3_set","mat3_identity","mat3_transpose","a01","a02","a12","mat3_invert","a00","a10","a11","a20","a21","a22","b01","b11","b21","mat3_adjoint","mat3_determinant","mat3_multiply","b00","b02","b10","b12","b20","b22","mat3_translate","x","y","mat3_rotate","mat3_scale","mat3_fromTranslation","mat3_fromRotation","mat3_fromScaling","mat3_fromMat2d","mat3_fromQuat","q","z","w","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","mat3_normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","mat3_projection","width","height","mat3_str","mat3_frob","mat3_add","mat3_subtract","mat3_multiplyScalar","mat3_multiplyScalarAndAdd","mat3_exactEquals","mat3_equals","a6","a7","a8","b6","b7","b8","mat3_mul","mat3_sub","mat4_create","mat4_clone","mat4_copy","mat4_fromValues","m03","m13","m23","m30","m31","m32","m33","mat4_set","mat4_identity","mat4_transpose","mat4_invert","mat4_adjoint","mat4_determinant","mat4_multiply","mat4_translate","mat4_scale","mat4_rotate","axis","t","len","mat4_rotateX","mat4_rotateY","mat4_rotateZ","mat4_fromTranslation","mat4_fromScaling","mat4_fromRotation","mat4_fromXRotation","mat4_fromYRotation","mat4_fromZRotation","mat4_fromRotationTranslation","xy","xz","yz","mat4_getTranslation","mat","mat4_getScaling","mat4_getRotation","trace","S","mat4_fromRotationTranslationScale","sx","sy","sz","mat4_fromRotationTranslationScaleOrigin","ox","oy","oz","mat4_fromQuat","mat4_frustum","left","right","bottom","top","near","far","rl","tb","nf","mat4_perspective","fovy","aspect","f","tan","mat4_perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_ortho","lr","bt","mat4_lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","mat4","identity","mat4_targetTo","mat4_str","mat4_frob","mat4_add","mat4_subtract","mat4_multiplyScalar","mat4_multiplyScalarAndAdd","mat4_exactEquals","mat4_equals","a9","a14","a15","b9","b13","b14","b15","mat4_mul","mat4_sub","vec3_create","vec3_clone","vec3_length","vec3_fromValues","vec3_copy","vec3_set","vec3_add","vec3_subtract","vec3_multiply","vec3_divide","vec3_ceil","ceil","vec3_floor","vec3_min","vec3_max","vec3_round","round","vec3_scale","vec3_scaleAndAdd","vec3_distance","vec3_squaredDistance","vec3_squaredLength","vec3_negate","vec3_inverse","vec3_normalize","vec3_dot","vec3_cross","ax","ay","az","bx","by","bz","vec3_lerp","vec3_hermite","factorTimes2","factor1","factor2","factor3","factor4","vec3_bezier","inverseFactor","inverseFactorTimesTwo","vec3_random","zScale","vec3_transformMat4","vec3_transformMat3","vec3_transformQuat","qx","qy","qz","qw","ix","iy","iz","iw","vec3_rotateX","vec3_rotateY","vec3_rotateZ","vec3_angle","tempA","tempB","cosine","acos","vec3_str","vec3_exactEquals","vec3_equals","vec3_sub","vec3_mul","vec3_div","vec3_dist","vec3_sqrDist","vec3_len","vec3_sqrLen","vec3_forEach","vec","stride","offset","count","fn","arg","length","vec4_create","vec4_clone","vec4_fromValues","vec4_copy","vec4_set","vec4_add","vec4_subtract","vec4_multiply","vec4_divide","vec4_ceil","vec4_floor","vec4_min","vec4_max","vec4_round","vec4_scale","vec4_scaleAndAdd","vec4_distance","vec4_squaredDistance","vec4_length","vec4_squaredLength","vec4_negate","vec4_inverse","vec4_normalize","vec4_dot","vec4_lerp","aw","vec4_random","vectorScale","vec4_transformMat4","vec4_transformQuat","vec4_str","vec4_exactEquals","vec4_equals","vec4_sub","vec4_mul","vec4_div","vec4_dist","vec4_sqrDist","vec4_len","vec4_sqrLen","vec4_forEach","quat_create","quat_identity","quat_setAxisAngle","quat_getAxisAngle","out_axis","quat_multiply","bw","quat_rotateX","quat_rotateY","quat_rotateZ","quat_calculateW","quat_slerp","omega","cosom","sinom","scale0","scale1","quat_invert","dot","invDot","quat_conjugate","quat_fromMat3","fRoot","fTrace","j","k","quat_fromEuler","halfToRad","cx","cy","cz","quat_str","quat_clone","quat_fromValues","quat_copy","quat_set","quat_add","quat_mul","quat_scale","quat_dot","quat_lerp","quat_length","quat_len","quat_squaredLength","quat_sqrLen","quat_normalize","quat_exactEquals","quat_equals","quat_rotationTo","tmpvec3","xUnitVec3","yUnitVec3","quat_sqlerp","temp1","temp2","quat_setAxes","matr","view","vec2_create","vec2_clone","vec2_fromValues","vec2_copy","vec2_set","vec2_add","vec2_subtract","vec2_multiply","vec2_divide","vec2_ceil","vec2_floor","vec2_min","vec2_max","vec2_round","vec2_scale","vec2_scaleAndAdd","vec2_distance","vec2_squaredDistance","vec2_length","vec2_squaredLength","vec2_negate","vec2_inverse","vec2_normalize","vec2_dot","vec2_cross","vec2_lerp","vec2_random","vec2_transformMat2","vec2_transformMat2d","vec2_transformMat3","vec2_transformMat4","vec2_str","vec2_exactEquals","vec2_equals","vec2_len","vec2_sub","vec2_mul","vec2_div","vec2_dist","vec2_sqrDist","vec2_sqrLen","vec2_forEach","__webpack_exports__","vec4_namespaceObject","gl_matrix_extensions","gl_matrix_1","fract","sign","clamp","v2","vec2","create","clamp2","abs2","v3","vec3","clamp3","abs3","one256ths","encode_float24x1_to_uint8x3","decode_float24x1_from_uint8x3","encode_uint24_to_rgb8","encode_uint32_to_rgba8","decode_uint24_from_rgb8","decode_uint32_from_rgba8","fromVec4","fromValues","v4","vec4","clamp4","abs4","fromVec3","parseVec2","v2str","numbers","JSON","isNaN","clone","parseVec3","v3str","parseVec4","v4str","mix","value1","value2","interpolation","m2","mat2","m3","mat3","m4","initializable_1","AbstractObject","_super","context","identifier","_valid","_referenceCount","_context","_identifier","__extends","args","_i","allocationRegister","createUniqueIdentifier","deleteUniqueIdentifier","Dev","reallocate","delete","_object","ref","initialized","unref","__decorate","camera_1","CameraModifier","_camera","_reference","Camera","camera","assign","update","buffer_1","geometry_1","NdcFillingTriangle","vertexVBO","Buffer","_buffers","push","bindBuffers","indices","attribEnable","gl","FLOAT","_aVertex","unbindBuffers","attribDisable","aVertex","valid","ARRAY_BUFFER","WebGLBuffer","data","VERTICES","STATIC_DRAW","draw","drawArrays","TRIANGLES","Geometry","Shader","FRAGMENT_SHADER","VERTEX_SHADER","_type","source","createShader","WebGLShader","isWebGL2","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","isShader","deleteShader","Program","attach","shaders","shaders_1","shader","attachShader","link","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","detach","shaders_2","detachShader","numVertShaders","numFragShaders","shaders_3","createProgram","WebGLProgram","isProgram","deleteProgram","bind","useProgram","unbind","DEFAULT_PROGRAM","uniform","getUniformLocation","attribute","bindAttribLocation","getAttribLocation","formatbytesizes_1","Texture2","_width","_height","_internalFormat","_format","internalFormat","format","gl2facade","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","DEFAULT_TEXTURE","isTexture","WebGLTexture","deleteTexture","unit","activeTexture","load","uri","crossOrigin","Promise","resolve","reject","image","Image","onerror","onload","resize","src","byteSizeOfFormat","HALF_FLOAT","RGBA16F","filter","mag","wrap","wrap_s","wrap_t","reformat","allocated","object_1","renderbuffer_1","texture2_1","Framebuffer","_buffersByAttachment","Map","_texturesByAttachment","_colorClearQueue","_drawBuffers","_drawBuffersChanged","statusString","status","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","FRAMEBUFFER_INCOMPLETE_MULTISAMPLE","attachments","createFramebuffer","_clearColors","COLOR_ATTACHMENT_MAX","COLOR_ATTACHMENT0","_clearDepth","_clearStencil","clear","isWebGL1","es2Clear","es3Clear","attachments_1","tuple","attachment","bufferOrTexture","Renderbuffer","set","COLOR_ATTACHMENT_MIN","index","bindFramebuffer","FRAMEBUFFER","forEach","buffer","framebufferRenderbuffer","RENDERBUFFER","texture","framebufferTexture2D","drawBuffers","checkFramebufferStatus","isFramebuffer","DEFAULT_FRAMEBUFFER","WebGLFramebuffer","deleteFramebuffer","mask","clearDepth","DEPTH_BUFFER_BIT","clearStencil","STENCIL_BUFFER_BIT","clearColor","COLOR_BUFFER_BIT","color","colorClearQueue","_a","drawBuffer","clearBufferfv","COLOR","DEPTH","hasAttachment","has","supportsDrawBuffers","alphaIssue","alpha","color2","premultipliedAlpha","depth","stencil","NaN","attachments_2","indexOf","tuples","gl_matrix_extensions_1","tuple2","tuple3","tuple4","clampf","semantic","valueV1","User","clampf2","tupleV2","clampf3","tupleV3","clampf4","tupleV4","duplicate2","duplicate3","duplicate4","equals2","t0","t1","equals3","equals4","vertexarray_1","_vertexArray","VertexArray","targets","UNSIGNED_INT_24_8_WEBGL","supportsDepthTexture","depthTexture","UNSIGNED_BYTE","UNSIGNED_SHORT_5_6_5","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT","UNSIGNED_INT","BYTE","SHORT","INT","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_5_9_9_9_REV","UNSIGNED_INT_24_8","FLOAT_32_UNSIGNED_INT_24_8_REV","SRGB8_ALPHA8_EXT","supportsSRGB","sRGB","SRGB_EXT","SRGB_ALPHA_EXT","RGB32F_EXT","supportsColorBufferFloat","colorBufferFloat","RGBA32F_EXT","ALPHA","LUMINANCE","R8","R8I","R8UI","STENCIL_INDEX8","DEPTH_COMPONENT16","LUMINANCE_ALPHA","R16F","R16I","R16UI","RG8","RG8I","RG8UI","RGB565","RGB5_A1","RGBA4","DEPTH_COMPONENT24","RGB","RGB8","RGB8UI","SRGB","SRGB8","DEPTH_STENCIL","DEPTH24_STENCIL8","DEPTH_COMPONENT32F","R11F_G11F_B10F","R32F","R32I","R32UI","RG16F","RG16I","RG16UI","RGB10_A2","RGB10_A2UI","RGB9_E5","RGBA","RGBA8","RGBA8I","RGBA8UI","SRGB8_ALPHA8","SRGB_ALPHA","SRGB_ALPHA8","SRGB_APLHA8","DEPTH32F_STENCIL8","RGB16F","RG32F","RG32I","RG32UI","RGBA16I","RGBA16UI","RGB32F","RGBA32F","RGBA32I","RGBA32UI","DEPTH_COMPONENT","_target","DEFAULT_BUFFER","createBuffer","ELEMENT_ARRAY_BUFFER","deleteBuffer","bindBuffer","usage","bufferData","isBuffer","getError","NO_ERROR","byteLength","size","normalized","vertexAttribPointer","enableVertexAttribArray","disableVertexAttribArray","ChangeLookup","alter","path","any","names","split","shift","join","parent","getOwnPropertyNames","child","reset","name_1","PointerLock","queryAndCacheAPI","_exit","document","exits","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","api","_request","element","requestPointerLock","_element","pointerLockElement","mozCancelPointerLock","mozRequestPointerLock","mozPointerLockElement","webkitRequestPointerLock","webkitPointerLockElement","active","request","callback","exit","Rx_1","pointerlock_1","MouseEventProvider","timeframe","_pointerLockRequestPending","_timeframe","addEventListener","processPointerLockRequests","observable","Type","Click","clickObservable","Enter","enterObservable","Leave","leaveObservable","Down","downObservable","Up","upObservable","Move","moveObservable","Wheel","wheelObservable","lock","_clickSubject","ReplaySubject","_clickListener","event","next","onclick","asObservable","_enterSubject","_enterListener","onmouseenter","_leaveSubject","_leaveListener","onmouseleave","_downSubject","_downListener","onmousedown","_upSubject","_upListener","onmouseup","_moveSubject","_moveListener","onmousemove","_wheelSubject","_wheelListener","onwheel","BackendType","allocationregister_1","contextmasquerade_1","extensions_1","gl2facade_1","Context","_extensions","_allocationRegister","AllocationRegister","_mask","contextString","toString","webgl1","test","webgl2","_backend","WebGL1","WebGL2","valueOf","Invalid","queryExtensionSupport","functionsUndefine","func","_gl2","GL2Facade","createMasqueradeFromGETorDataAttribute","dataset","ContextMasquerade","fromGET","msqrdH","fromHash","msqrdP","fromPreset","backend","toLowerCase","requestWebGL2","requestWebGL1","getContext","CONTEXT_ATTRIBUTES","getContextAttributes","antialias","failIfMajorPerformanceCaveat","preserveDrawingBuffer","supports","extension","extensionsConceal","WEBGL1_EXTENSIONS","WEBGL2_DEFAULT_EXTENSIONS","WEBGL2_EXTENSIONS","getSupportedExtensions","ANGLE_instanced_arrays_supported","EXT_blend_minmax_supported","EXT_color_buffer_half_float_supported","EXT_disjoint_timer_query_supported","EXT_frag_depth_supported","EXT_sRGB_supported","EXT_shader_texture_lod_supported","OES_element_index_uint_supported","OES_standard_derivatives_supported","OES_texture_float_supported","OES_texture_half_float_supported","OES_vertex_array_object_supported","WEBGL_color_buffer_float_supported","WEBGL_depth_texture_supported","WEBGL_draw_buffers_supported","EXT_color_buffer_float_supported","EXT_disjoint_timer_query_webgl2_supported","EXT_texture_filter_anisotropic_supported","OES_texture_float_linear_supported","OES_texture_half_float_linear_supported","WEBGL_compressed_texture_astc_supported","WEBGL_compressed_texture_atc_supported","WEBGL_compressed_texture_etc_supported","WEBGL_compressed_texture_etc1_supported","WEBGL_compressed_texture_pvrtc_supported","WEBGL_compressed_texture_s3tc_supported","WEBGL_compressed_texture_s3tc_srgb_supported","WEBGL_debug_renderer_info_supported","WEBGL_debug_shaders_supported","WEBGL_lose_context_supported","getExtension","ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","EXT_color_buffer_float","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_depth_texture","WEBGL_draw_buffers","WEBGL_lose_context","blitFramebuffer","readBuffer","ValidationError","instance","schema","propertyPath","argument","id","stack","ValidatorResult","options","ctx","errors","throwError","disableFormat","stringizer","addError","detail","err","Error","importErrors","res","validatorType","map","SchemaError","msg","captureStackTrace","SchemaContext","base","schemas","makeChild","propertyName","makeSuffix","FORMAT_REGEXPS","date-time","date","time","email","ip-address","ipv6","hostname","host-name","alphanumeric","utc-millisec","input","parseFloat","parseInt","regex","result","RegExp","e","style","phone","regexp","pattern","ipv4","isFormat","validator","customFormats","key","match","stringify","deepMerge","array","isArray","dst","concat","keys","pathEncoder","encodeURIComponent","replace","deepCompareStrict","every","aKeys","bKeys","objectGetPath","parts","slice","decodeURIComponent","encodePath","getDecimalPlaces","number","decimalPlaces","Number","decimalParts","createRenderbuffer","bindRenderbuffer","renderbufferStorage","isRenderbuffer","DEFAULT_RENDER_BUFFER","WebGLRenderbuffer","deleteRenderbuffer","mouseeventprovider_1","EventHandler","invalidate","mouseEventProvider","_subscriptions","_latestMouseEventsByType","_previousMouseEventsByType","_mouseEventHandlerByType","_invalidate","_mouseEventProvider","force","pushMouseEventHandler","handler","latest_1","subscribe","invokeMouseEventHandler","handlers","latest","previous","dispose","unsubscribe","offsets","normalize","MouseEvent","clientX","clientY","WheelEvent","TouchEvent","touches","touch","rect","currentTarget","srcElement","getBoundingClientRect","offsets_1","devicePixelRatio","pushClickHandler","pushMouseEnterHandler","pushMouseLeaveHandler","pushMouseDownHandler","pushMouseUpHandler","pushMouseMoveHandler","pushMouseWheelHandler","pointerLock","AbstractKernel","components","_components","_depth","xPosOrIndex","yPos","zPos","_samples","sample","elements","fromJSON","json","flatten","reduce","kernel","fromArray","xPos","position","clamped","bytesPerComponent","KernelF32","samples","KernelUI32","Uint32Array","KernelI32","Int32Array","KernelUI8","Uint8Array","KernelI8","Int8Array","RandomSquareKernel","generate","TurntableModifier","_rotation","_maxAzimuth","_minAzimuth","_xAxisScreenSpace","_sensitivity","DEFAULT_SENSITIVITY","initiate","point","_initialPoint","centerToEye","sub","cross","_azimuth","process","_currentPoint","magnitudes","subtract","rotateY","rotate","T","fromTranslation","multiply","translate","negate","transformMat4","sensitivity","TrackballModifier","copy","ortho","add","quat","setAxisAngle","fromQuat","FirstPersonModifier","movement","strafe","yaw","fromRotation","pitch","mul","_fovy","DEFAULT_FOVY","_near","DEFAULT_NEAR","_far","DEFAULT_FAR","_viewport","_aspect","_altered","_eye","DEFAULT_EYE","_center","DEFAULT_CENTER","_up","DEFAULT_UP","calculateFovY","elementDisplayHeight","eyeToDisplayDistance","atan","invalidateView","invalidateProjection","_view","_viewInverse","_projection","_projectionInverse","_viewProjection","_viewProjectionInverse","equals","lookAt","invert","perspective","projection","viewProjection","Wizard","queryInternalTextureFormat","precision","internalFormatIndex","floatWriteSupport","supportsTextureFloat","halfWriteSupport","supportsTextureHalfFloat","query","textureHalfFloat","textureFloat","NONE","_buffersBound","bindBOs","unbindBOs","supportsVertexArrayObject","createVertexArray","_bind","bindVertexArray","_unbind","DEFAULT_VERTEX_ARRAY","deleteVertexArray","Controller","_batchSize","_debug","_multiFrameNumber","_multiFrameNumberSubject","_debugFrameNumber","_debugFrameNumberSubject","_frameNumber","_frameNumberSubject","_pendingRequest","_pause","_block","_blockedUpdates","_intermediateFrameCount","_multiFrameCount","_intermediateFrameTimes","_multiTime","_controllable","ModuleDev","dfnum","mfnum","pause","numRemainingIntermediates","requestAnimationFrame","invoke","RequestType","Frame","block","cancel","cancelAnimationFrame","Update","invokeUpdate","NonOptionalUpdate","Prepare","invokePrepare","invokeFrame","unblock","redraw","_pauseTime","_multiFrameTime","MAX_VALUE","MIN_VALUE","performance","now","prepare","updateDuration","_updateFrameTime","debug","batchEnd","frame","swap","frameDuration","frameNumberNext","multiFrameNumberNext","debugFrameNumberNext","ignore","unpause","pauseDelay","controllable","multiFrameNumber","debugFrameNumber","multiFrameTime","tuples_1","Color","rgba","_rgba","DEFAULT_ALPHA","fromF32","hue2rgb","to2CharHexCode","hsl2rgb","hsl","hslF","rgb2hsl","rgb","rgbF","delta","deltaR","deltaG","deltaB","lab2xyz","lab","labF","yr","xr","zr","yr3","xr3","zr3","xyz2lab","xyz","xyzF","xyz2rgb","g","rgb2xyz","lab2rgb","rgb2lab","cmyk2rgb","cmyk","cmykF","rgb2cmyk","k1","k2","k3","hex2rgba","hex","HEX_FORMAT_REGEX","startsWith","rgb2hex","rgba2hex","rgbaF","other","red","green","blue","fromUI8","fromHSL","hue","saturation","lightness","alphaf","fromLAB","greenRed","blueYellow","fromCMYK","cyan","magenta","yellow","fromHex","gray","algorithm","GrayscaleAlgorithm","LinearLuminance","Average","LeastSaturatedVariant","MinimumDecomposition","MaximumDecomposition","ui8Array","f32Array","extensions","ExtensionsHash","encode64","bitfield","BASE64_ALPHABET","decode64","base64","encode","supported","version","LATEST_VERSION","EXTENSIONS_BY_VERSION","backendIndex","WEBGL_BACKENDS","hash","support","decode","hashHead","expectedHashLength","complement","WEBGL_EXTENSIONS_BY_BACKEND","ext","extensionshash_1","_extensionsStrive","_extensionsConceal","_functionsUndefine","preset","identifiers","presets","extensions_hash","extensions_conceal","extensions_strive","functions_undefine","msqrdHash","msqrdPreset","MASQUERADE_JSON","ndcfillingtriangle_1","program_1","shader_1","BlitPass","_ndcTriangleShared","functionBlit","DRAW_FRAMEBUFFER","_framebuffer","READ_FRAMEBUFFER","_readBuffer","_drawBuffer","enable","SCISSOR_TEST","scissor","disable","programBlit","_ndcTriangle","viewport","_program","TEXTURE0","ndcTriangle","vert","frag","uniform1i","DEPTH_ATTACHMENT","STENCIL_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","supportsBlitFramebuffer","framebuffer","changelookup_1","framebuffer_1","wizard_1","AccumulatePass","passThrough","_precision","_write","_accumulationFBOs","_accumulationTextures","_uWeight","uniform1f","_texture","_passThrough","sizeAltered","textureSize","frameNumber","readIndex","writeIndex","accumTexture","frameTexture","TEXTURE1","AntiAliasingKernel","Renderer","frameSize","canvasSize","framePrecision","debugTexture","_frameSize","_canvasSize","_framePrecision","_clearColor","_debugTextures","_debugTextureSubject","debugTextureNext","_debugTexture","onInitialize","onUninitialize","canvas","onUpdate","onPrepare","onFrame","onSwap","frameCoords","divide","DefaultFramebuffer","urilib","helpers","SchemaScanResult","found","scan","scanSchema","baseuri","$ref","resolvedUri","ourBase","substring","scanArray","items","extends","additionalItems","scanObject","properties","additionalProperties","definitions","patternProperties","dependencies","disallow","allOf","anyOf","oneOf","not","punycode","util","Url","protocol","slashes","auth","host","port","pathname","href","urlParse","relative","resolveObject","obj","isString","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","querystring","url","parseQueryString","slashesDenoteHost","isObject","u","TypeError","queryIndex","splitter","uSplit","rest","trim","simplePath","exec","substr","proto","lowerProto","atSign","hostEnd","hec","lastIndexOf","parseHost","ipv6Hostname","hostparts","part","newpart","charCodeAt","validParts","notHost","bit","unshift","toASCII","h","ae","esc","escape","qm","charAt","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","splice","isAbsolute","ray_math","rayCircleIntersection","ray0","ray1","radius","ray_direction","squaredLength","intersection","rayLineIntersection","line0","line1","cross_rs","qp","rayPlaneIntersection","origin","normal","rdDotN","distancePointToRay","ray_length","eyeToPoint","pointSquareIntersection","edgeLength","raySquareIntersection","halfLength","vertices","intersections","raySphereIntersection","rayOriginToSphereCenter","dot_term","rayPlaneIntersection_tube","intersection2","isPointWithinSquare","p_abs","isPointWithinNDC","p_transformed","eyeWithPointInView","ray_normalized","ortho_v","ortho_u","distance","closest","part_v","part_u","ReadbackPass","_cache","_depthAttachment","_cachedDepths","_cachedIDs","_buffer","directReadDepthAt","_depthFBO","readPixels","renderThenReadDepthAt","uniform2f","_uOffset","_uScale","depthAt","coordsAt","zInNDC","viewProjectionInverse","idAt","_idFBO","_idAttachment","NdcFillingRectangle","TRIANGLE_STRIP","ZoomModifier","PanModifier","eventhandler_1","firstpersonmodifier_1","trackballmodifier_1","turntablemodifier_1","Navigation","_alwaysRotateOnMove","_eventHandler","latests","onMouseDown","onMouseUp","onMouseMove","onClick","metaphor","Metaphor","Turntable","mode","isPrimaryButtonDown","buttons","isMouseDown","isMouseMove","Modes","Rotate","start","_metaphor","FirstPerson","firstPerson","_firstPerson","movementX","movementY","preventDefault","Trackball","trackball","_trackball","turntable","_turntable","_mode","Zoom","modeWasUndefined","TextureCube","_size","_bytes","faceID","face","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","TEXTURE_CUBE_MAP","LINEAR","urisByFace","images","positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ","waiting","images_1","bytesPerFace","deallocate","allocate","perFaceData","clearOnUndefined","Resizable","_resizeEventListener","instances","event_1","EVENT_IDENTIFIER","eventSupported","documentElement","body","item","onResize","elementSize","getComputedStyle","removeEventListener","color_1","context_1","controller_1","resizable_1","Canvas","_framePrecisionSubject","_sizeSubject","_frameScaleSubject","_frameSizeSubject","HTMLCanvasElement","getElementById","dataClearColor","configureController","configureSizeAndScale","DEFAULT_CLEAR_COLOR","dataFramePrecision","accumulationFormat","DEFAULT_FRAME_PRECISION","framePrecisionNext","dataMFNum","dataDFNum","_controller","DEFAULT_MULTI_FRAME_NUMBER","mfNumChanged","dfNumChanged","dataFrameScale","dataFrameSize","frameScale","_frameScale","_favorSizeOverScale","retrieveSize","sizeNext","_renderer","frameScaleNext","frameSizeNext","renderer","blocked","div","exactEquals","backendString","queryHalfFloatSupport","queryColorAttachments","queryInstancedArraySupport","queryDrawBuffersSupport","queryVertexArrayObjectSupport","queryMaxUniformVec3Components","queryTexImageInterface","_halfFloat","HALF_FLOAT_OES","_colorAttachmentMin","_colorAttachmentMax","_colorAttachments","getParameter","MAX_COLOR_ATTACHMENTS_WEBGL","COLOR_ATTACHMENT0_WEBGL","MAX_COLOR_ATTACHMENTS","supportsInstancedArrays","drawArraysInstanced","first","instanceCount","instancedArrays","drawArraysInstancedANGLE","drawElementsInstanced","primcount","drawElementsInstancedANGLE","vertexAttribDivisor","divisor","vertexAttribDivisorANGLE","buffers","drawBuffersWEBGL","vertexArrayObject","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArray","isVertexArrayOES","bindVertexArrayOES","_maxUniformVec3Components","MAX_VERTEX_UNIFORM_COMPONENTS","MAX_VERTEX_UNIFORM_VECTORS","level","internalformat","border","ArrayBuffer","Uint8ClampedArray","Int16Array","Uint16Array","Float64Array","DataView","_bytesByIdentifier","_bytesSubject","bytesNext","bytesToString","assertIdentifier","uniqueIdentifier","unificationSuffix","previousBytes","output","singleMatcher","multiMatcher","decodeComponents","tokens","encodedURI","replaceMap","%FE%FF","%FF%FE","entries","customDecodeURIComponent","str","toUpperCase","strictUriEncode","decodeComponent","strict","extract","queryStart","formatter","arrayFormat","accumulator","parserForArrayFormat","ret","param","sort","Boolean","keysSorter","encoderForArrayFormat","parseUrl","canvas_1","defaultframebuffer_1","renderer_1","texturecube_1","cameramodifier_1","navigation_1","panmodifier_1","zoommodifier_1","ndcfillingrectangle_1","antialiasingkernel_1","randomsquarekernel_1","kernel_1","accumulatepass_1","blitpass_1","readbackpass_1","root_auxiliaries","root_gl_matrix_extensions","root_raymath","root_tuples","TestNavigation","onMouseEnter","onMouseLeave","viewer","Fullscreen","exitFullScreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","fullscreenElement","_event","msRequestFullscreen","msFullscreenElement","mozRequestFullScreen","mozFullScreenElement","webkitRequestFullscreen","webkitFullscreenElement","toggle","isFullscreen","_callback","EventBlocker","events","_blockListenerByEvent","events_1","eventIdentifier","stopPropagation","testnavigation_1","TestRenderer","supportsStandardDerivatives","standardDerivatives","_uNdcOffset","_uFrameNumber","_ndcOffsetKernel","_defaultFBO","_colorRenderTexture","_depthRenderbuffer","_intermediateFBO","_accumulate","_blit","BACK","_testNavigation","altered","ndcOffset","uniform2fv","ignoreProperties","default","description","title","exclusiveMinimum","exclusiveMaximum","$schema","validators","testSchemaNoThrow","validateSchema","Function","testAdditionalProperty","types","preValidateProperty","some","testType","list","inner","nestedErrors","self","prop","minProperties","maxProperties","minimum","maximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","divisorDecimals","maxDecimals","multiplier","testArrays","multipleOf","divisibleBy","required","string","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dep","childContext","String","notTypes","schemaId","stringifyPrimitive","isFinite","sep","eq","objectKeys","ks","xs","qs","maxKeys","kstr","vstr","idx","eval","webpackPolyfill","deprecate","paths","children","__WEBPACK_AMD_DEFINE_RESULT__","nodeType","freeGlobal","global","maxInt","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","overflow","not-basic","invalid-input","baseMinusTMin","stringFromCharCode","fromCharCode","RangeError","mapDomain","ucs2decode","extra","counter","ucs2encode","digitToBasic","digit","adapt","numPoints","firstTime","basic","oldi","baseMinusT","codePoint","inputLength","bias","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","ucs2","toUnicode","Validator","unresolvedRefs","attributes","shouldResolve","addSchema","ourUri","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","validate","sch","switchSchema","schemaobj","schemaTraverser","superResolve","resolved","subctx","subschema","skipAttributes","validatorErr","allowUnknownAttributes","rewrite","parsed","fragment","integer","boolean","Date","jsonschema_1","properties_1","references","references_1","reference","propertiesSchema","properties_3","propertySchema","isDefined","hasProperties","hasDefault","itemsSchema","_b","compare","objectL","objectR","tracker","track","names_1","from","Set","values","name_2","__export","root_properties","debug_TestNavigation","debug_TestRenderer","viewer_EventBlocker","viewer_Fullscreen"],"mappings":"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","file":"../dist/webgl-operate.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Rx\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Rx\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gloperate\"] = factory(require(\"Rx\"));\n\telse\n\t\troot[\"gloperate\"] = factory(root[\"Rx\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__6__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 84);\n","\r\nimport { parse } from 'query-string';\r\n\r\n/**\r\n * If true, assertions immediately return on invocation (variable can be set via webpack define plugin).\r\n */\r\ndeclare var DISABLE_ASSERTIONS: boolean;\r\n\r\n/**\r\n * If defined, logs of equal or higher verbosity level are skipped (variable can be set via webpack define plugin).\r\n */\r\ndeclare var LOG_VERBOSITY_THRESHOLD: number; // -1 disables all logs\r\n\r\n\r\n/** Namespace that comprises various utils (also cleans up documentation). */\r\nnamespace auxiliaries {\r\n\r\n    export let disableAssertions: boolean;\r\n    try {\r\n        disableAssertions = DISABLE_ASSERTIONS;\r\n    } catch (error) {\r\n        disableAssertions = false;\r\n    }\r\n\r\n    export let logVerbosityThreshold: number;\r\n    try {\r\n        logVerbosityThreshold = LOG_VERBOSITY_THRESHOLD;\r\n    } catch (error) {\r\n        logVerbosityThreshold = 2;\r\n    }\r\n\r\n\r\n    /**\r\n     * Log verbosity levels:\r\n     *   0: a non dev user should find this information useful\r\n     *   1: a dev user should find this information useful\r\n     *   2: a module dev should find this information useful\r\n     */\r\n    export enum LogLevel { User, Dev, ModuleDev }\r\n\r\n    /**\r\n     * Evaluates the provided expression and throws an evaluation error if false.\r\n     * ```\r\n     * assert(foo <= threshold, `value of foo ${foo} exceeds threshold of ${threshold}`);\r\n     * ```\r\n     * @param expression - Result of an expression expected to be true.\r\n     * @param message - Message to be passed to the error (if thrown).\r\n     */\r\n    export function assert(expression: boolean, message: string): void {\r\n        if (disableAssertions || expression) {\r\n            return;\r\n        }\r\n\r\n        // Note: the parameters are intentionally not forwarded to console.assert since it does not interrupt execution.\r\n        throw new EvalError(message);\r\n    }\r\n\r\n\r\n    /**\r\n     * Writes a warning to the console when the evaluated expression is false.\r\n     * ```\r\n     * log(,`scale changed to ${scale}, given ${this._scale}`);\r\n     * ```\r\n     * @param expression - Result of an expression expected to be true.\r\n     * @param verbosity - Verbosity of log level: user, developer, or module developer.\r\n     * @param message - Message to be passed to the error (if thrown).\r\n     */\r\n    export function log(verbosity: LogLevel, message: string): void {\r\n        if (verbosity > logVerbosityThreshold) {\r\n            return;\r\n        }\r\n        console.log(`[${verbosity}] ${message}`);\r\n    }\r\n\r\n    /**\r\n     * Writes a lo message to the console when the evaluated expression is false.\r\n     * ```\r\n     * logIf(!vec2.equals(this._scale, scale), LogLevel.Dev, `scale changed to ${scale}, given ${this._scale}`);\r\n     * ```\r\n     * @param expression - Result of an expression expected to be true.\r\n     * @param verbosity - Verbosity of log level: user, developer, or module developer.\r\n     * @param message - Message to be passed to the error (if thrown).\r\n     */\r\n    export function logIf(expression: boolean, verbosity: LogLevel, message: string): void {\r\n        if (!expression) {\r\n            return;\r\n        }\r\n        log(verbosity, message);\r\n    }\r\n\r\n    /**\r\n     * Generates a random value within a given range [min,max].\r\n     * @param min - Minimum random value possible.\r\n     * @param max - Maximum random value possible.\r\n     * @return - Random number in the range [min,max].\r\n     */\r\n    export function rand(min: number = 0.0, max: number = 1.0): number {\r\n        return Math.random() * (max - min) + min;\r\n    }\r\n\r\n    /**\r\n     * Byte prefixes based on ISO/IEC 80000 used for pretty printing of bytes.\r\n     */\r\n    const prefixes: Array<string> = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'];\r\n\r\n    /**\r\n     * Prints bytes using ISO/IEC 80000 prefixes for bytes and fixed number of decimal places (3 decimal places if\r\n     * bytes >= KiB).\r\n     * ```\r\n     * prettyPrintBytes(27738900); // returns '26.454MiB'\r\n     * ```\r\n     * @param bytes - Number of bytes in plain bytes.\r\n     */\r\n    export function prettyPrintBytes(bytes: number): string {\r\n        const prefix: number = bytes > 0 ? Math.floor(Math.log(bytes) / Math.log(1024)) : 0;\r\n        const prefixedBytes = bytes / Math.pow(1024, prefix);\r\n        return `${prefix > 0 ? prefixedBytes.toFixed(3) : prefixedBytes}${prefixes[prefix]}B`;\r\n    }\r\n\r\n    /**\r\n     * Tests if specific bits are set in a given bitfield and returns true if so, false otherwise.\r\n     */\r\n    export function bitInBitfield(flags: GLbitfield, flag: GLbitfield): boolean {\r\n        if (flag === undefined) {\r\n            return false;\r\n        }\r\n        return (flags & flag) === flag;\r\n    }\r\n\r\n    /**\r\n     * Conversion multiplier for radians to degrees conversion (180 / PI).\r\n     */\r\n    export const RAD2DEG = 57.295779513082320;\r\n\r\n    /**\r\n     * Conversion multiplier for degrees to radians conversion (PI / 180).\r\n     */\r\n    export const DEG2RAD = 0.017453292519943295;\r\n\r\n    /**\r\n     * Queries window.location.search.\r\n     */\r\n    export function GETsearch(): string {\r\n        return window.location.search;\r\n    }\r\n\r\n    /**\r\n     * Queries the value of a GET parameter.\r\n     *  * @param parameter - Name/identifier of the parameter to query for.\r\n     */\r\n    export function GETparameter(parameter: string): string | undefined {\r\n        const params = parse(GETsearch());\r\n        return params[parameter];\r\n    }\r\n\r\n}\r\n\r\nexport = auxiliaries;\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\n\r\n/**\r\n * Mixin that incorporates basic (un-)initialization workflow. The inheritor should specialize initialize and\r\n * uninitialize and decorate them with @initialize and @uninitialize respectively. When the object gets constructed it\r\n * is not initialized. It can be initialized only when it is not initialized and uninitialized vice versa. Failure\r\n * states result in invalid asserts.\r\n * The initialization status within the inheritor can be asserted using assertInitialized and assertUninitialized.\r\n *\r\n * ```\r\n * class Test extends Initializable {\r\n *\r\n *     @initialize()\r\n *     initialize(name: string): boolean {\r\n *         ....\r\n *         return true;\r\n *     }\r\n *\r\n *     @uninitialize()\r\n *     uninitialize(): void {\r\n *         ...\r\n *     }\r\n *\r\n *     doStuffWhenInitialized(): void {\r\n *         this.assertInitialized();\r\n *         ...\r\n *     }\r\n *     // ... or alternatively:\r\n *     @assert_initialized()\r\n *     doOtherStuffWhenInitialized(): void {\r\n *         ...\r\n *     }\r\n * ```\r\n */\r\nexport abstract class Initializable {\r\n\r\n    /** @see {@link initialized} */\r\n    private _initialized = false;\r\n\r\n\r\n    protected static readonly assertInitializedFalse = (object: Initializable) =>\r\n        /* tslint:disable-next-line:semicolon */\r\n        assert(false, `instance of ${object.constructor.name} expected to be initialized`);\r\n    protected static readonly assertUninitializedFalse = (object: Initializable) =>\r\n        /* tslint:disable-next-line:semicolon */\r\n        assert(false, `instance of ${object.constructor.name} not expected to be initialized`);\r\n\r\n    /**\r\n     * Method decorator for initialization of Initializable inheritors. This decorator asserts the initialization status\r\n     * of the instance that is to be initialized, invokes its initialization with arbitrary number of parameters,\r\n     * and sets the initialization status to the initialization success (either false or true).\r\n     * In order to encourage the use of `assertInitialized` and `assertUninitialized` they are dynamically\r\n     * bound to either a static, always-failing assert or an empty/undefined function.\r\n     */\r\n    static initialize() {\r\n        return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n\r\n            const initialize = descriptor.value;\r\n            /* tslint:disable-next-line:space-before-function-paren only-arrow-functions */\r\n            descriptor.value = function (): boolean {\r\n                assert(this._initialized === false, `re-initialization of initialized object not anticipated`);\r\n\r\n                /* call actual initialization and set initialization status */\r\n                this._initialized = initialize.apply(this, arguments);\r\n\r\n                /* assign assert functions for better performance when initialized */\r\n                if (this._initialized) {\r\n                    this.assertInitialized = () => undefined;\r\n                    this.assertUninitialized = () => Initializable.assertUninitializedFalse(this);\r\n                } else {\r\n                    this.assertUninitialized = () => undefined;\r\n                    this.assertInitialized = () => Initializable.assertInitializedFalse(this);\r\n                }\r\n                return this._initialized;\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Method decorator for uninitialization of Initializable inheritors. This decorator asserts the initialization\r\n     * status of the instance that is to be uninitialized, invokes its uninitialization, and falsifies the\r\n     * initialization status. In order to encourage the use of `assertInitialized` and `assertUninitialized` they are\r\n     * dynamically bound to a static, always-failing assert and an empty/undefined function respectively.\r\n     */\r\n    static uninitialize() {\r\n        return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n\r\n            const uninitialize = descriptor.value;\r\n            /* tslint:disable-next-line:space-before-function-paren only-arrow-functions */\r\n            descriptor.value = function (): void {\r\n                assert(this._initialized === true, `expected object to be initialized in order to uninitialize`);\r\n\r\n                /* call actual uninitialization */\r\n                uninitialize.apply(this);\r\n                this._initialized = false;\r\n\r\n                /* assign assert functions for better performance when uninitialized */\r\n                this.assertUninitialized = () => undefined;\r\n                this.assertInitialized = () => Initializable.assertInitializedFalse(this);\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Method decorator for asserting the initialization status of an initializable to be true.\r\n     * @see {@link assertInitialized}\r\n     */\r\n    static assert_initialized() {\r\n        return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n\r\n            const initialize = descriptor.value;\r\n            /* tslint:disable-next-line:space-before-function-paren only-arrow-functions */\r\n            descriptor.value = function (): any {\r\n                this.assertInitialized();\r\n                /* call actual initialization and set initialization status */\r\n                return initialize.apply(this, arguments);\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Method decorator for asserting the initialization status of an initializable to be false.\r\n     * @see {@link assertUninitialized}\r\n     */\r\n    static assert_uninitialized() {\r\n        return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n\r\n            const initialize = descriptor.value;\r\n            /* tslint:disable-next-line:space-before-function-paren only-arrow-functions */\r\n            descriptor.value = function () {\r\n                this.assertUninitialized();\r\n                /* call actual initialization and set initialization status */\r\n                initialize.apply(this, arguments);\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n\r\n\r\n    /**\r\n     * Asserts the objects initialization status to be true. Note that the implementation is cached and forwarded to\r\n     * either an empty function when initialized and to an acutal assert(false) otherwise.\r\n     */\r\n    protected assertInitialized: () => void = () => Initializable.assertInitializedFalse(this);\r\n\r\n    /**\r\n     * Asserts the objects initialization status to be false. Note that the implementation is cached and forwarded to\r\n     * either an empty function when uninitialized and to an acutal assert(false) otherwise.\r\n     */\r\n    protected assertUninitialized: () => void = () => undefined;\r\n\r\n    /**\r\n     * Should implement actual initialization and has to be decorated by @initialize in order to assert initialization\r\n     * status and update the initialization status (based on return value).\r\n     * @param args - All args are passed to the onInitialize function a subclass must override.\r\n     * @returns - True if initialization was successful.\r\n     */\r\n    abstract initialize(...args: any[]): boolean;\r\n\r\n    /**\r\n     * Uninitialization event that should be specialized by inheritor and has to be decorated by @uninitialize in order\r\n     * to assert initialization status and set the initialization status to false.\r\n     */\r\n    abstract uninitialize(): void;\r\n\r\n    /**\r\n     * Property getter for readonly access to the initialization status of an initializable instance.\r\n     */\r\n    get initialized() {\r\n        return this._initialized;\r\n    }\r\n\r\n}\r\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nexport const RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\n\nconst degree = Math.PI / 180;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\"\n\n/**\n * 2x2 Matrix\n * @module mat2\n */\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {mat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Create a new mat2 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out A new 2x2 matrix\n */\nexport function fromValues(m00, m01, m10, m11) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n\n/**\n * Set the components of a mat2 to the given values\n *\n * @param {mat2} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out\n */\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    let a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function invert(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n\n  // Calculate the determinant\n  let det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] =  a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] =  a0 * det;\n\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  let a0 = a[0];\n  out[0] =  a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] =  a0;\n\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat2\n *\n * @param {mat2} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function multiply(out, a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nexport function rotate(out, a, rad) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = a0 *  c + a2 * s;\n  out[1] = a1 *  c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\nexport function scale(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.rotate(dest, dest, rad);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.scale(dest, dest, vec);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n\n/**\n * Returns a string representation of a mat2\n *\n * @param {mat2} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {mat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2)))\n}\n\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {mat2} L the lower triangular matrix\n * @param {mat2} D the diagonal matrix\n * @param {mat2} U the upper triangular matrix\n * @param {mat2} a the input matrix to factorize\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2]/a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n\n/**\n * Adds two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat2} a The first matrix.\n * @param {mat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat2} a The first matrix.\n * @param {mat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2} out the receiving vector\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  return out;\n}\n\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat2.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 2x3 Matrix\n * @module mat2d\n *\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, c, tx,\n *  b, d, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * </pre>\n * The last row is ignored so the array is shorter and operations are faster.\n */\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {mat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Create a new mat2d with the given values\n *\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} A new mat2d\n */\nexport function fromValues(a, b, c, d, tx, ty) {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n\n/**\n * Set the components of a mat2d to the given values\n *\n * @param {mat2d} out the receiving matrix\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} out\n */\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nexport function invert(out, a) {\n  let aa = a[0], ab = a[1], ac = a[2], ad = a[3];\n  let atx = a[4], aty = a[5];\n\n  let det = aa * ad - ab * ac;\n  if(!det){\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {mat2d} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function multiply(out, a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nexport function rotate(out, a, rad) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = a0 *  c + a2 * s;\n  out[1] = a1 *  c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\nexport function scale(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\nexport function translate(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.rotate(dest, dest, rad);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad), c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.scale(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2d} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.translate(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat2d} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n\n/**\n * Returns a string representation of a mat2d\n *\n * @param {mat2d} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n          a[3] + ', ' + a[4] + ', ' + a[5] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {mat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1))\n}\n\n/**\n * Adds two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2d} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n\n/**\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2d} out the receiving vector\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2d} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat2d} a The first matrix.\n * @param {mat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat2d} a The first matrix.\n * @param {mat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)));\n}\n\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat2d.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1], a02 = a[2], a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  let b01 = a22 * a11 - a12 * a21;\n  let b11 = -a22 * a10 + a12 * a20;\n  let b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  let det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  out[0] = (a11 * a22 - a12 * a21);\n  out[1] = (a02 * a21 - a01 * a22);\n  out[2] = (a01 * a12 - a02 * a11);\n  out[3] = (a12 * a20 - a10 * a22);\n  out[4] = (a00 * a22 - a02 * a20);\n  out[5] = (a02 * a10 - a00 * a12);\n  out[6] = (a10 * a21 - a11 * a20);\n  out[7] = (a01 * a20 - a00 * a21);\n  out[8] = (a00 * a11 - a01 * a10);\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  let b00 = b[0], b01 = b[1], b02 = b[2];\n  let b10 = b[3], b11 = b[4], b12 = b[5];\n  let b20 = b[6], b21 = b[7], b22 = b[8];\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n  let a00 = a[0], a01 = a[1], a02 = a[2],\n    a10 = a[3], a11 = a[4], a12 = a[5],\n    a20 = a[6], a21 = a[7], a22 = a[8],\n    x = v[0], y = v[1];\n\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n  let a00 = a[0], a01 = a[1], a02 = a[2],\n    a10 = a[3], a11 = a[4], a12 = a[5],\n    a20 = a[6], a21 = a[7], a22 = a[8],\n\n    s = Math.sin(rad),\n    c = Math.cos(rad);\n\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0], y = v[1];\n\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat3} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad), c = Math.cos(rad);\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat3} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nexport function fromQuat(out, q) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n\n  return out;\n}\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nexport function normalFromMat4(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n    out[0] = 2 / width;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -2 / height;\n    out[5] = 0;\n    out[6] = -1;\n    out[7] = 1;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {mat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n          a[3] + ', ' + a[4] + ', ' + a[5] + ', ' +\n          a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2)))\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  out[6] = a[6] + (b[6] * scale);\n  out[7] = a[7] + (b[7] * scale);\n  out[8] = a[8] + (b[8] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] &&\n         a[3] === b[3] && a[4] === b[4] && a[5] === b[5] &&\n         a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7], a8 = a[8];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7], b8 = b[8];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n          Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n          Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n          Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)));\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 4x4 Matrix\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1], a02 = a[2], a03 = a[3];\n    let a12 = a[6], a13 = a[7];\n    let a23 = a[11];\n\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n  out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n  out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n  out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n  out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n  out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n  let x = v[0], y = v[1], z = v[2];\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n    out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n    out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0], y = v[1], z = v[2];\n\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n  let x = axis[0], y = axis[1], z = axis[2];\n  let len = Math.sqrt(x * x + y * y + z * z);\n  let s, c, t;\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n  let b00, b01, b02;\n  let b10, b11, b12;\n  let b20, b21, b22;\n\n  if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n  a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n  a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged rows\n    out[0]  = a[0];\n    out[1]  = a[1];\n    out[2]  = a[2];\n    out[3]  = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged rows\n    out[4]  = a[4];\n    out[5]  = a[5];\n    out[6]  = a[6];\n    out[7]  = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged last row\n    out[8]  = a[8];\n    out[9]  = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n  let x = axis[0], y = axis[1], z = axis[2];\n  let len = Math.sqrt(x * x + y * y + z * z);\n  let s, c, t;\n\n  if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = 1;\n  out[1]  = 0;\n  out[2]  = 0;\n  out[3]  = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = c;\n  out[1]  = 0;\n  out[2]  = -s;\n  out[3]  = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = c;\n  out[1]  = s;\n  out[2]  = 0;\n  out[3]  = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n\n  return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n  let m11 = mat[0];\n  let m12 = mat[1];\n  let m13 = mat[2];\n  let m21 = mat[4];\n  let m22 = mat[5];\n  let m23 = mat[6];\n  let m31 = mat[8];\n  let m32 = mat[9];\n  let m33 = mat[10];\n\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n\n  return out;\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5])&(mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @param {vec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  let ox = o[0];\n  let oy = o[1];\n  let oz = o[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\n  out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\n  out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n  let rl = 1 / (right - left);\n  let tb = 1 / (top - bottom);\n  let nf = 1 / (near - far);\n  out[0] = (near * 2) * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = (near * 2) * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = (far * near * 2) * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2);\n  let nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = (2 * far * near) * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  let upTan = Math.tan(fov.upDegrees * Math.PI/180.0);\n  let downTan = Math.tan(fov.downDegrees * Math.PI/180.0);\n  let leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0);\n  let rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0);\n  let xScale = 2.0 / (leftTan + rightTan);\n  let yScale = 2.0 / (upTan + downTan);\n\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = ((upTan - downTan) * yScale * 0.5);\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = (far * near) / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n  let lr = 1 / (left - right);\n  let bt = 1 / (bottom - top);\n  let nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n  let x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  let eyex = eye[0];\n  let eyey = eye[1];\n  let eyez = eye[2];\n  let upx = up[0];\n  let upy = up[1];\n  let upz = up[2];\n  let centerx = center[0];\n  let centery = center[1];\n  let centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n      Math.abs(eyey - centery) < glMatrix.EPSILON &&\n      Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return mat4.identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n  let eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n\n  let z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n\n  let len = z0*z0 + z1*z1 + z2*z2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  let x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n};\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n          a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n          a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' +\n          a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  out[6] = a[6] + (b[6] * scale);\n  out[7] = a[7] + (b[7] * scale);\n  out[8] = a[8] + (b[8] * scale);\n  out[9] = a[9] + (b[9] * scale);\n  out[10] = a[10] + (b[10] * scale);\n  out[11] = a[11] + (b[11] * scale);\n  out[12] = a[12] + (b[12] * scale);\n  out[13] = a[13] + (b[13] * scale);\n  out[14] = a[14] + (b[14] * scale);\n  out[15] = a[15] + (b[15] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] &&\n         a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] &&\n         a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] &&\n         a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0  = a[0],  a1  = a[1],  a2  = a[2],  a3  = a[3];\n  let a4  = a[4],  a5  = a[5],  a6  = a[6],  a7  = a[7];\n  let a8  = a[8],  a9  = a[9],  a10 = a[10], a11 = a[11];\n  let a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];\n\n  let b0  = b[0],  b1  = b[1],  b2  = b[2],  b3  = b[3];\n  let b4  = b[4],  b5  = b[5],  b6  = b[6],  b7  = b[7];\n  let b8  = b[8],  b9  = b[9],  b10 = b[10], b11 = b[11];\n  let b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\n\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n          Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n          Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n          Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n          Math.abs(a9 - b9) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n          Math.abs(a10 - b10) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n          Math.abs(a11 - b11) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n          Math.abs(a12 - b12) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n          Math.abs(a13 - b13) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n          Math.abs(a14 - b14) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n          Math.abs(a15 - b15) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n}\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return x*x + y*y + z*z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return x*x + y*y + z*z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n  let factorTimes2 = t * t;\n  let factor1 = factorTimes2 * (2 * t - 3) + 1;\n  let factor2 = factorTimes2 * (t - 2) + t;\n  let factor3 = factorTimes2 * (t - 1);\n  let factor4 = factorTimes2 * (3 - 2 * t);\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n  let inverseFactor = 1 - t;\n  let inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  let factorTimes2 = t * t;\n  let factor1 = inverseFactorTimesTwo * inverseFactor;\n  let factor2 = 3 * t * inverseFactorTimesTwo;\n  let factor3 = 3 * factorTimes2 * inverseFactor;\n  let factor4 = factorTimes2 * t;\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n\n  let r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  let z = (glMatrix.RANDOM() * 2.0) - 1.0;\n  let zScale = Math.sqrt(1.0-z*z) * scale;\n\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0], y = a[1], z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n  let x = a[0], y = a[1], z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n  // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n  let x = a[0], y = a[1], z = a[2];\n  let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n\n  // calculate quat * vec\n  let ix = qw * x + qy * z - qz * y;\n  let iy = qw * y + qz * x - qx * z;\n  let iz = qw * z + qx * y - qy * x;\n  let iw = -qx * x - qy * y - qz * z;\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n  r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n  r[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  let tempA = fromValues(a[0], a[1], a[2]);\n  let tempB = fromValues(b[0], b[1], b[2]);\n\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n\n  let cosine = dot(tempA, tempB);\n\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2];\n  let b0 = b[0], b1 = b[1], b2 = b[2];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n\n    return a;\n  };\n})();\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return Math.sqrt(x*x + y*y + z*z + w*w);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return x*x + y*y + z*z + w*w;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return Math.sqrt(x*x + y*y + z*z + w*w);\n}\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return x*x + y*y + z*z + w*w;\n}\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  let aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, vectorScale) {\n  vectorScale = vectorScale || 1.0;\n\n  //TODO: This is a pretty awful way of doing this. Find something better.\n  out[0] = glMatrix.RANDOM();\n  out[1] = glMatrix.RANDOM();\n  out[2] = glMatrix.RANDOM();\n  out[3] = glMatrix.RANDOM();\n  normalize(out, out);\n  scale(out, out, vectorScale);\n  return out;\n}\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0], y = a[1], z = a[2], w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n  let x = a[0], y = a[1], z = a[2];\n  let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n\n  // calculate quat * vec\n  let ix = qw * x + qy * z - qz * y;\n  let iy = qw * y + qz * x - qx * z;\n  let iz = qw * z + qx * y - qy * x;\n  let iw = -qx * x - qy * y - qz * z;\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec4} a The first vector.\n * @param {vec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec4} a The first vector.\n * @param {vec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n\n    return a;\n  };\n})();\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\"\nimport * as mat3 from \"./mat3\"\nimport * as vec3 from \"./vec3\"\nimport * as vec4 from \"./vec4\"\n\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {quat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\nexport function getAxisAngle(out_axis, q) {\n  let rad = Math.acos(q[3]) * 2.0;\n  let s = Math.sin(rad / 2.0);\n  if (s != 0.0) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n  return rad;\n}\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let by = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bz = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate W component of\n * @returns {quat} out\n */\nexport function calculateW(out, a) {\n  let x = a[0], y = a[1], z = a[2];\n\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n  let omega, cosom, sinom, scale0, scale1;\n\n  // calc cosine\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  // adjust signs (if necessary)\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  // calculate coefficients\n  if ( (1.0 - cosom) > 0.000001 ) {\n    // standard case (slerp)\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  // calculate final values\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n\n  return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot ? 1.0/dot : 0;\n\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n\n  if ( fTrace > 0.0 ) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0);  // 2w\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;  // 1/(4w)\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    // |w| <= 1/2\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n\n  return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n\n    return out;\n}\n\n/**\n * Returns a string representation of a quatenion\n *\n * @param {quat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {quat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nexport const clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nexport const fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport const copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport const set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport const add = vec4.add;\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport const scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport const dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nexport const lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport const length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {quat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport const squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport const normalize = vec4.normalize;\n\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {quat} a The first quaternion.\n * @param {quat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const exactEquals = vec4.exactEquals;\n\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {quat} a The first vector.\n * @param {quat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const equals = vec4.equals;\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {vec3} a the initial vector\n * @param {vec3} b the destination vector\n * @returns {quat} out\n */\nexport const rotationTo = (function() {\n  let tmpvec3 = vec3.create();\n  let xUnitVec3 = vec3.fromValues(1,0,0);\n  let yUnitVec3 = vec3.fromValues(0,1,0);\n\n  return function(out, a, b) {\n    let dot = vec3.dot(a, b);\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001)\n        vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n})();\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {quat} c the third operand\n * @param {quat} d the fourth operand\n * @param {Number} t interpolation amount\n * @returns {quat} out\n */\nexport const sqlerp = (function () {\n  let temp1 = create();\n  let temp2 = create();\n\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n\n    return out;\n  };\n}());\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {vec3} view  the vector representing the viewing direction\n * @param {vec3} right the vector representing the local \"right\" direction\n * @param {vec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nexport const setAxes = (function() {\n  let matr = mat3.create();\n\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n\n    return normalize(out, fromMat3(out, matr));\n  };\n})();\n","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = 0;\n  out[1] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nexport function fromValues(x, y) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n};\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n};\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to ceil\n * @returns {vec2} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n};\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to floor\n * @returns {vec2} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n};\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n};\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to round\n * @returns {vec2} out\n */\nexport function round (out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return x*x + y*y;\n};\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0],\n    y = a[1];\n  return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength (a) {\n  var x = a[0],\n    y = a[1];\n  return x*x + y*y;\n};\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n  var x = a[0],\n    y = a[1];\n  var len = x*x + y*y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n    ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1];\n  let b0 = b[0], b1 = b[1];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 2;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1];\n    }\n\n    return a;\n  };\n})();\n","/**\n * @fileoverview gl-matrix - High performance matrix and vector operations\n * @author Brandon Jones\n * @author Colin MacKenzie IV\n * @version 2.4.0\n */\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n// END HEADER\n\nimport * as glMatrix from \"./gl-matrix/common\";\nimport * as mat2 from \"./gl-matrix/mat2\";\nimport * as mat2d from \"./gl-matrix/mat2d\";\nimport * as mat3 from \"./gl-matrix/mat3\";\nimport * as mat4 from \"./gl-matrix/mat4\";\nimport * as quat from \"./gl-matrix/quat\";\nimport * as vec2 from \"./gl-matrix/vec2\";\nimport * as vec3 from \"./gl-matrix/vec3\";\nimport * as vec4 from \"./gl-matrix/vec4\";\n\nexport {\n  glMatrix,\n  mat2, mat2d, mat3, mat4,\n  quat,\n  vec2, vec3, vec4,\n};","\r\nimport { mat2, mat3, mat4, vec2, vec3, vec4 } from 'gl-matrix';\r\n\r\n\r\n/** Namespace that comprises various gl-matrix extensions (also cleans up documentation). */\r\nnamespace gl_matrix_extensions {\r\n\r\n    // GLSL sign https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/sign.xhtml\r\n\r\n    /**\r\n     * Extract the sign of the parameter as specified in GLSL.\r\n     * @param x - Value from which to extract the sign.\r\n     * @returns - -1.0 if x is less than 0.0, 0.0 if x is equal to 0.0, and +1.0 if x is greater than 0.0.\r\n     */\r\n    export function sign(x: number): number {\r\n        return x > 0.0 ? 1.0 : x < 0.0 ? -1.0 : 0.0;\r\n    }\r\n\r\n    // GLSL clamp https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/clamp.xhtml\r\n\r\n    /**\r\n     * Constrain a value to lie between two further values.\r\n     * ```\r\n     * clamp(+3, +0, +2); // results in +2;\r\n     * ```\r\n     * @param x - The number to clamp.\r\n     * @param min - Minimum number operand.\r\n     * @param max - Maximum number operand.\r\n     * @returns - Number constrained to [min,max].\r\n     */\r\n    export function clamp(x: number, min: number, max: number): number {\r\n        return Math.max(min, Math.min(max, x));\r\n    }\r\n\r\n    /**\r\n     * Compute the fractional part of the argument.\r\n     * ```\r\n     * fract(+1.23); // results in +0.23\r\n     * fract(-1.23); // results in -0.23\r\n     * ```\r\n     * @param x - The number to compute the fractional part of.\r\n     * @returns - The fractional part of x. This is calculated as x - floor(x).\r\n     */\r\n    export function fract(x: number): number {\r\n        return x > 0 ? x - Math.floor(x) : x - Math.ceil(x);\r\n    }\r\n\r\n\r\n    /**\r\n     * A vec2 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function v2(): vec2 {\r\n        return vec2.create();\r\n    }\r\n\r\n    /**\r\n     * Constrain a two-component vector to lie between two further two-component vectors.\r\n     * ```\r\n     * let a: vec2 = vec2.fromValues(2, 2);\r\n     * clamp2(a, a, [0, 0], [1, 1]);\r\n     * ```\r\n     * @param out - The receiving vector.\r\n     * @param x - The vector to clamp.\r\n     * @param min - Minimum vector operand.\r\n     * @param max - Maximum vector operand.\r\n     * @returns - Vector constrained to [min,max].\r\n     */\r\n    export function clamp2(out: vec2, x: vec2 | number[], min: vec2 | number[], max: vec2 | number[]): vec2 {\r\n        out[0] = Math.max(min[0], Math.min(max[0], x[0]));\r\n        out[1] = Math.max(min[1], Math.min(max[1], x[1]));\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Derive the absolute values of each of the two vector components.\r\n     * ```\r\n     * let a: vec2 = vec2.fromValues(-2, 2);\r\n     * abs2(a, a); // should result in [2,2]\r\n     * ```\r\n     * @param out - The receiving vector.\r\n     * @param x - The vector to apply abs to.\r\n     * @returns - Vector with each component as absolute value.\r\n     */\r\n    export function abs2(out: vec2, x: vec2): vec2 {\r\n        out[0] = Math.abs(x[0]);\r\n        out[1] = Math.abs(x[1]);\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * A vec3 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function v3(): vec3 {\r\n        return vec3.create();\r\n    }\r\n\r\n    /**\r\n     * Constrain a three-component vector to lie between two further three-component vectors.\r\n     * ```\r\n     * let a: vec3 = vec3.fromValues(2, 2, 2);\r\n     * clamp3(a, a, [0, 0, 0], [1, 1, 1]);\r\n     * ```\r\n     * @param out -The receiving vector.\r\n     * @param x - The vector to clamp.\r\n     * @param min - Minimum vector operand.\r\n     * @param max - Maximum vector operand.\r\n     * @returns - Vector constrained to [min,max].\r\n     */\r\n    export function clamp3(out: vec3, x: vec3 | number[], min: vec3 | number[], max: vec3 | number[]): vec3 {\r\n        out[0] = Math.max(min[0], Math.min(max[0], x[0]));\r\n        out[1] = Math.max(min[1], Math.min(max[1], x[1]));\r\n        out[2] = Math.max(min[2], Math.min(max[2], x[2]));\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Derive the absolute values of each of the three vector components.\r\n     * ```\r\n     * let a: vec3 = vec3.fromValues(-2, 2, -1);\r\n     * abs3(a, a); // should result in [2,2,1]\r\n     * ```\r\n     * @param out - The receiving vector.\r\n     * @param x - The vector to apply abs to.\r\n     * @returns  - Vector with each component as absolute value.\r\n     */\r\n    export function abs3(out: vec3, x: vec3): vec3 {\r\n        out[0] = Math.abs(x[0]);\r\n        out[1] = Math.abs(x[1]);\r\n        out[2] = Math.abs(x[2]);\r\n        return out;\r\n    }\r\n\r\n    const one256ths: number = 1.0 / 256.0;\r\n\r\n    /**\r\n     * Encodes a 24bit floating point in [0,1] into three 8bit components (vec3 of uint8).\r\n     * @param out - The vector to encode into.\r\n     * @param x - 24bit floating point number to encode.\r\n     * @returns - Vector with the float encoded.\r\n     */\r\n    export function encode_float24x1_to_uint8x3(out: vec3, x: number): vec3 {\r\n        out[0] = Math.floor(x * 256.0);\r\n        out[1] = Math.floor(fract(x * 256.0) * 256.0);\r\n        out[2] = Math.floor(fract(x * 65536.0) * 256.0);\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Decodes three 8bit components of a vec3 to a 24bit floating point number.\r\n     * @param x - Vector with three 8bit unsigned int components (uint8x3).\r\n     * @returns - Encoded 24bit floating point number.\r\n     */\r\n    export function decode_float24x1_from_uint8x3(x: vec3): number {\r\n        return (x[0] + (x[1] + x[2] * one256ths) * one256ths) * one256ths;\r\n    }\r\n\r\n    /**\r\n     * Packs a 24bit unsigned int into a three component byte vector.\r\n     * ```\r\n     * let uint8x3: vec3 = vec3.create();\r\n     * encode_uint24_in_rgb8(uint8x3, 250285); // should result in [ 173, 209, 3 ]\r\n     * ```\r\n     * @param out - byte (uint8) vector with packed uint24 data\r\n     * @param x - uint24 number\r\n     * @returns - Three component byte vector with x packed.\r\n     */\r\n    export function encode_uint24_to_rgb8(out: vec3, x: number): vec3 {\r\n        out[0] = (x >> 0) & 0xFF;\r\n        out[1] = (x >> 8) & 0xFF;\r\n        out[2] = (x >> 16) & 0xFF;\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Packs a 32bit unsigned int into a four component byte vector.\r\n     * ```\r\n     * let uint8x4: vec3 = vec4.create();\r\n     * encode_uint24_in_rgb8(uint8x4, 250285); // should result in [ 173, 209, 3, 0 ]\r\n     * ```\r\n     * @param out - byte (uint8) vector with packed uint32 data\r\n     * @param x - uint32 number\r\n     * @returns - Three component byte vector with x packed.\r\n     */\r\n    export function encode_uint32_to_rgba8(out: vec4, x: number): vec4 {\r\n        out[0] = (x >> 0) & 0xFF;\r\n        out[1] = (x >> 8) & 0xFF;\r\n        out[2] = (x >> 16) & 0xFF;\r\n        out[3] = (x >> 24) & 0xFF;\r\n\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Unpacks a 24bit unsigned int from a three component byte vector.\r\n     * ```\r\n     * let uint8x3: vec3 = vec3.fromValues(173, 209, 3);\r\n     * decode_uint24_from_rgb8(uint8x3); // should return 250285\r\n     * ```\r\n     * @param x - byte (uint8) vector with packed uint24 data\r\n     * @returns - Unpacked 24bit unsigned int.\r\n     */\r\n    export function decode_uint24_from_rgb8(x: vec3): number {\r\n        return x[0] + (x[1] << 8) + (x[2] << 16);\r\n    }\r\n\r\n    /**\r\n     * Unpacks a 32bit unsigned int from a four component byte vector.\r\n     * ```\r\n     * let uint8x4: vec4 = vec4.fromValues(173, 209, 3, 23);\r\n     * decode_uint24_from_rgba8(uint8x4); // should return xxx\r\n     * ```\r\n     * @param x - byte (uint8) vector with packed uint32 data\r\n     * @returns - Unpacked 32bit unsigned int.\r\n     */\r\n    export function decode_uint32_from_rgba8(x: vec4): number {\r\n        return x[0] + (x[1] << 8) + (x[2] << 16) + (x[3] << 24);\r\n    }\r\n\r\n    /**\r\n     * Constructs a vec3 from a vec4 with division by the w component applied.\r\n     * ```\r\n     * const v4: vec4 = vec4.fromValues(2, 4, 6, 2);\r\n     * const v3: vec3 = fromVec4(v4); // v3 is [1, 2, 3]\r\n     * ```\r\n     * @param x - The vector to be transformed to a vec3.\r\n     * @returns - Three component vector based on x.\r\n     */\r\n    export function fromVec4(x: vec4): vec3 {\r\n        return vec3.fromValues(x[0] / x[3], x[1] / x[3], x[2] / x[3]);\r\n    }\r\n\r\n    /**\r\n     * A vec4 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function v4(): vec4 {\r\n        return vec4.create();\r\n    }\r\n\r\n    /**\r\n     * Constrain a four-component vector to lie between two further four-component vectors.\r\n     * ```\r\n     * let a: vec4 = vec4.fromValues(2, 2, 2, 2);\r\n     * clamp4(a, a, [0, 0, 0, 0], [1, 1, 1, 1]);\r\n     * ```\r\n     * @param out - The receiving vector.\r\n     * @param x - The vector to clamp.\r\n     * @param min - Minimum vector operand.\r\n     * @param max - Maximum vector operand.\r\n     * @returns - Vector constrained to [min,max].\r\n     */\r\n    export function clamp4(out: vec4, x: vec4 | number[], min: vec4 | number[], max: vec4 | number[]): vec4 {\r\n        out[0] = Math.max(min[0], Math.min(max[0], x[0]));\r\n        out[1] = Math.max(min[1], Math.min(max[1], x[1]));\r\n        out[2] = Math.max(min[2], Math.min(max[2], x[2]));\r\n        out[3] = Math.max(min[3], Math.min(max[3], x[3]));\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Derive the absolute values of each of the four vector components.\r\n     * ```\r\n     * let a: vec4 = vec4.fromValues(-2, 2, -1, 1);\r\n     * abs4(a, a); // should result in [2,2,1,1]\r\n     * ```\r\n     * @param out - The receiving vector.\r\n     * @param x - The vector to apply abs to.\r\n     * @returns - Vector with each component as absolute value.\r\n     */\r\n    export function abs4(out: vec4, x: vec4): vec4 {\r\n        out[0] = Math.abs(x[0]);\r\n        out[1] = Math.abs(x[1]);\r\n        out[2] = Math.abs(x[2]);\r\n        out[3] = Math.abs(x[3]);\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Constructs a vec4 from a vec3 by appending 1.0 as the w component.\r\n     * ```\r\n     * const v3: vec3 = vec3.fromValues(2, 4, 6);\r\n     * const v4: vec4 = fromVec3(v3); // v3 is [2, 4, 6, 1]\r\n     * ```\r\n     * @param x - The vector to be transformed to a vec4.\r\n     * @returns - Four component vector based on x.\r\n     */\r\n    export function fromVec3(x: vec3): vec4 {\r\n        return vec4.fromValues(x[0], x[1], x[2], 1.0);\r\n    }\r\n\r\n\r\n    /**\r\n     * Parses a vec2 from a string.\r\n     * @param v2str - String in the format '<number>, <number>', e.g., '1.0, 0.0'.\r\n     * @returns - Vec2 if string was parsed successfully, undefined else.\r\n     */\r\n    export function parseVec2(v2str: string | undefined): vec2 | undefined {\r\n        if (v2str === undefined || v2str === '') {\r\n            return undefined;\r\n        }\r\n        let numbers = [];\r\n        try {\r\n            numbers = JSON.parse(`[${v2str}]`);\r\n        } catch (error) {\r\n            return undefined;\r\n        }\r\n        return numbers.length !== 2 || isNaN(numbers[0]) || isNaN(numbers[1]) ?\r\n            undefined : vec2.clone(numbers);\r\n    }\r\n\r\n    /**\r\n     * Parses a vec3 from a string.\r\n     * @param v3str - String in the format '<number>, <number>, <number>', e.g., '1.0, 0.0, 1.0'.\r\n     * @returns - Vec3 if string was parsed successfully, undefined else.\r\n     */\r\n    export function parseVec3(v3str: string | undefined): vec3 | undefined {\r\n        if (v3str === undefined || v3str === '') {\r\n            return undefined;\r\n        }\r\n        let numbers = [];\r\n        try {\r\n            numbers = JSON.parse(`[${v3str}]`);\r\n        } catch (error) {\r\n            return undefined;\r\n        }\r\n        return numbers.length !== 3 || isNaN(numbers[0]) || isNaN(numbers[1]) || isNaN(numbers[2]) ?\r\n            undefined : vec3.clone(numbers);\r\n    }\r\n\r\n    /**\r\n     * Parses a vec4 from a string.\r\n     * @param v4str - String in the format '<number>, <number>, <number>, <number>', e.g., '1.0, 0.0, 0.0, 0.0'.\r\n     * @returns - Vec4 if string was parsed successfully, undefined else.\r\n     */\r\n    export function parseVec4(v4str: string | undefined): vec4 | undefined {\r\n        if (v4str === undefined || v4str === '') {\r\n            return undefined;\r\n        }\r\n        let numbers = [];\r\n        try {\r\n            numbers = JSON.parse(`[${v4str}]`);\r\n        } catch (error) {\r\n            return undefined;\r\n        }\r\n        return numbers.length !== 4 || isNaN(numbers[0]) || isNaN(numbers[1]) ||\r\n            isNaN(numbers[2]) || isNaN(numbers[3]) ?\r\n            undefined : vec4.clone(numbers);\r\n    }\r\n\r\n\r\n    /**\r\n     * Performs a mix as specified in GLSL.\r\n     * @param value1 - The first value.\r\n     * @param value2 - The second value.\r\n     * @param interpolation - The interpolation value (usually between 0 and 1).\r\n     * @return - The interpolated value between value1 and value2.\r\n     */\r\n    export function mix(value1: number, value2: number, interpolation: number): number {\r\n        return value1 * (1.0 - interpolation) + value2 * interpolation;\r\n    }\r\n\r\n\r\n    /**\r\n     * A mat2 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function m2(): mat2 {\r\n        return mat2.create();\r\n    }\r\n    /**\r\n     * A mat3 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function m3(): mat3 {\r\n        return mat3.create();\r\n    }\r\n\r\n    /**\r\n     * A mat4 placeholder to overcome the gl-matrix out interface.\r\n     */\r\n    export function m4(): mat4 {\r\n        return mat4.create();\r\n    }\r\n\r\n}\r\n\r\nexport = gl_matrix_extensions;\r\n","\r\nimport { assert, log, LogLevel } from './auxiliaries';\r\n\r\nimport { Context } from './context';\r\nimport { Initializable } from './initializable';\r\n\r\n\r\n/**\r\n * A generic WebGL object trait that has a size, a status, an identifier, and is initializable. A context and an object\r\n * handle are provided for internal use and can be read from outside. Furthermore, an object supports optional reference\r\n * counting. If used, an object cannot be initialized when already referenced, and cannot be delete as long as at least\r\n * a single reference is active.\r\n */\r\nexport abstract class AbstractObject<T> extends Initializable {\r\n\r\n    /** @see {@link context} */\r\n    protected _context: Context;\r\n\r\n    /** @see {@link identifier} */\r\n    protected _identifier: string;\r\n\r\n    /** @see {@link object} */\r\n    protected _object: T | undefined;\r\n\r\n    /** @see {@link valid} */\r\n    protected _valid = false;\r\n\r\n    /**\r\n     * Number of references to this object. If at least a single reference was counted, this object can neither be\r\n     * initialized (and thus created) nor uninitialized (and thus deleted). The reference count is controlled via\r\n     * ref() and unref() functions.\r\n     */\r\n    protected _referenceCount = 0;\r\n\r\n    /**\r\n     * Object constructor, requires a context and a valid identifier.\r\n     * @param context - Valid context to create the object for.\r\n     * @param identifier - Meaningful name for identification of this instance.\r\n     */\r\n    constructor(context: Context, identifier?: string) {\r\n        super();\r\n        this._context = context;\r\n        this._identifier = identifier !== undefined && identifier !== `` ? identifier : this.constructor.name;\r\n    }\r\n\r\n\r\n    /**\r\n     * Object creation which is invoked on initialization.\r\n     * @returns - The created WebGL object handle.\r\n     */\r\n    protected abstract create(...args: any[]): T | undefined;\r\n\r\n    /**\r\n     * Object deletion which is invoked on uninitialization.\r\n     */\r\n    protected abstract delete(): void;\r\n\r\n\r\n    /**\r\n     * @override\r\n     * Ensure that an object handle is created at the point of initialization. When overriding this function\r\n     * super.initialize() has to be invoked immediately/first. Please note that initialization of invalid\r\n     * object raises an assertion in order to prevent further actions without a valid WebGL object. After\r\n     * object creation the valid property is expected to be set accordingly.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(...args: any[]): boolean {\r\n        this._identifier = this._context.allocationRegister.createUniqueIdentifier(this._identifier);\r\n        this.create.apply(this, args);\r\n\r\n        if (!this._valid) {\r\n            this._context.allocationRegister.deleteUniqueIdentifier(this._identifier);\r\n            log(LogLevel.Dev, `initialization of '${this._identifier}' failed`);\r\n        }\r\n        return this._valid;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * Ensure that an object handle is deleted, invalidated, and its allocated GPU resources are set to zero.\r\n     * When overriding this function super.uninitialize() has to be invoked last/at the end.\r\n     * Note that an object cannot be uninitialized if it is referenced (reference count > 0).\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        this._context.allocationRegister.reallocate(this._identifier, 0);\r\n        this._context.allocationRegister.deleteUniqueIdentifier(this._identifier);\r\n\r\n        this.delete();\r\n        assert(this._object === undefined, `expected object '${this._identifier}' to be undefined after delete`);\r\n        assert(this._valid === false, `expected object '${this._identifier}' to be invalid after delete`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Read-only access to the objects context, used to get context information and WebGL API access.\r\n     */\r\n    get context(): Context {\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * Every GPU asset that allocates memory should provide a human readable identifier for GPU allocation tracking and\r\n     * debugging purposes. Please note that the identifier might changed on initialization due to the generation and\r\n     * assignment of a unique identifier.\r\n     * @returns - This assets identifier used for gpu allocation tracking and debugging.\r\n     */\r\n    get identifier(): string {\r\n        return this._identifier;\r\n    }\r\n\r\n    /**\r\n     * Read-only access to the WebGL object handle.\r\n     */\r\n    get object(): T {\r\n        assert(this._object !== undefined, `access to undefined object`);\r\n        return this._object as T;\r\n    }\r\n\r\n    /**\r\n     * Cached object status used to derive validity when initialized.\r\n     * @returns - True if the object status is complete, false otherwise.\r\n     */\r\n    get valid(): boolean {\r\n        return this._valid;\r\n    }\r\n\r\n    /**\r\n     * Increment the reference count of this object.\r\n     */\r\n    ref(): void {\r\n        assert(this.initialized, `expected object to be initialized in order to be referenced`);\r\n        ++this._referenceCount;\r\n    }\r\n\r\n    /**\r\n     * Decrement the reference count of this object.\r\n     */\r\n    unref(): void {\r\n        assert(this._referenceCount > 0, `expected object to be referenced in order to decrease its reference count`);\r\n        --this._referenceCount;\r\n    }\r\n\r\n}\r\n","\r\nimport { vec2 } from 'gl-matrix';\r\n\r\nimport { Camera } from './camera';\r\n\r\n\r\nexport abstract class CameraModifier {\r\n\r\n    /** @see {@link camera} */\r\n    protected _camera: Camera | undefined = undefined;\r\n\r\n    /**\r\n     * Copy of a camera for ongoing camera modifications based on previous/initial camera settings.\r\n     */\r\n    protected _reference = new Camera();\r\n\r\n    /**\r\n     * Reference to the initial point starting the camera modification.\r\n     */\r\n    protected _initialPoint: vec2;\r\n\r\n    /**\r\n     * Reference to the current point updating the camera modification.\r\n     */\r\n    protected _currentPoint: vec2;\r\n\r\n\r\n    /**\r\n     * Should apply all previously calculated transformations to the camera set. Note that this does not invalidate the\r\n     * rendering. Invalidation of rendering is done by the event handler (triggering a rendering update which in turn\r\n     * checks if the camera was altered, and if so, redraws).\r\n     */\r\n    abstract update(): void;\r\n\r\n\r\n    /**\r\n     * The camera that is to be modified in response to various events.\r\n     */\r\n    set camera(camera: Camera | undefined) {\r\n        if (this._camera === camera) {\r\n            return;\r\n        }\r\n        this._camera = camera;\r\n        if (camera === undefined) {\r\n            return;\r\n        }\r\n        Object.assign(this._reference, camera);\r\n        this.update();\r\n    }\r\n\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","\r\nimport { assert } from './auxiliaries';\r\n\r\n\r\nimport { Buffer } from './buffer';\r\nimport { Context } from './context';\r\nimport { Geometry } from './geometry';\r\nimport { Initializable } from './initializable';\r\n\r\n\r\n/**\r\n * Geometry for a viewport/screen-filling triangle. The geometry creates triangle vertices, associated to\r\n * a vertex array object (from geometry base class), and provides a specialized draw call for rendering. It is intended\r\n * for, e.g., viewport/screen-filling rendering in post-processing. The vertices can be used directly as normalized\r\n * device space (NDC) coordinates, e.g., by using the following vertex shader snippet:\r\n * ```\r\n * #if __VERSION__ == 100\r\n *     attribute vec2 a_vertex;\r\n * #else\r\n *     layout(location = 0) in vec2 a_vertex;\r\n * #endif\r\n *\r\n * ...\r\n *\r\n * v_uv = a_vertex * 0.5 + 0.5;\r\n * gl_Position = vec4(a_vertex, 0.0, 1.0);\r\n * ```\r\n */\r\nexport class NdcFillingTriangle extends Geometry {\r\n\r\n    /**\r\n     * 2───────┬ ----- 1\r\n     * │       │    /\r\n     * │       │ /\r\n     * ├───────┘\r\n     * |     /\r\n     * |  /\r\n     * 0\r\n     */\r\n    protected static readonly VERTICES = new Float32Array(\r\n        [-1.0, -3.0, 3.0, 1.0, -1.0, 1.0]);\r\n\r\n    /** @see {@link aVertex} */\r\n    protected _aVertex: GLuint;\r\n\r\n\r\n    /**\r\n     * Object constructor, requires a context and an identifier.\r\n     * @param context - Valid context to create the object for.\r\n     * @param identifier - Meaningful name for identification of this instance.\r\n     */\r\n    constructor(context: Context, identifier?: string) {\r\n        super(context, identifier);\r\n\r\n        /* Generate identifier from constructor name if none given. */\r\n        identifier = identifier !== undefined && identifier !== `` ? identifier : this.constructor.name;\r\n\r\n        const vertexVBO = new Buffer(context, identifier + 'VBO');\r\n        this._buffers.push(vertexVBO);\r\n    }\r\n\r\n\r\n    /**\r\n     * Binds the vertex buffer object (VBO) to an attribute binding point of a given, pre-defined index.\r\n     */\r\n    protected bindBuffers(indices: Array<GLuint>): void {\r\n        /* Please note the implicit bind in attribEnable */\r\n        this._buffers[0].attribEnable(indices[0], 2, this.context.gl.FLOAT, false, 0, 0, true, false);\r\n        this._aVertex = indices[0];\r\n    }\r\n\r\n    /**\r\n     * Unbinds the vertex buffer object (VBO) and disables the binding point.\r\n     */\r\n    protected unbindBuffers(indices: Array<GLuint>): void {\r\n        /* Please note the implicit unbind in attribEnable is skipped */\r\n        this._buffers[0].attribDisable(indices[0], true, true);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates the vertex buffer object (VBO) and creates and initializes the buffer's data store.\r\n     * @param aVertex - Attribute binding point for vertices.\r\n     */\r\n    initialize(aVertex: GLuint): boolean {\r\n        const gl = this.context.gl;\r\n        const valid = super.initialize([gl.ARRAY_BUFFER], [aVertex]);\r\n\r\n        assert(this._buffers[0] !== undefined && this._buffers[0].object instanceof WebGLBuffer,\r\n            `expected valid WebGLBuffer`);\r\n\r\n        this._buffers[0].data(NdcFillingTriangle.VERTICES, gl.STATIC_DRAW);\r\n\r\n        return valid;\r\n    }\r\n\r\n    /**\r\n     * Specifies/invokes the draw of this screen-aligned triangle.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    draw(): void {\r\n        const gl = this.context.gl;\r\n        gl.drawArrays(gl.TRIANGLES, 0, 3);\r\n    }\r\n\r\n\r\n    /**\r\n     * Attribute location this geometries vertices are bound to.\r\n     */\r\n    get aVertex(): GLint {\r\n        return this._aVertex;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, log, LogLevel } from './auxiliaries';\r\n\r\nimport { Context } from './context';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * WebGL shader wrapper encapsulating shader creation, compilation, and deletion. A shader can be attached to multiple\r\n * Programs for linking, and can be deleted if detached from all (linked) programs.\r\n *\r\n * ```\r\n * var frag = new gloperate.Shader(context, context.gl.FRAGMENT_SHADER, 'EmptyFragmentShader');\r\n * var vert = new gloperate.Shader(context, context.gl.VERTEX_SHADER, 'EmptyVertexShader');\r\n * vert.initialize('void main() { }');\r\n * frag.initialize('void main() { }');\r\n *\r\n * var prog = new gloperate.Program(context, 'EmptyProgram');\r\n * prog.initialize([frag, vert]);\r\n * ```\r\n */\r\nexport class Shader extends AbstractObject<WebGLShader> {\r\n\r\n    /** @see {@link type} */\r\n    protected _type: GLenum;\r\n\r\n    /**\r\n     * Object constructor, requires a context and a valid identifier.\r\n     * @param context - Valid context to create the object for.\r\n     * @param type - Either GL_VERTEX_SHADER or GL_FRAGMENT_SHADER.\r\n     * @param identifier - Meaningful name for identification of this instance.\r\n     */\r\n    constructor(context: Context, type: GLenum, identifier?: string) {\r\n        const gl = context.gl;\r\n        if (identifier === undefined) {\r\n            switch (type) {\r\n                case context.gl.FRAGMENT_SHADER:\r\n                    identifier = 'FragmentShader';\r\n                    break;\r\n                case context.gl.VERTEX_SHADER:\r\n                    identifier = 'VertexShader';\r\n                    break;\r\n                default:\r\n                    assert(false, `expected either a FRAGMENT_SHADER (${gl.FRAGMENT_SHADER}) ` +\r\n                        `or a VERTEX_SHADER (${gl.VERTEX_SHADER}), given ${type}`);\r\n            }\r\n        }\r\n        super(context, identifier);\r\n        this._type = type;\r\n    }\r\n\r\n    /**\r\n     * Creates a shader, sets the shader source, and compiles the shader. If the shader source cannot be compiled, the\r\n     * identifier and an info log are logged to console and the shader object is deleted. Note that a '#version 300 es'\r\n     * is added in case the shader source is compiled in a WebGL2 context.\r\n     * @param source - Shader source.\r\n     * @returns - Either a new shader or undefined if compilation failed.\r\n     */\r\n    protected create(source: string): WebGLShader | undefined {\r\n        const gl = this._context.gl;\r\n        this._object = gl.createShader(this._type);\r\n        assert(this._object instanceof WebGLShader, `expected WebGLShader object to be created`);\r\n\r\n        if (this._context.isWebGL2) {\r\n            source = '#version 300 es\\n' + source;\r\n        }\r\n\r\n        gl.shaderSource(this._object, source);\r\n        gl.compileShader(this._object);\r\n\r\n        if (!gl.getShaderParameter(this._object, gl.COMPILE_STATUS)) {\r\n            const infoLog: string = gl.getShaderInfoLog(this._object);\r\n            log(LogLevel.Dev, `compilation of shader '${this._identifier}' failed: ${infoLog}`);\r\n\r\n            this.delete();\r\n            return undefined;\r\n        }\r\n\r\n        this._valid = gl.isShader(this._object);\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the shader object. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object !== undefined, `expected WebGLShader object`);\r\n        this._context.gl.deleteShader(this._object);\r\n        this._object = undefined;\r\n        this._valid = false;\r\n    }\r\n\r\n    /**\r\n     * Either VERTEX_SHADER or FRAGMENT_SHADER.\r\n     */\r\n    get type() {\r\n        this.assertInitialized();\r\n        return this._type;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, log, logIf, LogLevel } from './auxiliaries';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\nimport { Shader } from './shader';\r\n\r\n\r\n/**\r\n * WebGL Program wrapper encapsulating program creation, shader attachment, linking, binding, as well as attribute and\r\n * uniform location retrieval. A program is intended to be used as follows:\r\n *\r\n * ```\r\n * this.program.initialize(\r\n *  [('screenaligned.vert', require('../shaders/screenaligned.vert'))],\r\n *  [('blit.frag', require('../shaders/blit.frag'))]);\r\n *\r\n * this.a_vertex = this.program.attribute('a_vertex');\r\n * const u_texture = this.program.uniform('u_texture');\r\n *\r\n * this.program.bind();\r\n * gl.uniform1i(u_texture, 0);\r\n * // ... draw\r\n * this.program.unbind();\r\n * ```\r\n */\r\nexport class Program extends AbstractObject<WebGLProgram> implements Bindable {\r\n\r\n    /**\r\n     * Default program, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_PROGRAM = undefined;\r\n\r\n\r\n    /**\r\n     * Attaches and references all given shaders. Attach is expected to be called once within creation of a Program.\r\n     * Shaders that are not initialized will be skipped/not attached.\r\n     * @param shaders - All shaders to be attached to the program for linking.\r\n     * @returns - True if attaching all shaders and linking succeeded, false otherwise.\r\n     */\r\n    protected attach(shaders: Array<Shader>): boolean {\r\n        assert(this._object !== undefined, `expected a WebGLProgram object`);\r\n        const gl = this._context.gl;\r\n\r\n        for (const shader of shaders) {\r\n            if (!shader.initialized) {\r\n                log(LogLevel.Dev, `shader '${shader.identifier}' not initialized.`);\r\n                continue;\r\n            }\r\n            gl.attachShader(this._object, shader.object);\r\n            shader.ref();\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Links the program with all its already attached shaders. If linking fails, a developer log with additional\r\n     * information is provided.\r\n     * @returns - True if linking the program succeeded, false otherwise.\r\n     */\r\n    protected link(): boolean {\r\n        assert(this._object !== undefined, `expected WebGLProgram object`);\r\n        const gl = this._context.gl;\r\n\r\n        gl.linkProgram(this._object);\r\n\r\n        if (!gl.getProgramParameter(this._object, gl.LINK_STATUS)) {\r\n            const infoLog: string = gl.getProgramInfoLog(this._object);\r\n            log(LogLevel.Dev, `linking of program '${this._identifier}' failed: '${infoLog}'`);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Detaches all shaders from the program. For now, expected to be called after successful linking/program creation.\r\n     * @param shaders - Shaders that are to be deleted.\r\n     */\r\n    protected detach(shaders: Array<Shader>): void {\r\n        assert(this._object !== undefined, `expected WebGLProgram object`);\r\n        const gl = this._context.gl;\r\n\r\n        for (const shader of shaders) {\r\n            assert(shader.initialized, `expected shader '${shader.identifier}' to be initialized`);\r\n            gl.detachShader(this._object, shader.object);\r\n            shader.unref();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a WebGLProgram object and attaches, and references all shaders to it. The program is then linked. All\r\n     * shaders have to be initialized in order to be attached and at least on vertex and one fragment shader has to be\r\n     * present.\r\n     * @param shaders - Vertex and fragment shaders that are to be attached to the program.\r\n     * @returns - Either a new program or undefined if linking failed or one of the shaders is invalid/not compiled.\r\n     */\r\n    protected create(shaders: Array<Shader>): WebGLProgram | undefined {\r\n        const gl = this._context.gl;\r\n\r\n        let numVertShaders = 0;\r\n        let numFragShaders = 0;\r\n\r\n        for (const shader of shaders) {\r\n            switch (shader.type) {\r\n                case gl.VERTEX_SHADER:\r\n                    ++numVertShaders;\r\n                    break;\r\n                case gl.FRAGMENT_SHADER:\r\n                    ++numFragShaders;\r\n                    break;\r\n                default:\r\n                    assert(false, `Unknown shader type detected.`);\r\n                    break;\r\n            }\r\n        }\r\n        logIf(numVertShaders < 1, LogLevel.Dev, `at least one vertex shader is expected`);\r\n        logIf(numFragShaders < 1, LogLevel.Dev, `at least one fragment shader is expected`);\r\n        if (numVertShaders < 1 || numFragShaders < 1) {\r\n            return undefined;\r\n        }\r\n\r\n        this._object = gl.createProgram();\r\n        assert(this._object instanceof WebGLProgram, `expected WebGLProgram object to be created`);\r\n\r\n        if (!this.attach(shaders) || !this.link()) {\r\n            this.delete();\r\n            return undefined;\r\n        }\r\n        this.detach(shaders);\r\n\r\n        this._valid = gl.isProgram(this._object);\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the program object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object !== undefined, `expected WebGLProgram object`);\r\n        this._context.gl.deleteProgram(this._object);\r\n        this._object = undefined;\r\n        this._valid = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Activates this program for use.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(): void {\r\n        this._context.gl.useProgram(this._object);\r\n    }\r\n\r\n    /**\r\n     * Deactivates this/any program for use.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(): void {\r\n        this._context.gl.useProgram(Program.DEFAULT_PROGRAM);\r\n    }\r\n\r\n\r\n    /**\r\n     * Requests the location of a uniform of the program.\r\n     * @param uniform - Uniform identifier to request location of.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    uniform(uniform: string): WebGLUniformLocation {\r\n        return this._context.gl.getUniformLocation(this._object, uniform);\r\n    }\r\n\r\n    /**\r\n     * Requests the location of an attribute of the program.\r\n     * @param attribute - Attribute identifier to request location of.\r\n     * @param location - Attribute location (if WebGL2 location is used)\r\n     * @returns - Location of the attribute (or location parameter if provided).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    attribute(attribute: string, location?: GLuint): GLint {\r\n        if (this._context.isWebGL2 && location !== undefined) {\r\n            this._context.gl.bindAttribLocation(this._object, location, attribute);\r\n            return location as GLint;\r\n        } else {\r\n            return this._context.gl.getAttribLocation(this._object, attribute);\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\nimport { byteSizeOfFormat } from './formatbytesizes';\r\nimport { GLsizei2 } from './tuples';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { TexImage2DData } from './gl2facade';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * Wrapper for an WebGL 2D texture providing size accessors and requiring for bind, unbind, resize, validity, and\r\n * initialization implementations. The texture object is created on initialization and deleted on uninitialization.\r\n * After being initialized, the texture can be resized, reformated, and data can set directly or via load:\r\n * ```\r\n * const texture = new Texture2(context, 'Texture');\r\n * texture.initialize(1, 1, gl.RGB8, gl.RGB, gl.UNSIGNED_BYTE);\r\n * texture.load('/img/webgl-operate-logo.png', true)\r\n * ```\r\n */\r\nexport class Texture2 extends AbstractObject<WebGLTexture> implements Bindable {\r\n\r\n    /**\r\n     * Default texture, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_TEXTURE = undefined;\r\n\r\n    /** @see {@link width} */\r\n    protected _width: GLsizei = 0;\r\n\r\n    /** @see {@link height} */\r\n    protected _height: GLsizei = 0;\r\n\r\n    /** @see {@link internalFormat} */\r\n    protected _internalFormat: GLenum = 0;\r\n\r\n    /** @see {@link format} */\r\n    protected _format: GLenum = 0;\r\n\r\n    /** @see {@link type} */\r\n    protected _type: GLenum = 0;\r\n\r\n\r\n    /**\r\n     * Create a texture object on the GPU.\r\n     * @param width - Initial width of the texture in px.\r\n     * @param height - Initial height of the texture in px.\r\n     * @param internalFormat - Internal format of the texture object.\r\n     * @param format - Format of the texture data even though no data is passed.\r\n     * @param type - Data type of the texel data.\r\n     */\r\n    protected create(width: GLsizei, height: GLsizei, internalFormat: GLenum,\r\n        format: GLenum, type: GLenum): WebGLTexture | undefined {\r\n\r\n        assert(width > 0 && height > 0, `texture requires valid width and height of greater than zero`);\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        this._object = gl.createTexture();\r\n\r\n        this._width = width;\r\n        this._height = height;\r\n        this._internalFormat = internalFormat;\r\n        this._format = format;\r\n        this._type = type;\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, this._object);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n        gl2facade.texImage2D(gl.TEXTURE_2D, 0, this._internalFormat,\r\n            this._width, this._height, 0, this._format, this._type);\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, Texture2.DEFAULT_TEXTURE);\r\n        /* note that gl.isTexture requires the texture to be bound */\r\n        this._valid = gl.isTexture(this._object);\r\n        this.context.allocationRegister.reallocate(this._identifier, 0);\r\n\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the texture object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object instanceof WebGLTexture, `expected WebGLTexture object`);\r\n        this._context.gl.deleteTexture(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n\r\n        this._internalFormat = 0;\r\n        this._format = 0;\r\n        this._type = 0;\r\n\r\n        this._width = 0;\r\n        this._height = 0;\r\n    }\r\n\r\n    /**\r\n     * Bind the texture object to a texture unit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(unit?: GLenum): void {\r\n        const gl = this.context.gl;\r\n        if (unit) {\r\n            gl.activeTexture(unit);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D, this._object);\r\n    }\r\n\r\n    /**\r\n     * Unbind the texture object from a texture unit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(unit?: GLenum): void {\r\n        const gl = this.context.gl;\r\n        if (unit) {\r\n            gl.activeTexture(unit);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D, Texture2.DEFAULT_TEXTURE);\r\n    }\r\n\r\n    /**\r\n     * Asynchronous load of an image via URI or data URI.\r\n     * @param uri - URI linking the image that should be loaded. Data URI is also supported.\r\n     * @param crossOrigin - Enable cross origin data loading.\r\n     * @returns - Promise for handling image load status.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    load(uri: string, crossOrigin: boolean = false): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onerror = () => reject();\r\n\r\n            image.onload = () => {\r\n                this.resize(image.width, image.height);\r\n                this.data(image);\r\n                resolve();\r\n            };\r\n\r\n\r\n            if (crossOrigin) {\r\n                image.crossOrigin = 'anonymous';\r\n            }\r\n            image.src = uri;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Pass image data to the texture object.\r\n     * @param data - Texel data that will be copied into the objects data store.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    data(data: TexImage2DData, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n\r\n        gl2facade.texImage2D(gl.TEXTURE_2D, 0, this._internalFormat,\r\n            this._width, this._height, 0, this._format, this._type, data);\r\n\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n\r\n        let bytes: GLsizei = 0;\r\n        // update allocated bytes\r\n        if (data !== undefined) {\r\n\r\n            bytes = this._width * this._height * byteSizeOfFormat(this.context, this._internalFormat as GLenum);\r\n            // Fix in case of implicit float and half-float texture generation (e.g., in webgl with half_float support).\r\n            if (this._type === this.context.gl2facade.HALF_FLOAT && this._internalFormat !== this.context.gl.RGBA16F) {\r\n                bytes *= 2;\r\n            } else if (this._type === this.context.gl.FLOAT && this._internalFormat !== this.context.gl.RGBA16F) {\r\n                bytes *= 4;\r\n            }\r\n        }\r\n        this.context.allocationRegister.reallocate(this._identifier, bytes);\r\n    }\r\n\r\n    /**\r\n     * Sets the texture object's magnification and minification filter.\r\n     * @param mag - Value for the TEXTURE_MAG_FILTER parameter.\r\n     * @param min - Value for the TEXTURE_MIN_FILTER parameter.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    filter(mag: GLenum, min: GLenum, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mag);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, min);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the texture object's wrapping function for s and t coordinates.\r\n     * @param wrap_s - Value for the TEXTURE_WRAP_S parameter.\r\n     * @param wrap_t - Value for the TEXTURE_WRAP_T parameter.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    /* tslint:disable-next-line:variable-name */\r\n    wrap(wrap_s: GLenum, wrap_t: GLenum, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap_s);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap_t);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This can be used to reformat the texture image without creating a new texture object. Please note that this\r\n     * resets the texture's image data to undefined. @see {@link data} for setting new image data.\r\n     * @param internalFormat - Internal format of the texture object.\r\n     * @param format - Format of the texture data even though no data is passed.\r\n     * @param type - Data type of the texel data.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    reformat(internalFormat: GLenum, format?: GLenum, type?: GLenum,\r\n        bind: boolean = true, unbind: boolean = true): void {\r\n\r\n        if (internalFormat === this._internalFormat\r\n            && (format === undefined || format === this._format)\r\n            && (type === undefined || type === this._type)) {\r\n            return;\r\n        }\r\n        assert(internalFormat !== undefined, `valid internal format expected`);\r\n        this._internalFormat = internalFormat;\r\n\r\n        if (format) {\r\n            this._format = format;\r\n        }\r\n        if (type) {\r\n            this._type = type;\r\n        }\r\n\r\n        this.data(undefined, bind, unbind);\r\n    }\r\n\r\n    /**\r\n     * This should be used to implement efficient resize the texture.\r\n     * @param width - Targeted/new width of the texture in px.\r\n     * @param height - Targeted/new height of the texture in px.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    resize(width: GLsizei, height: GLsizei, bind: boolean = true, unbind: boolean = true): void {\r\n        if (width === this._width && height === this._height) {\r\n            return;\r\n        }\r\n        this._width = width;\r\n        this._height = height;\r\n\r\n        this.data(undefined, bind, unbind);\r\n    }\r\n\r\n    /**\r\n     * Returns the number of bytes this object approximately allocates on the GPU. The size will be zero when no\r\n     * image data was passed to the texture object.\r\n     */\r\n    get bytes(): GLsizei {\r\n        this.assertInitialized();\r\n        return this.context.allocationRegister.allocated(this._identifier);\r\n    }\r\n\r\n    /**\r\n     * Cached internal format of the texture for efficient resize. This can only be changed by re-initialization.\r\n     */\r\n    get internalFormat(): GLenum {\r\n        this.assertInitialized();\r\n        return this._internalFormat as GLenum;\r\n    }\r\n\r\n    /**\r\n     * Cached format of the data provided to the texture object for efficient resize. This is set on initialization and\r\n     * might change on data transfers.\r\n     */\r\n    get format(): GLenum {\r\n        this.assertInitialized();\r\n        return this._format as GLenum;\r\n    }\r\n\r\n    /**\r\n     * Cached type of the data provided to the texture used for efficient resize. This is set on initialization and\r\n     * might change on data transfers.\r\n     */\r\n    get type(): GLenum {\r\n        this.assertInitialized();\r\n        return this._type as GLenum;\r\n    }\r\n\r\n    /**\r\n     * The width of the texture object.\r\n     */\r\n    get width(): GLsizei {\r\n        this.assertInitialized();\r\n        return this._width;\r\n    }\r\n\r\n    /**\r\n     * The height of the texture object.\r\n     */\r\n    get height(): GLsizei {\r\n        this.assertInitialized();\r\n        return this._height;\r\n    }\r\n\r\n    /**\r\n     * Convenience getter for the 2-tuple containing width and height.\r\n     * @see {@link width}\r\n     * @see {@link heigth}\r\n     */\r\n    get size(): GLsizei2 {\r\n        return [this.width, this.height];\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, bitInBitfield, logIf, LogLevel } from './auxiliaries';\r\nimport { GLclampf4, GLsizei2 } from './tuples';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { Context } from './context';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\nimport { Renderbuffer } from './renderbuffer';\r\nimport { Texture2 } from './texture2';\r\n\r\n\r\n/**\r\n * WebGL Framebuffer base implementation providing size accessors and requiring for bind, unbind, resize, validity,\r\n * and initialization implementations.\r\n * ```\r\n * @todo add usage example\r\n * ```\r\n */\r\nexport class Framebuffer extends AbstractObject<WebGLFramebuffer> implements Bindable {\r\n\r\n    /**\r\n     * Default framebuffer, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_FRAMEBUFFER = undefined;\r\n\r\n\r\n    /**\r\n     * Access to all attached renderbuffer objects.\r\n     */\r\n    protected _buffersByAttachment = new Map<GLenum, Renderbuffer>();\r\n\r\n    /**\r\n     * Access to all attached texture objects.\r\n     */\r\n    protected _texturesByAttachment = new Map<GLenum, Texture2>();\r\n\r\n    /**\r\n     * RGBA color, depth value, or stencil value used for clearing the\r\n     * associated buffer.\r\n     */\r\n    protected _clearDepth: GLfloat;\r\n    protected _clearStencil: GLint;\r\n    protected _clearColors: Array<GLclampf4>;\r\n    /**\r\n     * Queue of all draw buffers that are to be cleared on `clear`.\r\n     */\r\n    protected _colorClearQueue = new Array<GLint>();\r\n\r\n    /** @see {@link drawBuffers} */\r\n    protected _drawBuffers = new Array<GLenum>();\r\n    protected _drawBuffersChanged = false;\r\n\r\n    /**\r\n     * Depending on the webgl version and provided bitmask, clears attachments of the framebuffer. Note that this\r\n     * function is set/unset to gl1Clear or gl2Clear on initialization/uninitialization.\r\n     * @param mask - Bitmask specifying which bits are to be cleared (and thereby which attachments).\r\n     * @param bind - Allows to skip binding the framebuffer (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the framebuffer (e.g., when binding is handled outside).\r\n     * @param colorClearQueue - allows to specify a specific queue of color attachments to be cleared. The webgl1\r\n     * implementation ignores this parameter. If no parameter is given, the webgl2 implementation clears all color\r\n     * attachments.\r\n     */\r\n    clear: ((mask: GLbitfield, bind?: boolean, unbind?: boolean, colorClearQueue?: Array<GLint>) => void);\r\n\r\n    /**\r\n     * Returns a string describing the given status of a framebuffer object.\r\n     * @param context - Context for valid GLenums.\r\n     * @param status - A framebuffer's status.\r\n     */\r\n    protected static statusString(context: Context, status: GLenum): string {\r\n        const gl = context.gl;\r\n\r\n        switch (status) {\r\n            case gl.FRAMEBUFFER_COMPLETE:\r\n                return 'the framebuffer is ready to display (COMPLETE)';\r\n\r\n            case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n                return 'the attachment types are mismatched or not all framebuffer attachment points are ' +\r\n                    'framebuffer attachment complete (INCOMPLETE_ATTACHMENT)';\r\n\r\n            case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n                return 'there is no attachment (INCOMPLETE_MISSING_ATTACHMENT)';\r\n\r\n            case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n                return 'height and width of the attachment are not the same (INCOMPLETE_DIMENSIONS)';\r\n\r\n            case gl.FRAMEBUFFER_UNSUPPORTED:\r\n                return 'the format of the attachment is not supported or if depth and stencil attachments are not ' +\r\n                    'the same renderbuffer (UNSUPPORTED)';\r\n\r\n            case gl.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:\r\n                return 'the values of gl.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are ' +\r\n                    'non-zero if the attached images are a mix of renderbuffers and textures (INCOMPLETE_MULTISAMPLE)';\r\n\r\n            default:\r\n                assert(false, `expected known framebuffer status, given ${status}`);\r\n                return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a framebuffer object on the GPU and attaches all given renderable objects (either renderbuffer or\r\n     * texture) to the framebuffer object.\r\n     * @param attachments - tuples that associate an attachment to its actual render object, either a renderbuffer or\r\n     * texture, e.g., `[ gl.COLOR_ATTACHMENT0, someTexture ]`.\r\n     */\r\n    protected create(attachments: Array<[GLenum, Renderbuffer | Texture2]>): WebGLFramebuffer | undefined {\r\n        const gl = this._context.gl;\r\n        const gl2facade = this.context.gl2facade;\r\n\r\n        this._object = gl.createFramebuffer();\r\n\r\n        // Initialize clearing.\r\n\r\n        this._clearColors = new Array<GLclampf4>(gl2facade.COLOR_ATTACHMENT_MAX - gl2facade.COLOR_ATTACHMENT0);\r\n        this._clearDepth = 1.0;\r\n        this._clearStencil = 0;\r\n\r\n        this.clear = this.context.isWebGL1 ? this.es2Clear : this.es3Clear;\r\n\r\n        // Classify color attachments in textures and renderbuffer.\r\n\r\n        for (const tuple of attachments) {\r\n            const attachment = tuple[0];\r\n            const bufferOrTexture = tuple[1];\r\n\r\n            if (bufferOrTexture instanceof Renderbuffer) {\r\n                this._buffersByAttachment.set(attachment, bufferOrTexture as Renderbuffer);\r\n            } else if (bufferOrTexture instanceof Texture2) {\r\n                this._texturesByAttachment.set(attachment, bufferOrTexture as Texture2);\r\n            }\r\n\r\n            if (attachment < gl2facade.COLOR_ATTACHMENT_MIN || attachment > gl2facade.COLOR_ATTACHMENT_MAX) {\r\n                continue;\r\n            }\r\n\r\n            // Queue color attachments for color clearing.\r\n            this._drawBuffers.push(attachment);\r\n\r\n            // Derive the draw buffer index as GLint is required for clearBuffer\r\n            const index = attachment - gl.COLOR_ATTACHMENT0;\r\n            this._colorClearQueue.push(index as GLint);\r\n            // setup default clear color (required in webgl2 or drawBuffers extension)\r\n            this._clearColors[index] = [0.0, 0.0, 0.0, 0.0];\r\n        }\r\n        this._drawBuffersChanged = true;\r\n\r\n\r\n        // Setup attachments.\r\n\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._object);\r\n\r\n        this._buffersByAttachment.forEach((buffer: Renderbuffer, attachment: GLenum) => {\r\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, buffer.object);\r\n\r\n        });\r\n        this._texturesByAttachment.forEach((texture: Texture2, attachment: GLenum) => {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, texture.object, 0);\r\n        });\r\n\r\n        if (gl2facade.drawBuffers) {\r\n            gl2facade.drawBuffers(this._drawBuffers);\r\n        }\r\n\r\n\r\n        // Check status and cache minimum renderable area.\r\n        const status: GLenum = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n        this._valid = gl.isFramebuffer(this._object) && (status === gl.FRAMEBUFFER_COMPLETE);\r\n        logIf(!this._valid, LogLevel.Dev, Framebuffer.statusString(this.context, status));\r\n\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, Framebuffer.DEFAULT_FRAMEBUFFER);\r\n\r\n        return this._object;\r\n\r\n    }\r\n\r\n    /**\r\n     * Delete the framebuffer object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object instanceof WebGLFramebuffer, `expected WebGLFramebuffer object`);\r\n        this.context.gl.deleteFramebuffer(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * WebGL1 implementation for clearing framebuffer attachments.\r\n     * @param mask - A GLbitfield bitwise OR mask that indicates the buffers to be cleared.\r\n     * @param bind - Allows to skip binding the framebuffer (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the framebuffer (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    protected es2Clear(mask: GLbitfield, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        const clearDepth = bitInBitfield(mask, gl.DEPTH_BUFFER_BIT);\r\n        const clearStencil = bitInBitfield(mask, gl.STENCIL_BUFFER_BIT);\r\n        const clearColor = bitInBitfield(mask, gl.COLOR_BUFFER_BIT);\r\n\r\n        if (!clearColor && !clearDepth && !clearStencil) {\r\n            return;\r\n        }\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n\r\n        if (clearColor && this._clearColors[0] !== undefined) {\r\n            const color = this._clearColors[0];\r\n            gl.clearColor(color[0], color[1], color[2], color[3]);\r\n        }\r\n        if (clearDepth && this._clearDepth !== undefined) {\r\n            gl.clearDepth(this._clearDepth);\r\n        }\r\n        if (clearStencil && this._clearStencil !== undefined) {\r\n            gl.clearStencil(this._clearStencil);\r\n        }\r\n\r\n        gl.clear(mask);\r\n\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * WebGL2 implementation for clearing framebuffer attachments.\r\n     * @param mask - A GLbitfield bitwise OR mask that indicates the buffers to be cleared.\r\n     * @param bind - Allows to skip binding the framebuffer (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the framebuffer (e.g., when binding is handled outside).\r\n     * @param colorClearQueue - Allows to specify a specific queue of color attachments to be cleared. If no\r\n     * parameter is given, the webgl2 implementation clears all color attachments.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    protected es3Clear(mask: GLbitfield, bind: boolean = true, unbind: boolean = true,\r\n        colorClearQueue?: Array<GLint>): void {\r\n\r\n        const gl = this.context.gl;\r\n\r\n        const clearDepth = bitInBitfield(mask, gl.DEPTH_BUFFER_BIT);\r\n        const clearStencil = bitInBitfield(mask, gl.STENCIL_BUFFER_BIT);\r\n        const clearColor = bitInBitfield(mask, gl.COLOR_BUFFER_BIT);\r\n\r\n        if (!clearColor && !clearDepth && !clearStencil) {\r\n            return;\r\n        }\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n\r\n        if (clearColor) {\r\n            // Multiple color attachments either by WebGL2 or WEBGL_draw_buffers can be expected.\r\n            for (const drawBuffer of colorClearQueue ? colorClearQueue : this._colorClearQueue) {\r\n                gl.clearBufferfv(gl.COLOR, drawBuffer, this._clearColors[drawBuffer]);\r\n            }\r\n        }\r\n\r\n        if (clearDepth && clearStencil) {\r\n            /**\r\n             * Unfortunately, the following code doesn't work, on Intel HD, -> fallback to WebGL 1 interface for\r\n             * clearing depth and stencil.\r\n             *\r\n             * gl.clearBufferfi(gl.DEPTH_STENCIL, 0, this._clearDepth, this._clearStencil);\r\n             */\r\n            gl.clearStencil(this._clearStencil);\r\n            gl.clearDepth(this._clearDepth);\r\n            gl.clear(gl.STENCIL_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n        } else if (clearDepth) {\r\n            gl.clearBufferfv(gl.DEPTH, 0, [this._clearDepth]);\r\n\r\n        } else if (clearStencil) {\r\n            /**\r\n             * Unfortunately, the following code doesn't work, at least in Chrome, -> fallback to WebGL 1 interface\r\n             * for clearing depth and stencil.\r\n             *\r\n             * gl.clearBufferiv(gl.STENCIL, 0, [this._clearStencil]);\r\n             */\r\n            gl.clearStencil(this._clearStencil);\r\n            gl.clear(gl.STENCIL_BUFFER_BIT);\r\n        }\r\n\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param attachment -\r\n     */\r\n    protected hasAttachment(attachment: GLenum): boolean {\r\n        return this._texturesByAttachment.has(attachment) || this._buffersByAttachment.has(attachment);\r\n    }\r\n\r\n\r\n    /**\r\n     * Binds the framebuffer object as framebuffer to the provided target.\r\n     * @param target - Specifying the binding point (target).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(target: GLenum = this.context.gl.FRAMEBUFFER): void {\r\n        this.context.gl.bindFramebuffer(target, this._object);\r\n\r\n        if (this._drawBuffersChanged && this.context.gl2facade.drawBuffers) {\r\n            this.context.gl2facade.drawBuffers(this._drawBuffers);\r\n            this._drawBuffersChanged = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds the default back buffer as framebuffer to the provided target.\r\n     * @param target - Specifying the binding point (target).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(target: GLenum = this.context.gl.FRAMEBUFFER): void {\r\n        this.context.gl.bindFramebuffer(target, Framebuffer.DEFAULT_FRAMEBUFFER);\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets the clear color used for clearing a draw buffer. In order to have transparency working, the canvas needs\r\n     * to have the alpha  attribute enabled. This stage also supports premultiplied alpha, which is applied\r\n     * automatically when the context's `premultipliedAlpha` attribute is set.\r\n     * @param color - RGBA clear color.\r\n     * @param drawBuffer - The draw buffer index. If no index is provided, the color will be applied to all buffers.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    clearColor(color: GLclampf4, drawBuffer?: GLint): void {\r\n        assert(drawBuffer === undefined || drawBuffer === 0 || this.context.isWebGL2 ||\r\n            this.context.supportsDrawBuffers, `WebGL2 context expected for clearing multiple color attachments.`);\r\n\r\n        const alphaIssue: boolean = color[3] < 1.0 && !this.context.alpha;\r\n        logIf(alphaIssue, LogLevel.Dev, `context has alpha disabled, clear color alpha is ignored`);\r\n\r\n        const color2: GLclampf4 = [color[0], color[1], color[2], alphaIssue ? 1.0 : color[3]];\r\n\r\n        if (this.context.premultipliedAlpha && !alphaIssue) {\r\n            // premultiply alpha\r\n            color2[0] *= color2[3];\r\n            color2[1] *= color2[3];\r\n            color2[2] *= color2[3];\r\n        }\r\n\r\n        if (drawBuffer) {\r\n            this._clearColors[drawBuffer] = color2;\r\n        } else {\r\n            for (let i = 0; i < this._clearColors.length; ++i) {\r\n                this._clearColors[i] = color2;\r\n            }\r\n        }\r\n    }\r\n\r\n    @Initializable.assert_initialized()\r\n    clearDepth(depth: GLfloat): void {\r\n        this._clearDepth = depth;\r\n    }\r\n\r\n    @Initializable.assert_initialized()\r\n    clearStencil(stencil: GLint): void {\r\n        this._clearStencil = stencil;\r\n    }\r\n\r\n\r\n    /**\r\n     * Access to attached textures, identified by a valid framebuffer attachment.\r\n     * @param attachment - The attachment to request the texture object of.\r\n     * @returns - A texture object if one exists for the given attachment, otherwise undefined.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    texture(attachment: GLenum): Texture2 | undefined {\r\n        return this._texturesByAttachment.get(attachment);\r\n    }\r\n\r\n    /**\r\n     * Forwards a resize to all attachments, renderbuffers and textures.\r\n     * @param width - Targeted/new width for all attachments in px.\r\n     * @param height - Targeted/new height for all attachments in px.\r\n     * @param bind - Allows to skip binding the specific attachment (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the specific attachment (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    resize(width: GLsizei, height: GLsizei, bind: boolean = true, unbind: boolean = true): void {\r\n        this._buffersByAttachment.forEach((buffer: Renderbuffer) => {\r\n            buffer.resize(width, height, bind, unbind);\r\n        });\r\n        this._texturesByAttachment.forEach((texture: Texture2) => {\r\n            texture.resize(width, height, bind, unbind);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Readonly access to the framebuffer width in pixel. If the width of the attachments are not all identical,\r\n     * the minimal width as the renderable width of this framebuffer is returned.\r\n     * @returns - The minimal width of the renderable width over all attachments.\r\n     */\r\n    get width(): GLsizei {\r\n        this.assertInitialized();\r\n\r\n        let width: GLsizei = NaN;\r\n        this._buffersByAttachment.forEach((buffer: Renderbuffer) => {\r\n            if (isNaN(width) || buffer.width < width) {\r\n                width = buffer.width;\r\n            }\r\n        });\r\n        this._texturesByAttachment.forEach((texture: Texture2) => {\r\n            if (isNaN(width) || texture.width < width) {\r\n                width = texture.width;\r\n            }\r\n        });\r\n        return width;\r\n    }\r\n\r\n    /**\r\n     * Readonly access to the framebuffer height in pixel. If the height of the attachments are not all identical,\r\n     * the minimal height as the renderable height of this framebuffer is returned.\r\n     * @returns - The minimal height of the renderable height over all attachments.\r\n     */\r\n    get height(): GLsizei {\r\n        this.assertInitialized();\r\n\r\n        let height: GLsizei = NaN;\r\n        this._buffersByAttachment.forEach((buffer: Renderbuffer) => {\r\n            if (isNaN(height) || buffer.height < height) {\r\n                height = buffer.height;\r\n            }\r\n        });\r\n        this._texturesByAttachment.forEach((texture: Texture2) => {\r\n            if (isNaN(height) || texture.height < height) {\r\n                height = texture.height;\r\n            }\r\n        });\r\n        return height;\r\n    }\r\n\r\n    /**\r\n     * Convenience getter for the 2-tuple containing the texture's width and height.\r\n     * @see {@link width}\r\n     * @see {@link heigth}\r\n     */\r\n    get size(): GLsizei2 {\r\n        return [this.width, this.height];\r\n    }\r\n\r\n\r\n    /**\r\n     * Set one or multiple draw buffers.\r\n     * @param attachments - Array of attachment identifier (e.g., gl.COLOR_ATTACHMENT0).\r\n     */\r\n    set drawBuffers(attachments: Array<GLenum>) {\r\n        this.assertInitialized();\r\n        const gl2facade = this.context.gl2facade;\r\n\r\n        for (const attachment of attachments) {\r\n            assert(this.hasAttachment(attachment), `valid attachment expected for draw buffer, given ${attachment}`);\r\n            assert(attachment >= gl2facade.COLOR_ATTACHMENT_MIN && attachment <= gl2facade.COLOR_ATTACHMENT_MAX,\r\n                `color attachment expected for draw buffer, given ${attachment}`);\r\n            this._drawBuffersChanged = this._drawBuffersChanged || this._drawBuffers.indexOf(attachment) === -1;\r\n        }\r\n        this._drawBuffersChanged = this._drawBuffersChanged || attachments.length !== this._drawBuffers.length;\r\n\r\n        if (this._drawBuffersChanged) {\r\n            this._drawBuffers = attachments;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Used to remember which attachments are available as potential draw buffers.\r\n     */\r\n    get drawBuffers(): Array<GLenum> {\r\n        this.assertInitialized();\r\n        return this._drawBuffers;\r\n    }\r\n\r\n}\r\n","\r\nimport { vec2, vec3, vec4 } from 'gl-matrix';\r\nimport { clamp, clamp2, clamp3, clamp4 } from './gl-matrix-extensions';\r\n\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\n\r\n\r\nnamespace tuples {\r\n\r\n    /**\r\n     * Auxiliary 2-tuple of GLsizei values.\r\n     */\r\n    export type GLsizei2 = [GLsizei, GLsizei];\r\n\r\n    /**\r\n     * Auxiliary 3-tuple of GLsizei values.\r\n     */\r\n    export type GLsizei3 = [GLsizei, GLsizei, GLsizei];\r\n\r\n    /**\r\n     * Auxiliary 4-tuple of GLsizei values.\r\n     */\r\n    export type GLsizei4 = [GLsizei, GLsizei, GLsizei, GLsizei];\r\n\r\n\r\n    /**\r\n     * Auxiliary 2-tuple of GLfloat values.\r\n     */\r\n    export type GLfloat2 = [GLfloat, GLfloat];\r\n\r\n    /**\r\n     * Auxiliary 3-tuple of GLfloat values.\r\n     */\r\n    export type GLfloat3 = [GLfloat, GLfloat, GLfloat];\r\n\r\n    /**\r\n     * Auxiliary 4-tuple of GLfloat values.\r\n     */\r\n    export type GLfloat4 = [GLfloat, GLfloat, GLfloat, GLfloat];\r\n\r\n\r\n    /**\r\n     * Auxiliary 3-tuple of GLclampf values.\r\n     */\r\n    export type GLclampf2 = [GLclampf, GLclampf];\r\n\r\n    /**\r\n     * Auxiliary 3-tuple of GLclampf values.\r\n     */\r\n    export type GLclampf3 = [GLclampf, GLclampf, GLclampf];\r\n\r\n    /**\r\n     * Auxiliary 4-tuple of GLclampf values.\r\n     */\r\n    export type GLclampf4 = [GLclampf, GLclampf, GLclampf, GLclampf];\r\n\r\n    /**\r\n     * Auxiliary 5-tuple of GLclampf values.\r\n     */\r\n    export type GLclampf5 = [GLclampf, GLclampf, GLclampf, GLclampf, GLclampf];\r\n\r\n    /**\r\n     * Creates a tuple from a array buffer of the same size.\r\n     * @param buffer - Array of two float32 values.\r\n     * @returns - 2-tuple of specified type (GLsizei, GLfloat, or GLclampf).\r\n     */\r\n    export function tuple2<T extends GLsizei | GLclampf | GLfloat>(buffer: Float32Array): [T, T] {\r\n        assert(buffer.length === 2, `expected length of buffer to be 2, given ${buffer.length}`);\r\n        return [buffer[0] as T, buffer[1] as T];\r\n    }\r\n\r\n    /**\r\n     * Creates a tuple from a array buffer of the same size.\r\n     * @param buffer - Array of three float32 values.\r\n     * @returns - 3-tuple of specified type (GLsizei, GLfloat, or GLclampf).\r\n     */\r\n    export function tuple3<T extends GLsizei | GLclampf | GLfloat>(buffer: Float32Array): [T, T, T] {\r\n        assert(buffer.length === 3, `expected length of buffer to be 3, given ${buffer.length}`);\r\n        return [buffer[0] as T, buffer[1] as T, buffer[2] as T];\r\n    }\r\n\r\n    /**\r\n     * Creates a tuple from a array buffer of the same size.\r\n     * @param buffer - Array of four float32 values.\r\n     * @returns - 4-tuple of specified type (GLsizei, GLfloat, or GLclampf).\r\n     */\r\n    export function tuple4<T extends GLsizei | GLclampf | GLfloat>(buffer: Float32Array): [T, T, T, T] {\r\n        assert(buffer.length === 4, `expected length of buffer to be 4, given ${buffer.length}`);\r\n        return [buffer[0] as T, buffer[1] as T, buffer[2] as T, buffer[3] as T];\r\n    }\r\n\r\n\r\n    /**\r\n     * Clamps a single GLclampf/GLfloat value to the range [0.0, 1.0]. If clamping is necessary, a user-level message\r\n     * will be logged to console.\r\n     * @param value - Single GLclampf/GLfloat value to clamp to range [0.0, 1.0].\r\n     * @param semantic - String describing the value's semantic, used for the user-level log message.\r\n     * @returns - Clamped value.\r\n     */\r\n    export function clampf(value: GLclampf | GLfloat, semantic?: string): GLclampf | GLfloat {\r\n        const valueV1 = clamp(value, 0.0, 1.0);\r\n        logIf(semantic !== undefined && value < 0.0 || value > 1.0, LogLevel.User,\r\n            `${semantic} clamped to [${valueV1}], given [${value}]`);\r\n        return valueV1;\r\n    }\r\n\r\n    /**\r\n     * Clamps each GLclampf/GLfloat value of a 2-tuple to the range [0.0, 1.0]. If clamping is necessary, a user-level\r\n     * message will be logged to console.\r\n     * @param tuple - 2-tuple of GLclampf/GLfloat values, each to be clamped to range [0.0, 1.0].\r\n     * @param semantic - String describing the tuple's semantic, used for the user-level log message.\r\n     * @returns - Clamped tuple.\r\n     */\r\n    export function clampf2(tuple: GLclampf2 | GLfloat2, semantic?: string): GLclampf2 | GLfloat2 {\r\n        const tupleV2: vec2 = vec2.fromValues(tuple[0], tuple[1]);\r\n        if (tuple[0] < 0.0 || tuple[0] > 1.0 || tuple[1] < 0.0 || tuple[1] > 1.0) {\r\n            clamp2(tupleV2, tupleV2, vec2.fromValues(0.0, 0.0), vec2.fromValues(1.0, 1.0));\r\n            logIf(semantic !== undefined, LogLevel.User, `${semantic} clamped to [${tupleV2}], given [${tuple}]`);\r\n        }\r\n        return tuple2<typeof tuple[0]>(tupleV2);\r\n    }\r\n\r\n    /**\r\n     * Clamps each GLclampf/GLfloat value of a 3-tuple to the range [0.0, 1.0]. If clamping is necessary, a user-level\r\n     * message will be logged to console.\r\n     * @param tuple - 3-tuple of GLclampf/GLfloat values, each to be clamped to range [0.0, 1.0].\r\n     * @param semantic - String describing the tuple's semantic, used for the user-level log message.\r\n     * @returns - Clamped tuple.\r\n     */\r\n    export function clampf3(tuple: GLclampf3 | GLfloat3, semantic?: string): GLclampf3 | GLfloat3 {\r\n        const tupleV3: vec3 = vec3.fromValues(tuple[0], tuple[1], tuple[2]);\r\n        if (tuple[0] < 0.0 || tuple[0] > 1.0 || tuple[1] < 0.0 || tuple[1] > 1.0 || tuple[2] < 0.0 || tuple[2] > 1.0) {\r\n            clamp3(tupleV3, tupleV3, vec3.fromValues(0.0, 0.0, 0.0), vec3.fromValues(1.0, 1.0, 1.0));\r\n            logIf(semantic !== undefined, LogLevel.User, `${semantic} clamped to [${tupleV3}], given [${tuple}]`);\r\n        }\r\n        return tuple3<typeof tuple[0]>(tupleV3);\r\n    }\r\n\r\n    /**\r\n     * Clamps each GLclampf/GLfloat value of a 4-tuple to the range [0.0, 1.0]. If clamping is necessary, a user-level\r\n     * message will be logged to console.\r\n     * @param tuple - 4-tuple of GLclampf/GLfloat values, each to be clamped to range [0.0, 1.0].\r\n     * @param semantic - String describing the tuple's semantic, used for the user-level log message.\r\n     * @returns - Clamped tuple.\r\n     */\r\n    export function clampf4(tuple: GLclampf4 | GLfloat4, semantic?: string): GLclampf4 | GLfloat4 {\r\n        const tupleV4: vec4 = vec4.fromValues(tuple[0], tuple[1], tuple[2], tuple[3]);\r\n        if (tuple[0] < 0.0 || tuple[0] > 1.0 || tuple[1] < 0.0 || tuple[1] > 1.0 ||\r\n            tuple[2] < 0.0 || tuple[2] > 1.0 || tuple[3] < 0.0 || tuple[3] > 1.0) {\r\n            clamp4(tupleV4, tupleV4, vec4.fromValues(0.0, 0.0, 0.0, 0.0), vec4.fromValues(1.0, 1.0, 1.0, 1.0));\r\n            logIf(semantic !== undefined, LogLevel.User, `${semantic} clamped to [${tupleV4}], given [${tuple}]`);\r\n        }\r\n        return tuple4<typeof tuple[0]>(tupleV4);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates a duplicate of a 2-tuple into another tuple.\r\n     * @param tuple - Source tuple to create duplicate of.\r\n     */\r\n    export function duplicate2<T extends GLclampf | GLfloat | GLsizei>(tuple: [T, T]): [T, T] {\r\n        return [tuple[0], tuple[1]];\r\n    }\r\n\r\n    /**\r\n     * Creates a duplicate of a 3-tuple into another tuple.\r\n     * @param tuple - Source tuple to create duplicate of.\r\n     */\r\n    export function duplicate3<T extends GLclampf | GLfloat | GLsizei>(tuple: [T, T, T]): [T, T, T] {\r\n        return [tuple[0], tuple[1], tuple[2]];\r\n    }\r\n\r\n    /**\r\n     * Creates a duplicate of a 4-tuple into another tuple.\r\n     * @param tuple - Source tuple to create duplicate of.\r\n     */\r\n    export function duplicate4<T extends GLclampf | GLfloat | GLsizei>(tuple: [T, T, T, T]): [T, T, T, T] {\r\n        return [tuple[0], tuple[1], tuple[2], tuple[3]];\r\n    }\r\n\r\n\r\n    /**\r\n     * Checks whether or not two 2-tuples have identical values.\r\n     * @param tuple0 - First 2-tuple/operand for comparison.\r\n     * @param tuple1 - Second 2-tuple/operand for comparison.\r\n     * @returns - True iff tuples are equal in all two values (in their sequence).\r\n     */\r\n    export function equals2<T extends GLclampf | GLfloat | GLsizei>(t0: [T, T], t1: [T, T]): boolean {\r\n        return t0[0] === t1[0] && t0[1] === t1[1];\r\n    }\r\n\r\n    /**\r\n     * Checks whether or not two 3-tuples have identical values.\r\n     * @param tuple0 - First 3-tuple/operand for comparison.\r\n     * @param tuple1 - Second 3-tuple/operand for comparison.\r\n     * @returns - True iff tuples are equal in all three values (in their sequence).\r\n     */\r\n    export function equals3<T extends GLclampf | GLfloat | GLsizei>(t0: [T, T, T], t1: [T, T, T]): boolean {\r\n        return t0[0] === t1[0] && t0[1] === t1[1] && t0[2] === t1[2];\r\n    }\r\n\r\n    /**\r\n     * Checks whether or not two 4-tuples have identical values.\r\n     * @param tuple0 - First 4-tuple/operand for comparison.\r\n     * @param tuple1 - Second 4-tuple/operand for comparison.\r\n     * @returns - True iff tuples are equal in all four values (in their sequence).\r\n     */\r\n    export function equals4<T extends GLclampf | GLfloat | GLsizei>(t0: [T, T, T, T], t1: [T, T, T, T]): boolean {\r\n        return t0[0] === t1[0] && t0[1] === t1[1] && t0[2] === t1[2] && t0[3] === t1[3];\r\n    }\r\n}\r\n\r\nexport = tuples;\r\n","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n#else \\r\\n    #define varying out\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    attribute vec2 a_vertex;\\r\\n#else \\r\\n    in vec2 a_vertex;\\r\\n#endif\\r\\n\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    v_uv = a_vertex * 0.5 + 0.5;\\r\\n    gl_Position = vec4(a_vertex, 0.0, 1.0);\\r\\n}\\r\\n\"","\r\nimport { Bindable } from './bindable';\r\nimport { Buffer } from './buffer';\r\nimport { Initializable } from './initializable';\r\n\r\nimport { Context } from './context';\r\nimport { VertexArray } from './vertexarray';\r\n\r\n\r\n/**\r\n * Geometry that extends Initializable and Bindable by a draw method, a getter for buffers, as well as a getter for the\r\n * vertex array object. This is used as generic interface for one or more buffer objects associated to a single vertex\r\n * array object intended for drawing (often also referred to as 'drawable').\r\n */\r\nexport abstract class Geometry extends Initializable implements Bindable {\r\n\r\n    /**\r\n     * Vertex array used for binding the rectangle's buffer(s).\r\n     */\r\n    protected _vertexArray: VertexArray;\r\n\r\n    /**\r\n     * Various buffers required for this geometry (e.g., vertex buffer).\r\n     */\r\n    protected _buffers = new Array<Buffer>();\r\n\r\n\r\n    /**\r\n     * Creates the geometry and a vertex array instance. Please note that inheritors are expected to create the buffer.\r\n     * @param context - Valid context to create the object for.\r\n     * @param identifier - Meaningful name for identification of this instances VAO and VBOs.\r\n     */\r\n    constructor(context: Context, identifier?: string) {\r\n        super();\r\n\r\n        identifier = identifier !== undefined && identifier !== `` ? identifier : this.constructor.name;\r\n        this._vertexArray = new VertexArray(context, identifier + 'VAO');\r\n    }\r\n\r\n\r\n    /**\r\n     * Binds all buffer object(s) to their associated attribute binding points (pre-defined index/indices). This\r\n     * function is passed to the initialization of this geometries vertex array object.\r\n     * @param indices - Indices passed on geometry initialization by inheritor (sequence as in buffers).\r\n     */\r\n    protected abstract bindBuffers(indices: Array<GLuint>): void;\r\n\r\n    /**\r\n     * Unbinds all buffer objects and disables their binding points. This function is passed to the uninitialization\r\n     * of this geometries vertex array object.\r\n     * @param indices - Indices passed on geometry initialization by inheritor (sequence as in buffers).\r\n     */\r\n    protected abstract unbindBuffers(indices: Array<GLuint>): void;\r\n\r\n\r\n    /**\r\n     * Initializes all buffer objects and the vertex array. Please note that implicit arguments are used in order to\r\n     * enable custom initialization signatures for inheritors.\r\n     * @param targets - Targets to initialize the buffers for.\r\n     * @param indices - Binding points that are passed to the inheritors (un)bind buffer methods.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(...args: any[]): boolean {\r\n        const targets = args[0] as Array<GLenum>;\r\n        const indices = args[1] as Array<GLuint>;\r\n\r\n        let valid = true;\r\n        for (let i = 0; i < this._buffers.length; ++i) {\r\n            valid = this._buffers[i].initialize(targets[i]) && valid;\r\n        }\r\n\r\n        this._vertexArray.initialize(() => this.bindBuffers(indices), () => this.unbindBuffers(indices));\r\n        return this._vertexArray.valid && valid;\r\n    }\r\n\r\n    /**\r\n     * Uninitialize the vertex array object and the rectangle.\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        this._vertexArray.uninitialize();\r\n        this._buffers.forEach((buffer) => buffer.uninitialize());\r\n        for (const buffer of this._buffers) {\r\n            buffer.uninitialize();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Binds the vertex array object.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(): void {\r\n        this._vertexArray.bind();\r\n    }\r\n\r\n    /**\r\n     * Unbinds the vertex array object.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(): void {\r\n        this._vertexArray.unbind();\r\n    }\r\n\r\n\r\n    abstract draw(): void;\r\n\r\n\r\n    /**\r\n     * Read-only access to the buffer(s) associated to this instances vertex array object.\r\n     */\r\n    get buffers(): Array<Buffer> {\r\n        return this._buffers;\r\n    }\r\n\r\n    /**\r\n     * Read-only access to the buffers' and vertex array's context.\r\n     */\r\n    get context(): Context {\r\n        return this._vertexArray.context;\r\n    }\r\n\r\n    /**\r\n     * Read-only access to the vertex array.\r\n     */\r\n    get vertexArray(): VertexArray {\r\n        return this._vertexArray;\r\n    }\r\n\r\n}\r\n\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { Context } from './context';\r\n\r\n\r\n/**\r\n * Provides the size in bytes of certain WebGL format enumerator. Please note that some byte sizes might vary based on\r\n * context attributes or the bound render, thus, DEPTH_COMPONENT and DEPTH_STENCIL are not covered by this function.\r\n * This function does NOT cover data types that are usually on CPU side, not GPU, e.g., UNSIGNED_BYTE,\r\n * UNSIGNED_SHORT_5_6_5, HALF_FLOAT, UNSIGNED_SHORT, FLOAT, etc. and will assert when provided with types.\r\n * @param context - The OpenGL context.\r\n * @param format - Format identifier of the target internal OpenGL data type.\r\n * @return - The size in bytes of one type instance on the GPU.\r\n */\r\nexport function byteSizeOfFormat(context: Context, format: GLenum): number {\r\n    const gl = context.gl;\r\n    const gl2facade = context.gl2facade;\r\n\r\n\r\n    const UNSIGNED_INT_24_8_WEBGL = context.supportsDepthTexture ?\r\n        context.depthTexture.UNSIGNED_INT_24_8_WEBGL : undefined;\r\n\r\n    switch (format) {\r\n        case undefined: // must be first, in case any other format is not defined\r\n            break;\r\n        default:\r\n            break;\r\n\r\n        case gl.UNSIGNED_BYTE:\r\n        case gl.UNSIGNED_SHORT_5_6_5:\r\n        case gl.UNSIGNED_SHORT_4_4_4_4:\r\n        case gl.UNSIGNED_SHORT_5_5_5_1:\r\n        case gl.UNSIGNED_SHORT:\r\n        case gl.UNSIGNED_INT:\r\n        case UNSIGNED_INT_24_8_WEBGL:\r\n        case gl.FLOAT:\r\n        case gl2facade.HALF_FLOAT:\r\n        case gl.BYTE:\r\n        case gl.UNSIGNED_SHORT:\r\n        case gl.SHORT:\r\n        case gl.UNSIGNED_INT:\r\n        case gl.INT:\r\n        case gl.HALF_FLOAT:\r\n        case gl.FLOAT:\r\n        case gl.UNSIGNED_INT_2_10_10_10_REV:\r\n        case gl.UNSIGNED_INT_10F_11F_11F_REV:\r\n        case gl.UNSIGNED_INT_5_9_9_9_REV:\r\n        case gl.UNSIGNED_INT_24_8:\r\n        case gl.FLOAT_32_UNSIGNED_INT_24_8_REV:\r\n            assert(false, `expected format instead of type ${format}`);\r\n            return 0;\r\n    }\r\n\r\n\r\n    const SRGB8_ALPHA8_EXT = context.supportsSRGB ? context.sRGB.SRGB8_ALPHA8_EXT : undefined;\r\n    const SRGB_EXT = context.supportsSRGB ? context.sRGB.SRGB_EXT : undefined;\r\n    const SRGB_ALPHA_EXT = context.supportsSRGB ? context.sRGB.SRGB_ALPHA_EXT : undefined;\r\n\r\n    const RGB32F_EXT = context.supportsColorBufferFloat ? context.colorBufferFloat.RGB32F_EXT : undefined;\r\n    const RGBA32F_EXT = context.supportsColorBufferFloat ? context.colorBufferFloat.RGBA32F_EXT : undefined;\r\n\r\n    switch (format) {\r\n        case undefined: // must be first, in case any other format is not defined\r\n        /* falls through */\r\n        default:\r\n            assert(false, `size of format ${format} is unknown`);\r\n            return 0;\r\n\r\n        case gl.ALPHA:\r\n        case gl.LUMINANCE:\r\n        case gl.R8:\r\n        case gl.R8I:\r\n        case gl.R8UI:\r\n        case gl.STENCIL_INDEX8:\r\n            return 1;\r\n\r\n        case gl.DEPTH_COMPONENT16:\r\n        case gl.LUMINANCE_ALPHA:\r\n        case gl.R16F:\r\n        case gl.R16I:\r\n        case gl.R16UI:\r\n        case gl.RG8:\r\n        case gl.RG8I:\r\n        case gl.RG8UI:\r\n        case gl.RGB565:\r\n        case gl.RGB5_A1:\r\n        case gl.RGBA4:\r\n            return 2;\r\n\r\n        case gl.DEPTH_COMPONENT24:\r\n        case gl.RGB:\r\n        case gl.RGB8:\r\n        case gl.RGB8UI:\r\n        case gl.SRGB:\r\n        case SRGB_EXT:\r\n        case gl.SRGB8:\r\n            return 3;\r\n\r\n        case gl.DEPTH_STENCIL:\r\n        case gl.DEPTH24_STENCIL8:\r\n        case gl.DEPTH_COMPONENT32F:\r\n        case gl.R11F_G11F_B10F:\r\n        case gl.R32F:\r\n        case gl.R32I:\r\n        case gl.R32UI:\r\n        case gl.RG16F:\r\n        case gl.RG16I:\r\n        case gl.RG16UI:\r\n        case gl.RGB10_A2:\r\n        case gl.RGB10_A2UI:\r\n        case gl.RGB9_E5:\r\n        case gl.RGBA:\r\n        case gl.RGBA8:\r\n        case gl.RGBA8I:\r\n        case gl.RGBA8UI:\r\n        case gl.SRGB8_ALPHA8:\r\n        case SRGB8_ALPHA8_EXT:\r\n        case gl.SRGB_ALPHA:\r\n        case SRGB_ALPHA_EXT:\r\n        case gl.SRGB_ALPHA8:\r\n        case gl.SRGB_APLHA8: // https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/texStorage2D\r\n            return 4;\r\n\r\n        case gl.DEPTH32F_STENCIL8:\r\n            return 5;\r\n\r\n        case gl.RGB16F:\r\n            return 6;\r\n\r\n        case gl.RG32F:\r\n        case gl.RG32I:\r\n        case gl.RG32UI:\r\n        case gl.RGBA16F:\r\n        case gl.RGBA16I:\r\n        case gl.RGBA16UI:\r\n            return 8;\r\n\r\n        case gl.RGB32F:\r\n        case gl.RGB32F:\r\n        case RGB32F_EXT:\r\n            return 12;\r\n\r\n        case gl.RGBA32F:\r\n        case RGBA32F_EXT:\r\n        case gl.RGBA32I:\r\n        case gl.RGBA32UI:\r\n            return 16;\r\n\r\n        case gl.DEPTH_COMPONENT:\r\n        case gl.DEPTH_STENCIL:\r\n            assert(false, `byte size of DEPTH_COMPONENT or DEPTH_STENCIL formats depends on active render buffer`);\r\n            return 0;\r\n    }\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * Wrapper around an OpenGL array or element array buffer. This buffer may be used to be attached to multiple VAOs.\r\n */\r\nexport class Buffer extends AbstractObject<WebGLBuffer> implements Bindable {\r\n\r\n    /**\r\n     * Default buffer, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_BUFFER = undefined;\r\n\r\n\r\n    /** @see {@link target} */\r\n    protected _target: GLenum | undefined = Buffer.DEFAULT_BUFFER;\r\n\r\n    /**\r\n     * Create a buffer object on the GPU.\r\n     */\r\n    protected create(target: GLenum): WebGLBuffer | undefined {\r\n        const gl = this._context.gl;\r\n\r\n        this._object = gl.createBuffer();\r\n        /* note that gl.isBuffer requires the buffer to be bound */\r\n        this._valid = this._object instanceof WebGLBuffer;\r\n\r\n        if (this._valid) {\r\n            assert(target === gl.ARRAY_BUFFER || target === gl.ELEMENT_ARRAY_BUFFER,\r\n                `either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER expected as buffer target`);\r\n            this._target = target;\r\n        }\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the buffer object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object instanceof WebGLBuffer, `expected WebGLBuffer object`);\r\n        this._context.gl.deleteBuffer(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n\r\n        this._target = Buffer.DEFAULT_BUFFER;\r\n    }\r\n\r\n    /**\r\n     * Binds the buffer object as buffer to predefined target.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(): void {\r\n        assert(this._target === this._context.gl.ARRAY_BUFFER || this._target === this._context.gl.ELEMENT_ARRAY_BUFFER,\r\n            `expected either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER as buffer target`);\r\n        this._context.gl.bindBuffer(this._target, this._object);\r\n    }\r\n\r\n    /**\r\n     * Binds null as current buffer to predefined target;\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(): void {\r\n        this.context.gl.bindBuffer(this._target, Buffer.DEFAULT_BUFFER);\r\n    }\r\n\r\n    /**\r\n     * Creates the buffer object's data store and updates the objects status.\r\n     * @param data - Data that will be copied into the objects data store.\r\n     * @param usage - Usage pattern of the data store.\r\n     * @param bind - Allows to skip binding the object (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the object (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    data(data: ArrayBufferView, usage: GLenum, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.bufferData(this._target, data, usage);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n\r\n        this._valid = gl.isBuffer(this._object) && gl.getError() === gl.NO_ERROR;\r\n        const bytes: GLsizei = this._valid ? data.byteLength : 0;\r\n        this.context.allocationRegister.reallocate(this._identifier, bytes);\r\n    }\r\n\r\n    /**\r\n     * Specifies the memory layout of the buffer for a binding point.\r\n     * @param index - Index of the vertex attribute that is to be setup and enabled.\r\n     * @param size - Number of components per vertex attribute.\r\n     * @param type - Data type of each component in the array.\r\n     * @param normalized - Whether integer data values should be normalized when being casted to a float.\r\n     * @param stride - Offset in bytes between the beginning of consecutive vertex attributes.\r\n     * @param offset - Offset in bytes of the first component in the vertex attribute array.\r\n     * @param bind - Allows to skip binding the object (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the object (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    attribEnable(index: GLuint, size: GLint, type: GLenum, normalized: GLboolean = false,\r\n        stride: GLsizei = 0, offset: GLintptr = 0, bind: boolean = true, unbind: boolean = true): void {\r\n\r\n        const gl = this.context.gl;\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\r\n        gl.enableVertexAttribArray(index);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disables a buffer binding point.\r\n     * @param index - Index of the vertex attribute that is to be disabled.\r\n     * @param bind - Allows to skip binding the object (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the object (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    attribDisable(index: GLuint, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.disableVertexAttribArray(index);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the number of bytes this object approximately allocates on the GPU.\r\n     */\r\n    get bytes() {\r\n        this.assertInitialized();\r\n        return this.context.allocationRegister.allocated(this._identifier);\r\n    }\r\n\r\n    /**\r\n     * Target to which the buffer object is bound (either GL_ARRAY_BUFFER or GL_ELEMENT_ARRAY_BUFFER).\r\n     * Readonly access to the target (as specified on initialization) the buffer will be bound to.\r\n     */\r\n    get target(): GLenum {\r\n        this.assertInitialized();\r\n        return this._target as GLenum;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\n\r\n/**\r\n * Utility class to replicate the structure of all alterable properties of a class to. This was initially designed\r\n * to be used in combination with an `alterable` decorator (but instance-based property decoration does not work\r\n * yet). For now though, this is used for explicit alterable structure replication and management.\r\n * ```\r\n * const alterable = {\r\n *     any: false,\r\n *     data: { any: false, alpha: false, beta: false },\r\n *     modifier: false };\r\n *\r\n * const altered = Object.assign(new ChangeLookup(), alterable);\r\n * altered.alter('data.beta');\r\n * if(altered.data.any) { ... }\r\n * ```\r\n */\r\nexport class ChangeLookup {\r\n\r\n    /**\r\n     * Also allow for string-based index access in TypeScript.\r\n     */\r\n    [index: string]: boolean | any;\r\n\r\n\r\n    /**\r\n     * One step of the recursive traversal of a given properties path in order to invalidate the alteration states.\r\n     * Please note, that this is design is not intended for very large structures since no caching is applied.\r\n     * @param path - Relative path w.r.t. to the given property.\r\n     * @param property - Property to continue traversal of the given relative path on.\r\n     */\r\n    protected static alter(path: string, property: any): void {\r\n\r\n        assert(property.hasOwnProperty('any'), `expected alterable object to provide 'any' key`);\r\n        property.any = true;\r\n\r\n        const names = path.split('.');\r\n        const name = names.shift() as string;\r\n\r\n        assert(name === '' || property.hasOwnProperty(name),\r\n            `expected object to have key '${name}' in order to capture alterations`);\r\n\r\n        if (name !== '' && typeof property[name] !== 'object') {\r\n            property[name] = true;\r\n            return;\r\n        }\r\n\r\n        if (name !== '' && names.length > 0) {\r\n            ChangeLookup.alter(names.join('.'), property[name]);\r\n            return;\r\n        }\r\n\r\n        const parent = name !== '' ? property[name] : property;\r\n        for (const child of Object.getOwnPropertyNames(parent)) {\r\n            if (child === 'any') {\r\n                continue;\r\n            }\r\n            ChangeLookup.alter(child, parent);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets all nested alteration states of a given parent property recursively. Children of object type are\r\n     * recursively reset. Every other child is directly set to false (including any).\r\n     * @param property - Property to reset alteration states of.\r\n     */\r\n    protected static reset(property: any): void {\r\n        for (const name of Object.getOwnPropertyNames(property)) {\r\n            if (typeof property[name] === 'object') {\r\n                ChangeLookup.reset(property[name]);\r\n                continue;\r\n            }\r\n            property[name] = false;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Alters the given key as well as the `any` element of all parent objects. For example, the key 'foo.bar' would\r\n     * cause `altered.foo.bar` and `altered.foo.any` as well as `altered.any` to be true. Note that the `altered`\r\n     * object should only be modified using this method to avoid erroneous states.\r\n     * @param path - Full object path to the altered key (keys joined using '.', e.g., 'foo.bar'). If the path is\r\n     * referring to an object, the alteration is propagated top-down to all children.\r\n     */\r\n    alter(path: string): void {\r\n        return ChangeLookup.alter(path, this);\r\n    }\r\n\r\n    /**\r\n     * Reset all alteration states to false.\r\n     */\r\n    reset(): void {\r\n        return ChangeLookup.reset(this);\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\n\r\n/**\r\n * Utility class providing simplified access to the clients pointer lock API.\r\n */\r\nexport class PointerLock {\r\n\r\n    /**\r\n     * Cached exit call of the clients specific pointer lock API.\r\n     */\r\n    protected static _exit: () => void;\r\n\r\n    /**\r\n     * Cached request call of the clients specific pointer API.\r\n     */\r\n    protected static _request: (element: HTMLElement) => void;\r\n\r\n    /**\r\n     * Cached element call returning the fullscreen element specific to the clients fullscreen API.\r\n     */\r\n    protected static _element: () => HTMLElement;\r\n\r\n\r\n    /**\r\n     * Query and cache the client specific pointer lock API.\r\n     */\r\n    protected static queryAndCacheAPI(): void {\r\n        if (PointerLock._exit !== undefined) {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Shadow global document declaration with an untyped one. This is done in order to use vendor specific\r\n         * properties without a compile error.\r\n         */\r\n        const document = window.document as any;\r\n\r\n        // Query the API to use.\r\n        const exits = [\r\n            document.exitPointerLock,\r\n            document.mozExitPointerLock,\r\n            document.webkitExitPointerLock,\r\n            undefined];\r\n\r\n        let api = 0;\r\n        for (; api < exits.length; ++api) {\r\n            if (exits[api] === undefined) {\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n\r\n        switch (api) {\r\n            case 0: // native\r\n                PointerLock._exit = () => document.exitPointerLock();\r\n                PointerLock._request = (element: HTMLElement) => element.requestPointerLock();\r\n                PointerLock._element = () => document.pointerLockElement;\r\n                break;\r\n\r\n            case 1: // mozilla\r\n                PointerLock._exit = () => document.mozCancelPointerLock();\r\n                PointerLock._request = (element: HTMLElement) => (element as any).mozRequestPointerLock();\r\n                PointerLock._element = () => document.mozPointerLockElement;\r\n                break;\r\n\r\n            case 2: // webkit\r\n                PointerLock._exit = () => document.webkitExitPointerLock();\r\n                PointerLock._request = (element: HTMLElement) => (element as any).webkitRequestPointerLock();\r\n                PointerLock._element = () => document.webkitPointerLockElement;\r\n                break;\r\n\r\n            default:\r\n                assert(false, `none of the following pointer lock apis was found: native, moz, or webkit`);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns whether or not a pointer lock element exists, indicating if pointer lock is active or not.\r\n     */\r\n    static active(element?: HTMLElement): boolean {\r\n        if (this._element === undefined) {\r\n            return false;\r\n        }\r\n        return (element !== undefined && PointerLock._element() === element) || (element === undefined &&\r\n            /* tslint:disable-next-line:no-null-keyword */\r\n            PointerLock._element() !== undefined && PointerLock._element() !== null);\r\n    }\r\n\r\n    /**\r\n     * Requests pointer lock for a given element. If another element is already in pointer lock, it is unlocked\r\n     * first. The function considers various platform specific pointer lock interfaces, i.e., native, moz, and webkit.\r\n     * @param element - Element to toggle pointer lock state of.\r\n     */\r\n    static request(element: HTMLElement, callback?: () => void): void {\r\n        if (element === undefined) {\r\n            return;\r\n        }\r\n        PointerLock.queryAndCacheAPI();\r\n\r\n        if (PointerLock.active() && PointerLock._element() !== element) {\r\n            PointerLock._exit();\r\n        }\r\n\r\n        if (!PointerLock.active()) {\r\n            PointerLock._request(element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Exit pointer lock. The function considers various platform specific pointer lock interfaces, i.e., native, moz,\r\n     * and webkit.\r\n     */\r\n    static exit(): void {\r\n        if (PointerLock._exit) {\r\n            PointerLock._exit();\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\n\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { PointerLock } from './pointerlock';\r\n\r\n\r\nexport class MouseEventProvider {\r\n\r\n    /**\r\n     * HTML canvas element within the HTML5 document to register event listeners to.\r\n     */\r\n    protected _element: HTMLCanvasElement;\r\n\r\n    /**\r\n     * Time frame for events to be buffered (windowTime in rxjs per ReplaySubject).\r\n     */\r\n    protected _timeframe: number | undefined;\r\n\r\n    protected _clickListener: { (event: MouseEvent): void };\r\n    protected _clickSubject: ReplaySubject<MouseEvent>;\r\n\r\n    protected _enterListener: { (event: MouseEvent): void };\r\n    protected _enterSubject: ReplaySubject<MouseEvent>;\r\n\r\n    protected _leaveListener: { (event: MouseEvent): void };\r\n    protected _leaveSubject: ReplaySubject<MouseEvent>;\r\n\r\n    protected _downListener: { (event: MouseEvent): void };\r\n    protected _downSubject: ReplaySubject<MouseEvent>;\r\n    protected _upListener: { (event: MouseEvent): void };\r\n    protected _upSubject: ReplaySubject<MouseEvent>;\r\n\r\n    protected _moveListener: { (event: MouseEvent): void };\r\n    protected _moveSubject: ReplaySubject<MouseEvent>;\r\n\r\n    protected _wheelListener: { (event: WheelEvent): void };\r\n    protected _wheelSubject: ReplaySubject<WheelEvent>;\r\n\r\n    /** @see {@link pointerLock} */\r\n    protected _pointerLockRequestPending = false;\r\n\r\n    constructor(element: HTMLCanvasElement, timeframe?: number) {\r\n        assert(element !== undefined, `expected valid canvas element on initialization, given ${element}`);\r\n        this._element = element;\r\n        this._timeframe = timeframe;\r\n\r\n        this._element.addEventListener('click', () => this.processPointerLockRequests());\r\n    }\r\n\r\n    /**\r\n     * The pointer lock API requires a little workaround in order to avoid something like '... not called from inside a\r\n     * short running user-generated event handler'. A click event listener is registered and whenever a pointer lock is\r\n     * requested, e.g., from an event handler (which in turn exposes this interface to, e.g., a navigation), the next\r\n     * click will result in a probably more successful pointer lock.\r\n     */\r\n    protected processPointerLockRequests(): void {\r\n        if (!this._pointerLockRequestPending) {\r\n            return;\r\n        }\r\n        PointerLock.request(this._element);\r\n    }\r\n\r\n    observable(type: MouseEventProvider.Type): Observable<MouseEvent> | Observable<WheelEvent> {\r\n        /* tslint:disable-next-line:switch-default */\r\n        switch (type) {\r\n            case MouseEventProvider.Type.Click:\r\n                return this.clickObservable;\r\n            case MouseEventProvider.Type.Enter:\r\n                return this.enterObservable;\r\n            case MouseEventProvider.Type.Leave:\r\n                return this.leaveObservable;\r\n            case MouseEventProvider.Type.Down:\r\n                return this.downObservable;\r\n            case MouseEventProvider.Type.Up:\r\n                return this.upObservable;\r\n            case MouseEventProvider.Type.Move:\r\n                return this.moveObservable;\r\n            case MouseEventProvider.Type.Wheel:\r\n                return this.wheelObservable;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable/disable pointer lock on click. If true, the next click on this event provider's canvas will invoke a\r\n     * pointer lock request on the canvas element.\r\n     */\r\n    set pointerLock(lock: boolean) {\r\n        this._pointerLockRequestPending = lock;\r\n        if (lock === false) {\r\n            this._pointerLockRequestPending = false;\r\n            PointerLock.exit();\r\n        }\r\n    }\r\n\r\n    get pointerLock(): boolean {\r\n        return PointerLock.active(this._element);\r\n    }\r\n\r\n    get clickObservable(): Observable<MouseEvent> {\r\n        if (this._clickSubject === undefined) {\r\n            this._clickSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._clickListener = (event: MouseEvent) => this._clickSubject.next(event);\r\n            this._element.onclick = this._clickListener;\r\n        }\r\n        return this._clickSubject.asObservable();\r\n    }\r\n\r\n    get enterObservable(): Observable<MouseEvent> {\r\n        if (this._enterSubject === undefined) {\r\n            this._enterSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._enterListener = (event: MouseEvent) => this._enterSubject.next(event);\r\n            this._element.onmouseenter = this._enterListener;\r\n        }\r\n        return this._enterSubject.asObservable();\r\n    }\r\n\r\n    get leaveObservable(): Observable<MouseEvent> {\r\n        if (this._leaveSubject === undefined) {\r\n            this._leaveSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._leaveListener = (event: MouseEvent) => this._leaveSubject.next(event);\r\n            this._element.onmouseleave = this._leaveListener;\r\n        }\r\n        return this._leaveSubject.asObservable();\r\n    }\r\n\r\n    get downObservable(): Observable<MouseEvent> {\r\n        if (this._downSubject === undefined) {\r\n            this._downSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._downListener = (event: MouseEvent) => this._downSubject.next(event);\r\n            this._element.onmousedown = this._downListener;\r\n        }\r\n        return this._downSubject.asObservable();\r\n    }\r\n\r\n    get upObservable(): Observable<MouseEvent> {\r\n        if (this._upSubject === undefined) {\r\n            this._upSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._upListener = (event: MouseEvent) => this._upSubject.next(event);\r\n            this._element.onmouseup = this._upListener;\r\n        }\r\n        return this._upSubject.asObservable();\r\n    }\r\n\r\n    get moveObservable(): Observable<MouseEvent> {\r\n        if (this._moveSubject === undefined) {\r\n            this._moveSubject = new ReplaySubject<MouseEvent>(undefined, this._timeframe);\r\n            this._moveListener = (event: MouseEvent) => this._moveSubject.next(event);\r\n            this._element.onmousemove = this._moveListener;\r\n        }\r\n        return this._moveSubject.asObservable();\r\n    }\r\n\r\n    get wheelObservable(): Observable<WheelEvent> {\r\n        if (this._wheelSubject === undefined) {\r\n            this._wheelSubject = new ReplaySubject<WheelEvent>(undefined, this._timeframe);\r\n            this._wheelListener = (event: WheelEvent) => this._wheelSubject.next(event);\r\n            this._element.onwheel = this._wheelListener;\r\n        }\r\n        return this._wheelSubject.asObservable();\r\n    }\r\n\r\n}\r\n\r\n\r\nexport namespace MouseEventProvider {\r\n\r\n    export enum Type { Click, Enter, Leave, Down, Up, Move, Wheel }\r\n\r\n}\r\n","\r\nimport { assert, log, logIf, LogLevel } from './auxiliaries';\r\n\r\nimport { AllocationRegister } from './allocationregister';\r\nimport { ContextMasquerade } from './contextmasquerade';\r\nimport { WEBGL1_EXTENSIONS, WEBGL2_DEFAULT_EXTENSIONS, WEBGL2_EXTENSIONS } from './extensions';\r\nimport { GL2Facade } from './gl2facade';\r\n\r\n\r\n/**\r\n * Supported OpenGL backend types.\r\n */\r\nexport enum BackendType { Invalid, WebGL1, WebGL2 }\r\n\r\n/**\r\n * The list of valid backend identifiers that can be matched to backend types.\r\n * List adopted from https://developer.mozilla.org/de/docs/Web/API/HTMLCanvasElement/getContext.\r\n */\r\nexport type BackendTypeString = 'auto' | 'webgl' | 'experimental-webgl' | 'webgl1' | 'experimental-webgl1'\r\n    | 'webgl2' | 'experimental-webgl2';\r\n\r\n\r\n/**\r\n * A controller for either a WebGLRenderingContext or WebGL2RenderingContext. It requests a context, tracks context\r\n * attributes, extensions as well as multi frame specific rendering information and a (gpu)allocation registry.\r\n *\r\n * An instance of `Context` can be created only implicitly by requesting a context given a canvas element and its\r\n * dataset:\r\n * ```\r\n * const element: HTMLCanvasElement = <HTMLCanvasElement>document.getElementById(canvasID);\r\n * this.context = Context.request(element); // element.dataset is used for attributes\r\n * ```\r\n * The context supports the following data-attributes:\r\n * ```\r\n * data-backend: 'auto' | 'webgl' | 'webgl2'\r\n * data-accumulation-format: 'auto' | 'float' | 'half' | 'byte'\r\n * ```\r\n *\r\n * At run-time, cached context features can be queried without a performance impact, e.g., frequent extension-based\r\n * branching:\r\n * ```\r\n * if(this.context.supportsVertexArrayObject) {\r\n *     this.context.vertexArrayObject.bindVertexArrayOES(...);\r\n *     ...\r\n * }\r\n * ```\r\n *\r\n * For convenience, protected extension names such as `EXT_frag_depth` are not prefixed by an underscore.\r\n */\r\nexport class Context {\r\n\r\n    /* tslint:disable:member-ordering variable-name */\r\n\r\n    /**\r\n     * Context creation attribute defaults.\r\n     */\r\n    protected static readonly CONTEXT_ATTRIBUTES = {\r\n        alpha: true,\r\n        antialias: false,\r\n        depth: false,\r\n        failIfMajorPerformanceCaveat: false,\r\n        premultipliedAlpha: true,\r\n        preserveDrawingBuffer: false,\r\n        stencil: false,\r\n    };\r\n\r\n    /** @see {@link backend} */\r\n    protected _backend: BackendType | undefined;\r\n\r\n    /**\r\n     * Created context. The actual type depends on the created context.\r\n     * @see {@link gl}\r\n     */\r\n    protected _context: any; // WebGLRenderingContext | WebGL2RenderingContext;\r\n\r\n    /** @see {@link mask} */\r\n    protected _mask: ContextMasquerade | undefined;\r\n\r\n    /** @see {@link gl2facade} */\r\n    protected _gl2: GL2Facade;\r\n\r\n\r\n    /**\r\n     * Creates a masquerade object that can be used for debugging. This is intended to be called when requesting a\r\n     * context, i.e., before actually requesting it. For creation of a masquerade object, the following masquerade\r\n     * specifiers are evaluated in the following order:\r\n     *  1. msqrd_h GET parameter,\r\n     *  2. msqrd_p GET parameter,\r\n     *  3. data-msqrd-h attribute of the canvas element, and, finally,\r\n     *  4. data-msqrd-p attribute of the canvas element.\r\n     * If no specifier can be found, no object is created and undefined is returned.\r\n     * @param dataset - Dataset of the canvas element that might provide a data-msqrd-{h,p} attribute.\r\n     * @returns - Masquerade object when a specifier was found. If none was found undefined is returned.\r\n     */\r\n    protected static createMasqueradeFromGETorDataAttribute(dataset: DOMStringMap): ContextMasquerade | undefined {\r\n        const mask = ContextMasquerade.fromGET();\r\n        if (mask) {\r\n            return mask;\r\n        }\r\n        if (dataset.msqrdH) {\r\n            return ContextMasquerade.fromHash(dataset.msqrdH as string);\r\n        }\r\n        if (dataset.msqrdP) {\r\n            return ContextMasquerade.fromPreset(dataset.msqrdP as string);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    // WEBGL 1 & 2 CONTEXT\r\n\r\n    /**\r\n     * Create a WebGL context. Note: this should only be called once in constructor, because the second and subsequent\r\n     * calls to getContext of an element will return null.\r\n     * @param element - Canvas element to request context from.\r\n     * @returns - Context providing either a WebGLRenderingContext, WebGL2RenderingContext.\r\n     */\r\n    static request(element: HTMLCanvasElement): Context {\r\n        const dataset: DOMStringMap = element.dataset;\r\n        const mask = Context.createMasqueradeFromGETorDataAttribute(dataset);\r\n\r\n        /** Favor backend specification by masquerade over specification by data attribute. */\r\n        let request = mask ? (mask.backend as string) :\r\n            dataset.backend ? (dataset.backend as string).toLowerCase() : '';\r\n\r\n        if (!(request as BackendTypeString)) {\r\n            log(LogLevel.Dev, `unknown backend '${dataset.backend}' changed to 'auto'`);\r\n            request = 'auto';\r\n        }\r\n\r\n        switch (request) {\r\n            case 'webgl':\r\n                break;\r\n            case 'experimental-webgl':\r\n            case 'experimental-webgl1':\r\n            case 'webgl1':\r\n                request = 'webgl';\r\n                break;\r\n            case 'experimental-webgl2':\r\n            case 'webgl2':\r\n                request = 'webgl2';\r\n                break;\r\n            default:\r\n                request = 'auto';\r\n        }\r\n\r\n        let context;\r\n        if (request !== 'webgl') {\r\n            context = this.requestWebGL2(element);\r\n        }\r\n        if (!context) {\r\n            context = this.requestWebGL1(element);\r\n            logIf(context !== undefined && request === 'webgl2', LogLevel.Dev,\r\n                `backend changed to 'webgl', given '${request}'`);\r\n        }\r\n\r\n        assert(!!context, `creating a context failed`);\r\n        return new Context(context, mask);\r\n    }\r\n\r\n    /**\r\n     * Helper that tries to create a WebGL 1 context (requests to 'webgl' and 'experimental-webgl' are made).\r\n     * @param element - Canvas element to request context from.\r\n     * @returns {WebGLRenderingContext} - WebGL context object or null.\r\n     */\r\n    protected static requestWebGL1(element: HTMLCanvasElement) {\r\n        let context = element.getContext('webgl', Context.CONTEXT_ATTRIBUTES);\r\n        if (context) {\r\n            return context;\r\n        }\r\n\r\n        context = element.getContext('experimental-webgl', Context.CONTEXT_ATTRIBUTES);\r\n\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Helper that tries to create a WebGL 2 context (requests to 'webgl2' and 'experimental-webgl2' are made).\r\n     * @param element - Canvas element to request context from.\r\n     * @returns {WebGL2RenderingContext} - WebGL2 context object or null.\r\n     */\r\n    protected static requestWebGL2(element: HTMLCanvasElement) {\r\n        let context = element.getContext('webgl2', Context.CONTEXT_ATTRIBUTES);\r\n        if (context) {\r\n            return context;\r\n        }\r\n\r\n        context = element.getContext('experimental-webgl2', Context.CONTEXT_ATTRIBUTES);\r\n        return context;\r\n    }\r\n\r\n\r\n    // CONTEXT ATTRIBUTES\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true, the drawing buffer has an alpha channel for the purposes of performing OpenGL destination\r\n     * alpha operations and compositing with the page. If the value is false, no alpha buffer is available.\r\n     */\r\n    get alpha(): boolean {\r\n        return this._context.getContextAttributes().alpha;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true and the implementation supports antialiasing the drawing buffer will perform antialiasing\r\n     * using its choice of technique (multisample/supersample) and quality. If the value is false or the implementation\r\n     * does not support antialiasing, no antialiasing is performed.\r\n     */\r\n    get antialias(): boolean {\r\n        return this._context.getContextAttributes().antialias;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true, the drawing buffer has a depth buffer of at least 16 bits. If the value is false, no depth\r\n     * buffer is available.\r\n     */\r\n    get depth(): boolean {\r\n        return this._context.getContextAttributes().depth;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true, context creation will fail if the implementation determines that the performance of the\r\n     * created WebGL context would be dramatically lower than that of a native application making equivalent OpenGL\r\n     * calls...\r\n     */\r\n    get failIfMajorPerformanceCaveat(): boolean {\r\n        return this._context.getContextAttributes().failIfMajorPerformanceCaveat;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true the page compositor will assume the drawing buffer contains colors with premultiplied alpha.\r\n     * If the value is false the page compositor will assume that colors in the drawing buffer are not premultiplied.\r\n     * This flag is ignored if the alpha flag is false. See Premultiplied Alpha for more information on the effects of\r\n     * the premultipliedAlpha flag.\r\n     */\r\n    get premultipliedAlpha(): boolean {\r\n        return this._context.getContextAttributes().premultipliedAlpha;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If false, once the drawing buffer is presented as described in theDrawing Buffer section, the contents of the\r\n     * drawing buffer are cleared to their default values. All elements of the drawing buffer (color, depth and stencil)\r\n     * are cleared. If the value is true the buffers will not be cleared and will preserve their values until cleared\r\n     * or overwritten by the author.\r\n     */\r\n    get preserveDrawingBuffer(): boolean {\r\n        return this._context.getContextAttributes().preserveDrawingBuffer;\r\n    }\r\n\r\n    /**\r\n     * @link https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.2\r\n     * If the value is true, the drawing buffer has a stencil buffer of at least 8 bits. If the value is false, no\r\n     * stencil buffer is available.\r\n     */\r\n    get stencil(): boolean {\r\n        return this._context.getContextAttributes().stencil;\r\n    }\r\n\r\n\r\n    // EXTENSIONS\r\n\r\n    /**\r\n     * Cached extension supported by the context.\r\n     */\r\n    protected _extensions: Array<string> = new Array<string>();\r\n\r\n    /**\r\n     * Checks if the given extension is supported. Please note that a 'supports' call asserts whether or not the\r\n     * extension is related to the WebGL version. For example, the following code would lead to an Error:\r\n     * ```\r\n     * this.supports('ANGLE_instanced_arrays'); // asserts in WebGL2 since the extension is incorporated by default\r\n     * ```\r\n     * If the context is masked by a ContextMasquerade the support of an extension might be concealed.\r\n     * @param extension - Extension identifier to query support for.\r\n     * @returns - True if the extension is supported, false otherwise.\r\n     */\r\n    protected supports(extension: string): boolean {\r\n        if (this._mask && this._mask.extensionsConceal.indexOf(extension) > -1) {\r\n            return false;\r\n        }\r\n\r\n        switch (this._backend) {\r\n            case BackendType.WebGL1:\r\n                assert(WEBGL1_EXTENSIONS.indexOf(extension) > -1, `extension ${extension} not available to WebGL1`);\r\n                break;\r\n\r\n            case BackendType.WebGL2:\r\n                assert(WEBGL2_DEFAULT_EXTENSIONS.indexOf(extension) === -1,\r\n                    `extension ${extension} supported by default in WebGL2`);\r\n                assert(WEBGL2_EXTENSIONS.indexOf(extension) > -1, `extension ${extension} not available to WebGL2`);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return this._extensions.indexOf(extension) > -1;\r\n    }\r\n\r\n    /**\r\n     * Queries all extensions for the current context and stores the result (supported or not supported). This is\r\n     * relevant to avoid continuous searches or regexp matching or substring queries in the complete extension string.\r\n     * Instead, the support is queried once and can be explicitly request in the public interface using properties.\r\n     *\r\n     * This function should get called only once per Context instance.\r\n     */\r\n    protected queryExtensionSupport(): void {\r\n        this._extensions = this._context.getSupportedExtensions();\r\n\r\n        if (this._backend === BackendType.WebGL1) {\r\n            this.ANGLE_instanced_arrays_supported = this.supports('ANGLE_instanced_arrays');\r\n\r\n            this.EXT_blend_minmax_supported = this.supports('EXT_blend_minmax');\r\n            this.EXT_color_buffer_half_float_supported = this.supports('EXT_color_buffer_half_float');\r\n            this.EXT_disjoint_timer_query_supported = this.supports('EXT_disjoint_timer_query');\r\n            this.EXT_frag_depth_supported = this.supports('EXT_frag_depth');\r\n            this.EXT_sRGB_supported = this.supports('EXT_sRGB');\r\n            this.EXT_shader_texture_lod_supported = this.supports('EXT_shader_texture_lod');\r\n\r\n            this.OES_element_index_uint_supported = this.supports('OES_element_index_uint');\r\n            this.OES_standard_derivatives_supported = this.supports('OES_standard_derivatives');\r\n            this.OES_texture_float_supported = this.supports('OES_texture_float');\r\n            this.OES_texture_half_float_supported = this.supports('OES_texture_half_float');\r\n            this.OES_vertex_array_object_supported = this.supports('OES_vertex_array_object');\r\n\r\n            this.WEBGL_color_buffer_float_supported = this.supports('WEBGL_color_buffer_float');\r\n            this.WEBGL_depth_texture_supported = this.supports('WEBGL_depth_texture');\r\n            this.WEBGL_draw_buffers_supported = this.supports('WEBGL_draw_buffers');\r\n        }\r\n\r\n        if (this._backend === BackendType.WebGL2) {\r\n            this.EXT_color_buffer_float_supported = this.supports('EXT_color_buffer_float');\r\n            this.EXT_disjoint_timer_query_webgl2_supported = this.supports('EXT_disjoint_timer_query_webgl2');\r\n        }\r\n\r\n        this.EXT_texture_filter_anisotropic_supported = this.supports('EXT_texture_filter_anisotropic');\r\n\r\n        this.OES_texture_float_linear_supported = this.supports('OES_texture_float_linear');\r\n        this.OES_texture_half_float_linear_supported = this.supports('OES_texture_half_float_linear');\r\n\r\n        this.WEBGL_compressed_texture_astc_supported = this.supports('WEBGL_compressed_texture_astc');\r\n        this.WEBGL_compressed_texture_atc_supported = this.supports('WEBGL_compressed_texture_atc');\r\n        this.WEBGL_compressed_texture_etc_supported = this.supports('WEBGL_compressed_texture_etc');\r\n        this.WEBGL_compressed_texture_etc1_supported = this.supports('WEBGL_compressed_texture_etc1');\r\n        this.WEBGL_compressed_texture_pvrtc_supported = this.supports('WEBGL_compressed_texture_pvrtc');\r\n        this.WEBGL_compressed_texture_s3tc_supported = this.supports('WEBGL_compressed_texture_s3tc');\r\n        this.WEBGL_compressed_texture_s3tc_srgb_supported = this.supports('WEBGL_compressed_texture_s3tc_srgb');\r\n        this.WEBGL_debug_renderer_info_supported = this.supports('WEBGL_debug_renderer_info');\r\n        this.WEBGL_debug_shaders_supported = this.supports('WEBGL_debug_shaders');\r\n        this.WEBGL_lose_context_supported = this.supports('WEBGL_lose_context');\r\n    }\r\n\r\n    /**\r\n     * Returns the cached extensions object for the given extension identifier. If no extensions is cached, it is\r\n     * queried. Asserts if the extension is provided by default in the current backend, not supported in general, or\r\n     * unknown to the specification.\r\n     * Please not that the availability of an extension might be concealed by the context's mask.\r\n     * @param out - Member the extension object is cached into.\r\n     * @param extension - Extension identifier to query.\r\n     * @returns - Extension object.\r\n     */\r\n    protected extension(out: any, extension: string): any {\r\n        if (out === undefined) {\r\n            assert(this.supports(extension), `extension ${extension} expected to be supported`);\r\n            out = this._context.getExtension(extension);\r\n        }\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Context this is of type 'any' for now, since WebGL2RenderingContext not available but supported. This\r\n     * constructor is protected to enforce context creation using `request`. It queries extension support and\r\n     * configures context specifics for convenience, e.g., HALF_FLOAT format.\r\n     */\r\n    protected constructor(context: any, mask: ContextMasquerade | undefined) {\r\n        this._context = context;\r\n        this._mask = mask;\r\n\r\n        const contextString = context.toString();\r\n\r\n        {\r\n            // WebGL chrome debugger renames Context to CaptureContext\r\n            const webgl1 = /WebGLRenderingContext/.test(contextString) ||\r\n                /CaptureContext/.test(contextString);\r\n            const webgl2 = /WebGL2RenderingContext/.test(contextString);\r\n\r\n            this._backend = webgl1 ? BackendType.WebGL1 : webgl2 ? BackendType.WebGL2 : undefined;\r\n        }\r\n\r\n        assert(this._backend !== undefined && this._backend.valueOf() !== BackendType.Invalid.valueOf(),\r\n            `context is neither webgl nor webgl2, given ${contextString}`);\r\n\r\n        this.queryExtensionSupport();\r\n\r\n        // undefine all masked functions\r\n        if (this._mask && this._mask.functionsUndefine) {\r\n            for (const func in this._mask.functionsUndefine) {\r\n                (this._context as any)[func] = undefined;\r\n            }\r\n        }\r\n\r\n        // create an instance for a gl2 facade (unifies mandatory interfaces of the webgl and webgl2 api)\r\n        this._gl2 = new GL2Facade(this);\r\n    }\r\n\r\n\r\n    /** @see {@link allocationRegister} */\r\n    protected _allocationRegister = new AllocationRegister();\r\n\r\n    /**\r\n     * The context's GPU allocation register for use of tracking memory allocations.\r\n     */\r\n    get allocationRegister(): AllocationRegister {\r\n        return this._allocationRegister;\r\n    }\r\n\r\n\r\n    /**\r\n     * The created rendering backend (webgl context type), either 'webgl' or 'webgl2' based on which one was\r\n     * created successfully. If no context could be created null is returned.\r\n     * @returns - Backend that was created on construction.\r\n     */\r\n    get backend() {\r\n        return this._backend;\r\n    }\r\n\r\n    /**\r\n     * Provides a human-readable string of the backend.\r\n     */\r\n    get backendString(): string | undefined {\r\n        switch (this._backend) {\r\n            case BackendType.WebGL1:\r\n                return 'WebGL';\r\n            case BackendType.WebGL2:\r\n                return 'WebGL2';\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Provides an array of all extensions supported by the used WebGL1/2 context.\r\n     */\r\n    get extensions() {\r\n        return this._extensions;\r\n    }\r\n\r\n    /**\r\n     * Masquerade object applied to a context instance.\r\n     */\r\n    get mask() {\r\n        return this._mask;\r\n    }\r\n\r\n    /**\r\n     * Access to either the WebGLRenderingContext or WebGL2RenderingContext.\r\n     */\r\n    get gl() {\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * WebGL2 facade for WebGL2 API like access to features mandatory to this engine.\r\n     */\r\n    get gl2facade() {\r\n        return this._gl2;\r\n    }\r\n\r\n    /**\r\n     * True if the context is a WebGL1 context, otherwise false.\r\n     */\r\n    get isWebGL1(): boolean {\r\n        return this._backend === BackendType.WebGL1;\r\n    }\r\n\r\n    /**\r\n     * True if the context is a WebGL2 context, otherwise false.\r\n     */\r\n    get isWebGL2(): boolean {\r\n        return this._backend === BackendType.WebGL2;\r\n    }\r\n\r\n\r\n    // EXTENSION QUERIES\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected ANGLE_instanced_arrays: any;\r\n    protected ANGLE_instanced_arrays_supported: boolean;\r\n    get supportsInstancedArrays(): boolean {\r\n        return this.ANGLE_instanced_arrays_supported;\r\n    }\r\n    get instancedArrays(): any {\r\n        return this.extension(this.ANGLE_instanced_arrays, 'ANGLE_instanced_arrays');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected EXT_blend_minmax: any;\r\n    protected EXT_blend_minmax_supported: boolean;\r\n    get supportsBlendMinmax(): boolean {\r\n        return this.EXT_blend_minmax_supported;\r\n    }\r\n    get blendMinmax(): any {\r\n        return this.extension(this.EXT_blend_minmax, 'EXT_blend_minmax');\r\n    }\r\n\r\n    // WebGL1\r\n    protected EXT_color_buffer_half_float: any;\r\n    protected EXT_color_buffer_half_float_supported: boolean;\r\n    get supportsColorBufferHalfFloat(): boolean {\r\n        return this.EXT_color_buffer_half_float_supported;\r\n    }\r\n    get colorBufferHalfFloat(): any {\r\n        return this.extension(this.EXT_color_buffer_half_float, 'EXT_color_buffer_half_float');\r\n    }\r\n\r\n    // WebGL1\r\n    protected EXT_disjoint_timer_query: any;\r\n    protected EXT_disjoint_timer_query_supported: boolean;\r\n    get supportsDisjointTimerQuery(): boolean {\r\n        return this.EXT_disjoint_timer_query_supported;\r\n    }\r\n    get disjointTimerQuery(): any {\r\n        return this.extension(this.EXT_disjoint_timer_query, 'EXT_disjoint_timer_query');\r\n    }\r\n\r\n    // WebGL2\r\n    protected EXT_disjoint_timer_query_webgl2: any;\r\n    protected EXT_disjoint_timer_query_webgl2_supported: boolean;\r\n    get supportsDisjointTimerQueryWebGL2(): boolean {\r\n        return this.EXT_disjoint_timer_query_webgl2_supported;\r\n    }\r\n    get disjointTimerQueryWebGL2(): any {\r\n        return this.extension(this.EXT_disjoint_timer_query_webgl2, 'EXT_disjoint_timer_query_webgl2');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected EXT_frag_depth: any;\r\n    protected EXT_frag_depth_supported: boolean;\r\n    get supportsFragDepth(): boolean {\r\n        return this.EXT_frag_depth_supported;\r\n    }\r\n    get fragDepth(): any {\r\n        return this.extension(this.EXT_frag_depth, 'EXT_frag_depth');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected EXT_sRGB: any;\r\n    protected EXT_sRGB_supported: boolean;\r\n    get supportsSRGB(): boolean {\r\n        return this.EXT_sRGB_supported;\r\n    }\r\n    get sRGB(): any {\r\n        return this.extension(this.EXT_sRGB, 'EXT_sRGB');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected EXT_shader_texture_lod: any;\r\n    protected EXT_shader_texture_lod_supported: boolean;\r\n    get supportsShaderTextureLOD(): boolean {\r\n        return this.EXT_shader_texture_lod_supported;\r\n    }\r\n    get shaderTextureLOD(): any {\r\n        return this.extension(this.EXT_shader_texture_lod, 'EXT_shader_texture_lod');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected EXT_texture_filter_anisotropic: any;\r\n    protected EXT_texture_filter_anisotropic_supported: boolean;\r\n    get supportsTextureFilterAnisotropic(): boolean {\r\n        return this.EXT_texture_filter_anisotropic_supported;\r\n    }\r\n    get textureFilterAnisotropic(): any {\r\n        return this.extension(this.EXT_texture_filter_anisotropic, 'EXT_texture_filter_anisotropic');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected OES_element_index_uint: any;\r\n    protected OES_element_index_uint_supported: boolean;\r\n    get supportsElementIndexUint(): boolean {\r\n        return this.OES_element_index_uint_supported;\r\n    }\r\n    get elementIndexUint(): any {\r\n        return this.extension(this.OES_element_index_uint, 'OES_element_index_uint');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected OES_standard_derivatives: any;\r\n    protected OES_standard_derivatives_supported: boolean;\r\n    get supportsStandardDerivatives(): boolean {\r\n        return this.OES_standard_derivatives_supported;\r\n    }\r\n    get standardDerivatives(): any {\r\n        return this.extension(this.OES_standard_derivatives, 'OES_standard_derivatives');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected OES_texture_float: any;\r\n    protected OES_texture_float_supported: boolean;\r\n    get supportsTextureFloat(): boolean {\r\n        return this.OES_texture_float_supported;\r\n    }\r\n    get textureFloat(): any {\r\n        return this.extension(this.OES_texture_float, 'OES_texture_float');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected OES_texture_float_linear: any;\r\n    protected OES_texture_float_linear_supported: boolean;\r\n    get supportsTextureFloatLinear(): boolean {\r\n        return this.OES_texture_float_linear_supported;\r\n    }\r\n    get textureFloatLinear(): any {\r\n        return this.extension(this.OES_texture_float_linear, 'OES_texture_float_linear');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected OES_texture_half_float: any;\r\n    protected OES_texture_half_float_supported: boolean;\r\n    get supportsTextureHalfFloat(): boolean {\r\n        return this.OES_texture_half_float_supported;\r\n    }\r\n    get textureHalfFloat(): any {\r\n        return this.extension(this.OES_texture_half_float, 'OES_texture_half_float');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected OES_texture_half_float_linear: any;\r\n    protected OES_texture_half_float_linear_supported: boolean;\r\n    get supportsTextureHalfFloatLinear(): boolean {\r\n        return this.OES_texture_half_float_linear_supported;\r\n    }\r\n    get textureHalfFloatLinear(): any {\r\n        return this.extension(this.OES_texture_half_float_linear, 'OES_texture_half_float_linear');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected OES_vertex_array_object: any;\r\n    protected OES_vertex_array_object_supported: boolean;\r\n    get supportsVertexArrayObject(): boolean {\r\n        return this.OES_vertex_array_object_supported;\r\n    }\r\n    get vertexArrayObject(): any {\r\n        return this.extension(this.OES_vertex_array_object, 'OES_vertex_array_object');\r\n    }\r\n\r\n    // WebGL1\r\n    protected WEBGL_color_buffer_float: any;\r\n    protected WEBGL_color_buffer_float_supported: boolean;\r\n    // WebGL2\r\n    protected EXT_color_buffer_float: any;\r\n    protected EXT_color_buffer_float_supported: boolean;\r\n    get supportsColorBufferFloat(): boolean | undefined {\r\n        switch (this._backend) {\r\n            case BackendType.WebGL1:\r\n                return this.WEBGL_color_buffer_float_supported;\r\n            case BackendType.WebGL2:\r\n                return this.EXT_color_buffer_float_supported;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    get colorBufferFloat(): any | undefined {\r\n        switch (this._backend) {\r\n            case BackendType.WebGL1:\r\n                return this.extension(this.WEBGL_color_buffer_float, 'WEBGL_color_buffer_float');\r\n            case BackendType.WebGL2:\r\n                return this.extension(this.EXT_color_buffer_float, 'EXT_color_buffer_float');\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_astc: any;\r\n    protected WEBGL_compressed_texture_astc_supported: boolean;\r\n    get supportsCompressedTextureASTC(): boolean {\r\n        return this.WEBGL_compressed_texture_astc_supported;\r\n    }\r\n    get compressedTextureASTC(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_astc, 'WEBGL_compressed_texture_astc');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_atc: any;\r\n    protected WEBGL_compressed_texture_atc_supported: boolean;\r\n    get supportsCompressedTextureATC(): boolean {\r\n        return this.WEBGL_compressed_texture_atc_supported;\r\n    }\r\n    get compressedTextureATC(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_atc, 'WEBGL_compressed_texture_atc');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_etc: any;\r\n    protected WEBGL_compressed_texture_etc_supported: boolean;\r\n    get supportsCompressedTextureETC(): boolean {\r\n        return this.WEBGL_compressed_texture_etc_supported;\r\n    }\r\n    get compressedTextureETC(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_etc, 'WEBGL_compressed_texture_etc');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_etc1: any;\r\n    protected WEBGL_compressed_texture_etc1_supported: boolean;\r\n    get supportsCompressedTextureETC1(): boolean {\r\n        return this.WEBGL_compressed_texture_etc1_supported;\r\n    }\r\n    get compressedTextureETC1(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_etc1, 'WEBGL_compressed_texture_etc1');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_pvrtc: any;\r\n    protected WEBGL_compressed_texture_pvrtc_supported: boolean;\r\n    get supportsCompressedTexturePVRTC(): boolean {\r\n        return this.WEBGL_compressed_texture_pvrtc_supported;\r\n    }\r\n    get compressedTexturePVRTC(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_pvrtc, 'WEBGL_compressed_texture_pvrtc');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_s3tc: any;\r\n    protected WEBGL_compressed_texture_s3tc_supported: boolean;\r\n    get supportsCompressedTextureS3TC(): boolean {\r\n        return this.WEBGL_compressed_texture_s3tc_supported;\r\n    }\r\n    get compressedTextureS3TC(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_s3tc, 'WEBGL_compressed_texture_s3tc');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_compressed_texture_s3tc_srgb: any;\r\n    protected WEBGL_compressed_texture_s3tc_srgb_supported: boolean;\r\n    get supportsCompressedTextureS3TCSRGB(): boolean {\r\n        return this.WEBGL_compressed_texture_s3tc_srgb_supported;\r\n    }\r\n    get compressedTextureS3TCSRGB(): any {\r\n        return this.extension(this.WEBGL_compressed_texture_s3tc_srgb, 'WEBGL_compressed_texture_s3tc_srgb');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_debug_renderer_info: any;\r\n    protected WEBGL_debug_renderer_info_supported: boolean;\r\n    get supportsDebugRendererInfo(): boolean {\r\n        return this.WEBGL_debug_renderer_info_supported;\r\n    }\r\n    get debugRendererInfo(): any {\r\n        return this.extension(this.WEBGL_debug_renderer_info, 'WEBGL_debug_renderer_info');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_debug_shaders: any;\r\n    protected WEBGL_debug_shaders_supported: boolean;\r\n    get supportsDebugShaders(): boolean {\r\n        return this.WEBGL_debug_shaders_supported;\r\n    }\r\n    get debugShaders(): any {\r\n        return this.extension(this.WEBGL_debug_shaders, 'WEBGL_debug_shaders');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected WEBGL_depth_texture: any;\r\n    protected WEBGL_depth_texture_supported: boolean;\r\n    get supportsDepthTexture(): boolean {\r\n        return this.WEBGL_depth_texture_supported;\r\n    }\r\n    get depthTexture(): any {\r\n        return this.extension(this.WEBGL_depth_texture, 'WEBGL_depth_texture');\r\n    }\r\n\r\n    // WebGL1, WebGL2-default\r\n    protected WEBGL_draw_buffers: any;\r\n    protected WEBGL_draw_buffers_supported: boolean;\r\n    get supportsDrawBuffers(): boolean {\r\n        return this.WEBGL_draw_buffers_supported;\r\n    }\r\n    get drawBuffers(): any {\r\n        return this.extension(this.WEBGL_draw_buffers, 'WEBGL_draw_buffers');\r\n    }\r\n\r\n    // WebGL1, WebGL2\r\n    protected WEBGL_lose_context: any;\r\n    protected WEBGL_lose_context_supported: boolean;\r\n    get supportsLoseContext(): boolean {\r\n        return this.WEBGL_lose_context_supported;\r\n    }\r\n    get loseContext(): any {\r\n        return this.extension(this.WEBGL_lose_context, 'WEBGL_lose_context');\r\n    }\r\n\r\n    // FUNCTION QUERIES\r\n\r\n    /**\r\n     * True if WebGL2 blitFramebuffer is supported, false otherwise. This is experimental technology.\r\n     */\r\n    get supportsBlitFramebuffer(): boolean {\r\n        return this._context.blitFramebuffer !== undefined;\r\n    }\r\n\r\n    /**\r\n     * True if WebGL2 readBuffer is supported, false otherwise. This is experimental technology.\r\n     */\r\n    get supportsReadBuffer(): boolean {\r\n        return this._context.readBuffer !== undefined;\r\n    }\r\n\r\n}\r\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, propertyPath, name, argument) {\n  if (propertyPath) {\n    this.property = propertyPath;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    if (schema.id) {\n      this.schema = schema.id;\n    } else {\n      this.schema = schema;\n    }\n  }\n  if (instance) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.propertyPath);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.propertyPath, detail.name, detail.argument);\n  }\n\n  if (this.throwError) {\n    throw err;\n  }\n  this.errors.push(err);\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    Array.prototype.push.apply(this.errors, res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  { constructor: {value: SchemaError, enumerable: false}\n  , name: {value: 'SchemaError', enumerable: false}\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, propertyPath, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  this.propertyPath = propertyPath;\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var propertyPath = (propertyName===undefined) ? this.propertyPath : this.propertyPath+makeSuffix(propertyName);\n  var base = uri.resolve(this.base, schema.id||'');\n  var ctx = new SchemaContext(schema, this.options, propertyPath, base, Object.create(this.schemas));\n  if(schema.id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n}\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n  'uri': /^[a-zA-Z][a-zA-Z0-9+-.]*:[^\\s]*$/,\n\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n  'style': /\\s*(.+?):\\s*([^;]+);?/g,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e)\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e)\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key])\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n};\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n\t// ~ must be encoded explicitly because hacks\n\t// the slash is encoded by encodeURIComponent\n\treturn a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\n","\r\nimport { assert } from './auxiliaries';\r\nimport { byteSizeOfFormat } from './formatbytesizes';\r\nimport { GLsizei2 } from './tuples';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * WebGL Renderbuffer implementation providing size accessors and requiring for bind, unbind, resize, validity, and\r\n * initialization implementations.\r\n * ```\r\n * @todo add usage example\r\n * ```\r\n */\r\nexport class Renderbuffer extends AbstractObject<WebGLRenderbuffer> implements Bindable {\r\n\r\n    /**\r\n     * Default renderbuffer, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_RENDER_BUFFER = undefined;\r\n\r\n    /** @see {@link width} */\r\n    protected _width: GLsizei;\r\n\r\n    /** @see {@link height} */\r\n    protected _height: GLsizei;\r\n\r\n    /**\r\n     * Cached internal format of the renderbuffer for efficient resize.\r\n     */\r\n    protected _internalFormat: GLenum | undefined = undefined;\r\n\r\n    /**\r\n     * Create a renderbuffer object on the GPU.\r\n     * @param context - Stored for local access to the WebGL API.\r\n     * @param size - Initial size of the renderbuffer.\r\n     * @param internalFormat - Internal format of the renderbuffer data.\r\n     */\r\n    protected create(width: GLsizei, height: GLsizei, internalFormat: GLenum): WebGLRenderbuffer | undefined {\r\n        assert(width > 0 && height > 0, `renderbuffer object requires valid width and height greater than zero`);\r\n        const gl = this.context.gl;\r\n\r\n        this._object = gl.createRenderbuffer();\r\n\r\n        this._width = width;\r\n        this._height = height;\r\n        this._internalFormat = internalFormat;\r\n\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._object);\r\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\r\n        /* note that gl.isRenderbuffer requires the renderbuffer to be bound */\r\n        this._valid = gl.isRenderbuffer(this._object);\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, Renderbuffer.DEFAULT_RENDER_BUFFER);\r\n\r\n        const bytes: GLsizei = width * height * byteSizeOfFormat(this.context, internalFormat as GLenum);\r\n        this.context.allocationRegister.reallocate(this._identifier, bytes);\r\n\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the renderbuffer object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object instanceof WebGLRenderbuffer, `expected WebGLRenderbuffer object`);\r\n        this.context.gl.deleteRenderbuffer(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n\r\n        this._internalFormat = undefined;\r\n\r\n        this._width = 0;\r\n        this._height = 0;\r\n    }\r\n\r\n    /**\r\n     * Bind the renderbuffer object.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(): void {\r\n        this.context.gl.bindRenderbuffer(this.context.gl.RENDERBUFFER, this._object);\r\n    }\r\n\r\n    /**\r\n     * Unbind the renderbuffer object.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(): void {\r\n        this.context.gl.bindRenderbuffer(this.context.gl.RENDERBUFFER, Renderbuffer.DEFAULT_RENDER_BUFFER);\r\n    }\r\n\r\n    /**\r\n     * This should be used to implement efficient resize for all attachments.\r\n     * @param width - Targeted/new width of the renderbuffer in px.\r\n     * @param height - Targeted/new height of the renderbuffer in px.\r\n     * @param bind - Allows to skip binding the renderbuffer (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the renderbuffer (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    resize(width: GLsizei, height: GLsizei, bind: boolean = false, unbind: boolean = false): void {\r\n        if (width === this._width && height === this._height) {\r\n            return;\r\n        }\r\n        this._width = width;\r\n        this._height = height;\r\n\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.renderbufferStorage(gl.RENDERBUFFER, this._internalFormat, width, height);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n\r\n        // update allocated bytes\r\n        const bytes: GLsizei = width * height * byteSizeOfFormat(this.context, this._internalFormat as GLenum);\r\n        this.context.allocationRegister.reallocate(this._identifier, bytes);\r\n    }\r\n\r\n    /**\r\n     * Returns the number of bytes this object approximately allocates on the GPU.\r\n     */\r\n    get bytes(): GLsizei {\r\n        this.assertInitialized();\r\n        return this.context.allocationRegister.allocated(this._identifier);\r\n    }\r\n\r\n    /**\r\n     * Readonly access to the internal format of the renderbuffer object. This can only be changed by re-initialization.\r\n     */\r\n    get internalFormat(): GLenum {\r\n        this.assertInitialized();\r\n        return this._internalFormat as GLenum;\r\n    }\r\n\r\n    /**\r\n     * Convenience accessor: returns the width of the texture object.\r\n     */\r\n    get width(): GLsizei {\r\n        this.assertInitialized();\r\n        return this._width;\r\n    }\r\n\r\n    /**\r\n     * Convenience accessor: returns the height of the texture object.\r\n     */\r\n    get height(): GLsizei {\r\n        this.assertInitialized();\r\n        return this._height;\r\n    }\r\n\r\n    /**\r\n     * Convenience getter for the 2-tuple containing the render buffer's width and height.\r\n     * @see {@link width}\r\n     * @see {@link heigth}\r\n     */\r\n    get size(): GLsizei2 {\r\n        return [this.width, this.height];\r\n    }\r\n\r\n}\r\n","\r\nimport { vec2 } from 'gl-matrix';\r\n\r\nimport { Observable, Subscription } from 'rxjs/Rx';\r\n\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { MouseEventProvider } from './mouseeventprovider';\r\nimport { Invalidate } from './renderer';\r\n\r\n/**\r\n * Callback for handling mouse events, given the latest mouse events (since last update) as well as the previous.\r\n */\r\nexport interface MouseEventHandler { (latests: Array<MouseEvent>, previous: Array<MouseEvent>): void; }\r\n\r\n/**\r\n * ... Provider and event handler are explicitly separated in order to reduce the number of observables (reuse of event\r\n * provider for multiple handler).\r\n */\r\nexport class EventHandler {\r\n\r\n    /**\r\n     * The event handler's invalidation callback. This should usually be setup by the owning renderer and invoke the\r\n     * same callback the renderer has been given by the canvas. This invalidation is required, when continuous\r\n     * rendering is not present, events might cause need for new rendering requests.\r\n     */\r\n    protected _invalidate: Invalidate | undefined;\r\n\r\n    protected _subscriptions = new Array<Subscription>();\r\n\r\n\r\n    /**\r\n     * Assigned key event provider. This is usually created and owned by the canvas.\r\n     */\r\n    // protected _keyEventProvider: KeyEventProvider | undefined;\r\n\r\n    /**\r\n     * Assigned mouse event provider. This is usually created and owned by the canvas.\r\n     */\r\n    protected _mouseEventProvider: MouseEventProvider | undefined;\r\n\r\n    protected _latestMouseEventsByType =\r\n        new Map<MouseEventProvider.Type, Array<MouseEvent>>();\r\n    protected _previousMouseEventsByType =\r\n        new Map<MouseEventProvider.Type, Array<MouseEvent>>();\r\n    protected _mouseEventHandlerByType =\r\n        new Map<MouseEventProvider.Type, Array<MouseEventHandler>>();\r\n\r\n    /**\r\n     * Assigned touch event provider. This is usually created and owned by the canvas.\r\n     */\r\n    // protected _touchEventProvider: TouchEventProvider | undefined;\r\n\r\n\r\n    constructor(invalidate: Invalidate | undefined, mouseEventProvider: MouseEventProvider | undefined,\r\n        /* keyEventProvider: KeyEventProvider | undefined, touchEventProvider: TouchEventProvider | undefined */) {\r\n        this._invalidate = invalidate;\r\n        this._mouseEventProvider = mouseEventProvider;\r\n    }\r\n\r\n\r\n    /** @callback Invalidate\r\n     * A callback intended to be invoked whenever the specialized event handler itself is invalid. By default only\r\n     * optional updates (renderer decides whether or not to continue redraw) are triggered.\r\n     */\r\n    protected invalidate(force: boolean = false) {\r\n        if (this._invalidate) {\r\n            this._invalidate(force);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Utility for registering an additional mouse event handler for updates on mouse events of the given type. The\r\n     * handler is to be called on update iff at least a single mouse event of the given type has occurred since last\r\n     * update.\r\n     * @param type - Mouse event type the handler is to be associated with.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    protected pushMouseEventHandler(type: MouseEventProvider.Type, handler: MouseEventHandler) {\r\n\r\n        if (!this._mouseEventHandlerByType.has(type)) {\r\n            this._mouseEventHandlerByType.set(type, new Array<MouseEventHandler>());\r\n\r\n            this._previousMouseEventsByType.set(type, new Array<MouseEvent>());\r\n            const latest = new Array<MouseEvent>();\r\n            this._latestMouseEventsByType.set(type, latest);\r\n\r\n            assert(this._mouseEventProvider !== undefined, `expected valid mouse event provider`);\r\n            const observable = (this._mouseEventProvider as MouseEventProvider).observable(type);\r\n\r\n            switch (type) {\r\n                case MouseEventProvider.Type.Wheel:\r\n                    this._subscriptions.push((observable as Observable<WheelEvent>).subscribe(\r\n                        (event) => { latest.push(event); this.invalidate(); }));\r\n                    break;\r\n                default:\r\n                    this._subscriptions.push((observable as Observable<MouseEvent>).subscribe(\r\n                        (event) => { latest.push(event); this.invalidate(); }));\r\n                    break;\r\n            }\r\n        }\r\n        (this._mouseEventHandlerByType.get(type) as Array<MouseEventHandler>).push(handler);\r\n    }\r\n\r\n    protected invokeMouseEventHandler(type: MouseEventProvider.Type) {\r\n        const handlers = this._mouseEventHandlerByType.get(type);\r\n        if (handlers === undefined || handlers.length === 0) {\r\n            return;\r\n        }\r\n        const latest = this._latestMouseEventsByType.get(type) as Array<MouseEvent>;\r\n        if (latest.length === 0) {\r\n            return;\r\n        }\r\n        const previous = this._previousMouseEventsByType.get(type) as Array<MouseEvent>;\r\n        handlers.forEach((handler) => handler(latest, previous));\r\n\r\n        Object.assign(previous, latest);\r\n        latest.length = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * Disposes all registered handlers of all event types.\r\n     */\r\n    dispose() {\r\n        this._latestMouseEventsByType.forEach((value) => value.length = 0);\r\n        this._previousMouseEventsByType.forEach((value) => value.length = 0);\r\n\r\n        for (const subscription of this._subscriptions) {\r\n            subscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggers (by means of a helper function) invocation of all registered handler of all event types.\r\n     */\r\n    update() {\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Click);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Enter);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Leave);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Down);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Up);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Move);\r\n        this.invokeMouseEventHandler(MouseEventProvider.Type.Wheel);\r\n    }\r\n\r\n\r\n    /**\r\n     * Normalize mouse and touch event coordinates for various browsers.\r\n     * @param event - Mouse, wheel, or touch event.\r\n     * @param normalize - Whether or not to compute normalized coordinates (offsets).\r\n     * @returns - Array of normalized x and y offsets (in case of multiple touches).\r\n     */\r\n    offsets(event: MouseEvent | WheelEvent | TouchEvent, normalize: boolean = true): Array<vec2> {\r\n        const offsets = new Array<vec2>();\r\n\r\n        if (event instanceof MouseEvent) {\r\n            const e = event as MouseEvent;\r\n            offsets.push(vec2.fromValues(e.clientX, e.clientY));\r\n\r\n        } else if (event instanceof WheelEvent) {\r\n            const e = event as WheelEvent;\r\n            offsets.push(vec2.fromValues(e.clientX, e.clientY));\r\n\r\n        } else if (event instanceof TouchEvent) {\r\n            const e = event as TouchEvent;\r\n            /* tslint:disable-next-line:prefer-for-of */\r\n            for (let i = 0; i < e.touches.length; ++i) {\r\n                const touch = e.touches[i];\r\n                offsets.push(vec2.fromValues(touch.clientX, touch.clientY));\r\n            }\r\n        }\r\n\r\n        const target = event.target || event.currentTarget || event.srcElement;\r\n        const rect = (target as HTMLElement).getBoundingClientRect();\r\n\r\n        for (const offset of offsets) {\r\n            offset[0] = Math.floor(offset[0] - rect.left);\r\n            offset[1] = Math.floor(offset[1] - rect.top);\r\n            if (normalize) {\r\n                vec2.scale(offset, offset, window.devicePixelRatio);\r\n            }\r\n        }\r\n        return offsets;\r\n    }\r\n\r\n\r\n    /**\r\n     * Register a click event handler that is to be called on update iff at least a single click event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushClickHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Click, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse enter event handler that is to be called on update iff at least a single mouse enter event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseEnterHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Enter, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse leave event handler that is to be called on update iff at least a single mouse leave event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseLeaveHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Leave, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse down event handler that is to be called on update iff at least a single mouse down event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseDownHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Down, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse up event handler that is to be called on update iff at least a single mouse up event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseUpHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Up, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse move event handler that is to be called on update iff at least a single mouse move event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseMoveHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Move, handler);\r\n    }\r\n\r\n    /**\r\n     * Register an mouse wheel event handler that is to be called on update iff at least a single mouse wheel event has\r\n     * occurred since last update.\r\n     * @param handler - Handler to be called on update.\r\n     */\r\n    pushMouseWheelHandler(handler: MouseEventHandler) {\r\n        this.pushMouseEventHandler(MouseEventProvider.Type.Wheel, handler);\r\n    }\r\n\r\n    requestPointerLock(): void {\r\n        if (this._mouseEventProvider) {\r\n            this._mouseEventProvider.pointerLock = true;\r\n        }\r\n    }\r\n\r\n    exitPointerLock(): void {\r\n        if (this._mouseEventProvider) {\r\n            this._mouseEventProvider.pointerLock = false;\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\n\r\nimport { GLsizei3 } from './tuples';\r\n\r\n\r\n/* tslint:disable:max-classes-per-file */\r\n\r\nexport interface KernelJSON {\r\n    kernel: any;\r\n    size: {\r\n        width: number,\r\n        height: number,\r\n        depth: number,\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Kernel class is based on the idea of glkernel {@link https://github.com/cginternals/glkernel} and is the basis for\r\n * various auxiliary kernels that are mainly intended for but not limited to GPU use. A kernel stores samples in a\r\n * three-dimensional structure. Each sample can have up to four components (vec4) and is strongly typed, e.g.,\r\n * {@link KernelF32}. The samples can be accessed and modified in various ways and easily passed to the GPU.\r\n */\r\nexport abstract class AbstractKernel<T extends Float32Array | Uint32Array | Int32Array | Uint8Array | Int8Array> {\r\n\r\n    protected _samples: T;\r\n\r\n    /** @see {@link width} */\r\n    protected _width: GLsizei;\r\n\r\n    /** @see {@link height} */\r\n    protected _height: GLsizei;\r\n\r\n    /** @see {@link depth} */\r\n    protected _depth: GLsizei;\r\n\r\n    /** @see {@link components} */\r\n    protected _components: 1 | 2 | 3 | 4;\r\n\r\n\r\n    constructor(components: 1 | 2 | 3 | 4, width: GLsizei, height: GLsizei = 1, depth: GLsizei = 1) {\r\n        this._components = components;\r\n        this._width = Math.max(1, width);\r\n        this._height = Math.max(1, height);\r\n        this._depth = Math.max(1, depth);\r\n\r\n        this.resize();\r\n    }\r\n\r\n    /**\r\n     * Should resize the samples array w.r.t. to the typed array buffer.\r\n     * The resulting array buffer may be empty.\r\n     */\r\n    protected abstract resize(): void;\r\n\r\n\r\n    /**\r\n     * Returns the n-tuple/n-component element at index within the cached kernel.\r\n     * @param xPosOrIndex - If x is greater than width, this is interpreted as overall kernel index (requires y and z\r\n     * positions to be undefined). Position is clamped to the range [0, width - 1].\r\n     * @param yPos - Position along the y-axis to access the kernel element at (clamped to range [0, height - 1]).\r\n     * @param zPos - Position along the z-axis to access the kernel element at (clamped to range [0, depth  - 1]).\r\n     * @returns - Tuple of all components of the element at the requested index/position.\r\n     */\r\n    get(xPosOrIndex: GLsizei, yPos?: GLsizei, zPos?: GLsizei): number[] {\r\n\r\n        let i: number;\r\n        if (yPos === undefined && zPos === undefined) {\r\n            i = this._components * xPosOrIndex;\r\n        } else {\r\n            i = this.index(xPosOrIndex, yPos, zPos ? zPos : 0);\r\n        }\r\n        logIf(i >= this.length, LogLevel.Dev, `index out of range [0, ${this.length}], given ${i}`);\r\n\r\n        /* tslint:disable-next-line:switch-default */\r\n        switch (this._components) {\r\n            case 1:\r\n                return [this._samples[i]];\r\n            case 2:\r\n                return [this._samples[i], this._samples[i + 1]];\r\n            case 3:\r\n                return [this._samples[i], this._samples[i + 1], this._samples[i + 2]];\r\n            case 4:\r\n                return [this._samples[i], this._samples[i + 1], this._samples[i + 2], this._samples[i + 3]];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the n-tuple/n-component sample at index within the cached kernel.\r\n     * @param sample - Values to be set at specified index or position.\r\n     * @param xPosOrIndex - If x is greater than width, this is interpreted as overall kernel index (requires y and z\r\n     * positions to be undefined). Position is clamped to the range [0, width - 1].\r\n     * @param yPos - Position along the y-axis to access the kernel element at (clamped to range [0, height - 1]).\r\n     * @param zPos - Position along the z-axis to access the kernel element at (clamped to range [0, depth  - 1]).\r\n     */\r\n    set(sample: number[], xPosOrIndex: GLsizei, yPos?: GLsizei, zPos?: GLsizei): void {\r\n        logIf(sample.length !== this._components, LogLevel.Dev,\r\n            `number of components expected to be ${this._components}, given ${sample.length}`);\r\n\r\n        let i: number;\r\n        if (yPos === undefined && zPos === undefined) {\r\n            i = this._components * Math.min(this.elements, Math.max(0, xPosOrIndex));\r\n        } else {\r\n            i = this._components * this.index(xPosOrIndex, yPos, zPos ? zPos : 0);\r\n        }\r\n        logIf(i >= this.length, LogLevel.Dev, `index out of range [0, ${this.length}], given ${i}`);\r\n\r\n        /* tslint:disable-next-line:switch-default */\r\n        switch (this._components) {\r\n            /* falls through */\r\n            case 4:\r\n                this._samples[i + 3] = sample[3];\r\n            /* falls through */\r\n            case 3:\r\n                this._samples[i + 2] = sample[2];\r\n            /* falls through */\r\n            case 2:\r\n                this._samples[i + 1] = sample[1];\r\n            /* falls through */\r\n            case 1:\r\n                this._samples[i + 0] = sample[0];\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Inheritor is expected to implement this in order to copy and type-convert a flat array.\r\n     * @param samples - Array of all sample components in a flat sequence.\r\n     */\r\n    abstract fromArray(samples: Array<number>): void;\r\n\r\n    /**\r\n     * Fully reconfigures, i.e., resizes and copies samples, the kernel.\r\n     * @param json - JSON object either from file, or set manually. These kernels can be generated using, e.g.,\r\n     * glkernel {@link https://github.com/cginternals/glkernel}.\r\n     */\r\n    fromJSON(json: KernelJSON): void {\r\n\r\n        assert(json.size && json.size.width !== undefined && json.size.height !== undefined &&\r\n            json.size.depth !== undefined, `expected kernel width, height, and depth to be set, given '${json.size}'`);\r\n\r\n        const flatten = (array: Array<number>): Array<number> => array.reduce(\r\n            (a: any, b: any) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\r\n\r\n        this._width = Math.max(1, json.size.width);\r\n        this._height = Math.max(1, json.size.height);\r\n        this._depth = Math.max(1, json.size.depth);\r\n\r\n        const array = flatten(json.kernel);\r\n        this._components = Math.floor(array.length / this.elements) as 1 | 2 | 3 | 4;\r\n\r\n        this.resize();\r\n        this.fromArray(array);\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns the index of an element at a specific position.\r\n     * @param xPos - Position along the x-axis (clamped to range [0, width  - 1]).\r\n     * @param yPos - Position along the y-axis (clamped to range [0, height - 1]).\r\n     * @param zPos - Position along the z-axis (clamped to range [0, depth  - 1]).\r\n     * @returns - The index of the element at the requested position.\r\n     */\r\n    index(xPos: GLsizei, yPos: GLsizei = 0, zPos: GLsizei = 0): GLsizei {\r\n        return this._width * (this._height * Math.min(this._depth, Math.max(0, zPos))\r\n            + Math.min(this._height, Math.max(0, yPos))) + Math.min(this._width, Math.max(0, xPos));\r\n    }\r\n\r\n    /**\r\n     * Returns the position of an element at a specific index.\r\n     * @param index - Index of the requested position (clamped to range [0, size]).\r\n     * @returns - The position of the element at the requested index as 3-tuple [x, y, z].\r\n     */\r\n    position(index: GLsizei): GLsizei3 {\r\n        let clamped = Math.min(this.elements, Math.max(0, index));\r\n        const zPos: GLsizei = Math.floor(clamped / (this._width * this._height));\r\n        clamped -= zPos * this._width * this._height;\r\n        const yPos: GLsizei = Math.floor(clamped / this._width);\r\n        clamped -= yPos * this._width;\r\n        const xPos: GLsizei = clamped;\r\n        return [xPos, yPos, zPos];\r\n    }\r\n\r\n\r\n    /**\r\n     * All elements/samples of the kernel as array buffer.\r\n     */\r\n    get samples(): T {\r\n        return this._samples;\r\n    }\r\n\r\n    /**\r\n     * Returns the number of samples, i.e., the number of elements times the number of components per element.\r\n     */\r\n    get length(): GLsizei {\r\n        return this._width * this._height * this._depth * this._components;\r\n    }\r\n\r\n    /**\r\n     * Returns the number of samples.\r\n     */\r\n    get elements(): GLsizei {\r\n        return this._width * this._height * this._depth;\r\n    }\r\n\r\n    /**\r\n     * Number of components per sample, e.g., 2 for 2-tuple samples, 3 for 3-tuple samples, etc.\r\n     */\r\n    get components(): GLsizei {\r\n        return this._components;\r\n    }\r\n\r\n    /**\r\n     * The width of the kernel (x-axis)\r\n     */\r\n    get width(): GLsizei {\r\n        return this._width;\r\n    }\r\n\r\n    /**\r\n     * The height of the kernel (y-axis)\r\n     */\r\n    get height(): GLsizei {\r\n        return this._height;\r\n    }\r\n\r\n    /**\r\n     * The depth of the kernel (z-axis)\r\n     */\r\n    get depth(): GLsizei {\r\n        return this._depth;\r\n    }\r\n\r\n    /**\r\n     * Distance between the indices of two adjacent elements along the x-axis in bytes.\r\n     */\r\n    get xStride(): GLsizei {\r\n        return this.bytesPerComponent * this._components;\r\n    }\r\n\r\n    /**\r\n     * Distance between the indices of two adjacent elements along the y-axis in bytes.\r\n     */\r\n    get yStride(): GLsizei {\r\n        return this.bytesPerComponent * this._components * this._width;\r\n    }\r\n\r\n    /**\r\n     * Distance between the indices of two adjacent elements along the z-axis in bytes.\r\n     */\r\n    get zStride(): GLsizei {\r\n        return this.bytesPerComponent * this._components * this._width * this._depth;\r\n    }\r\n\r\n    /**\r\n     * Length of all samples in bytes.\r\n     */\r\n    get bytesLength(): GLsizei {\r\n        return this.bytesPerComponent * this._components * this._width * this._height * this._depth;\r\n    }\r\n\r\n    /**\r\n     * Size of a sample's component in bytes.\r\n     */\r\n    abstract get bytesPerComponent(): GLsizei;\r\n\r\n}\r\n\r\n\r\nexport class KernelF32 extends AbstractKernel<Float32Array> {\r\n\r\n    protected resize(): void {\r\n        this._samples = new Float32Array(this.length);\r\n    }\r\n\r\n    /**\r\n     * Copies and converts samples to this kernels typed samples.\r\n     * @param samples - Flat array of all sample values.\r\n     */\r\n    fromArray(samples: Array<number>): void {\r\n        assert(samples.length === this.length, `expected samples length to match this kernel's length`);\r\n        this._samples.set(new Float32Array(samples));\r\n    }\r\n\r\n    get bytesPerComponent(): GLsizei {\r\n        return 4;\r\n    }\r\n}\r\n\r\n\r\nexport class KernelUI32 extends AbstractKernel<Uint32Array> {\r\n\r\n    protected resize(): void {\r\n        this._samples = new Uint32Array(this.length);\r\n    }\r\n\r\n    /**\r\n     * Copies and converts samples to this kernels typed samples.\r\n     * @param samples - Flat array of all sample values.\r\n     */\r\n    fromArray(samples: Array<number>): void {\r\n        assert(samples.length === this.length, `expected samples length to match this kernel's length`);\r\n        this._samples.set(new Uint32Array(samples));\r\n    }\r\n\r\n    get bytesPerComponent(): GLsizei {\r\n        return 4;\r\n    }\r\n}\r\n\r\nexport class KernelI32 extends AbstractKernel<Int32Array> {\r\n\r\n    protected resize(): void {\r\n        this._samples = new Int32Array(this.length);\r\n    }\r\n\r\n    /**\r\n     * Copies and converts samples to this kernels typed samples.\r\n     * @param samples - Flat array of all sample values.\r\n     */\r\n    fromArray(samples: Array<number>): void {\r\n        assert(samples.length === this.length, `expected samples length to match this kernel's length`);\r\n        this._samples.set(new Int32Array(samples));\r\n    }\r\n\r\n    get bytesPerComponent(): GLsizei {\r\n        return 4;\r\n    }\r\n}\r\n\r\n\r\nexport class KernelUI8 extends AbstractKernel<Uint8Array> {\r\n\r\n    protected resize(): void {\r\n        this._samples = new Uint8Array(this.length);\r\n    }\r\n\r\n    /**\r\n     * Copies and converts samples to this kernels typed samples.\r\n     * @param samples - Flat array of all sample values.\r\n     */\r\n    fromArray(samples: Array<number>): void {\r\n        assert(samples.length === this.length, `expected samples length to match this kernel's length`);\r\n        this._samples.set(new Uint8Array(samples));\r\n    }\r\n\r\n    get bytesPerComponent(): GLsizei {\r\n        return 4;\r\n    }\r\n}\r\n\r\nexport class KernelI8 extends AbstractKernel<Int8Array> {\r\n\r\n    protected resize(): void {\r\n        this._samples = new Int8Array(this.length);\r\n    }\r\n\r\n    /**\r\n     * Copies and converts samples to this kernels typed samples.\r\n     * @param samples - Flat array of all sample values.\r\n     */\r\n    fromArray(samples: Array<number>): void {\r\n        assert(samples.length === this.length, `expected samples length to match this kernel's length`);\r\n        this._samples.set(new Int8Array(samples));\r\n    }\r\n\r\n    get bytesPerComponent(): GLsizei {\r\n        return 4;\r\n    }\r\n}\r\n","\r\n\r\nimport { rand } from './auxiliaries';\r\nimport { KernelF32 } from './kernel';\r\n\r\n\r\n/**\r\n * Kernel providing random values in [-1,+1] for two components. The first sample is fixed at [0.0, 0.0] since the\r\n * kernel is intended for use of NDC offsets.\r\n *\r\n * Example for using this kernel:\r\n * ```\r\n * this._aaKernel.size = multiFrameNumber; // regenerates when multi-frame number changes\r\n * let ndcOffset = this._aaKernel.value(frameNumber);\r\n * ndcOffset[0] = ndcOffset[0] / this._intermediateFBO.width;\r\n * ndcOffset[1] = ndcOffset[1] / this._intermediateFBO.height;\r\n * ```\r\n */\r\nexport class RandomSquareKernel extends KernelF32 {\r\n\r\n    /**\r\n     * RandomSquareKernel is fixed to one-dimension (x-axis) and 2-components per sample.\r\n     * @param width - Width of the kernel along its x-axis.\r\n     */\r\n    constructor(width: GLsizei) {\r\n        super(2, width);\r\n        this.generate();\r\n    }\r\n\r\n    /**\r\n     * Generates for each sample random components in [-1.0, +1.0] except for the first.\r\n     */\r\n    protected generate(): void {\r\n        if (this.width > 0) {\r\n            this.set([0.0, 0.0], 0);\r\n        }\r\n        for (let i = 1; i < this.width; ++i) {\r\n            this.set([rand(-0.5, +0.5), rand(-0.5, +0.5)], i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * Seems to only work if the getter of this kernels width setter is redefined here.\r\n     */\r\n    get width(): GLsizei {\r\n        return this._width;\r\n    }\r\n\r\n    /**\r\n     * Changes the size of the kernel and triggers regeneration of all values.\r\n     */\r\n    set width(width: GLsizei) {\r\n        if (this._width === width) {\r\n            return;\r\n        }\r\n        this._width = width;\r\n        this.resize();\r\n        this.generate();\r\n    }\r\n\r\n}\r\n","\r\nimport { mat4, vec2, vec3 } from 'gl-matrix';\r\n\r\nimport { m4, v2, v3 } from './gl-matrix-extensions';\r\n\r\nimport { CameraModifier } from './cameramodifier';\r\n\r\n\r\n/**\r\n * Math for camera rotation based on the turntable metaphor. The rotation computed by an initial (@see startRotate) and\r\n * subsequent (@see updateRotate) event points and can be applied to a camera via an explicit update (@see update).\r\n * In contrast to the trackball, this metaphor is usually less confusing for non-professionals.\r\n */\r\nexport class TurntableModifier extends CameraModifier {\r\n\r\n    protected static readonly DEFAULT_SENSITIVITY = 0.002;\r\n\r\n\r\n    /**\r\n     * Current rotation matrix.\r\n     */\r\n    protected _rotation: mat4 = m4();\r\n\r\n    protected _maxAzimuth: number | undefined = +Math.PI * 0.5 - 1e-4;\r\n    protected _minAzimuth: number | undefined = -Math.PI * 0.5 + 1e-4;\r\n\r\n    protected _xAxisScreenSpace = v3();\r\n    protected _azimuth: number;\r\n\r\n\r\n    /** @see {@link sensitivity} */\r\n    protected _sensitivity: number = TurntableModifier.DEFAULT_SENSITIVITY;\r\n\r\n\r\n    /**\r\n     * Initiate a new turntable rotation at a specific event position.\r\n     * @param point - Position of the current event to derive the magnitude for rotation from.\r\n     */\r\n    initiate(point: vec2): void {\r\n        Object.assign(this._reference, this._camera);\r\n\r\n        /* Retrieve initial event position. */\r\n        this._initialPoint = point;\r\n\r\n        const centerToEye = vec3.sub(v3(), this._reference.eye, this._reference.center);\r\n        vec3.normalize(centerToEye, centerToEye);\r\n\r\n        this._xAxisScreenSpace = vec3.cross(v3(), [0.0, 1.0, 0.0], centerToEye);\r\n        this._azimuth = Math.acos(vec3.dot(centerToEye, [0.0, 1.0, 0.0]));\r\n        this._azimuth = Math.PI * 0.5 - this._azimuth;\r\n    }\r\n\r\n    /**\r\n     * Update the turntable rotation w.r.t. a specific event position.\r\n     * @param point - Position of the current event to derive the magnitude for rotation from.\r\n     */\r\n    process(point: vec2): void {\r\n        /* Retrieve current event positions. */\r\n        this._currentPoint = point;\r\n\r\n        const magnitudes = vec2.subtract(v2(), this._initialPoint, this._currentPoint);\r\n        vec2.scale(magnitudes, magnitudes, window.devicePixelRatio * this._sensitivity);\r\n\r\n        if (this._minAzimuth) {\r\n            magnitudes[1] = Math.min(this._azimuth - this._minAzimuth, magnitudes[1]);\r\n        }\r\n        if (this._maxAzimuth) {\r\n            magnitudes[1] = Math.max(this._azimuth - this._maxAzimuth, magnitudes[1]);\r\n        }\r\n\r\n        mat4.rotateY(this._rotation, m4(), magnitudes[0]);\r\n        mat4.rotate(this._rotation, this._rotation, magnitudes[1], this._xAxisScreenSpace);\r\n\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Actually applies the trackball rotation to the given camera.\r\n     */\r\n    update(): void {\r\n        if (this._camera === undefined) {\r\n            return;\r\n        }\r\n\r\n        /* Adjust for arbitrary camera center and rotate using quaternion based rotation. */\r\n        const T = mat4.fromTranslation(m4(), this._reference.center);\r\n        mat4.multiply(T, T, this._rotation);\r\n        mat4.translate(T, T, vec3.negate(v3(), this._reference.center));\r\n\r\n        const up = vec3.transformMat4(v3(), [0.0, 1.0, 0.0], this._rotation);\r\n        const eye = vec3.transformMat4(v3(), this._reference.eye, T);\r\n\r\n        this._camera.up = up;\r\n        this._camera.eye = eye;\r\n    }\r\n\r\n\r\n    /**\r\n     * Rotational sensitivity.\r\n     */\r\n    set sensitivity(sensitivity: number) {\r\n        this._sensitivity = sensitivity;\r\n    }\r\n\r\n    get sensitivity(): number {\r\n        return this._sensitivity;\r\n    }\r\n\r\n}\r\n","\r\nimport { mat4, quat, vec2, vec3 } from 'gl-matrix';\r\n\r\nimport { m4, v2, v3 } from './gl-matrix-extensions';\r\n\r\nimport { CameraModifier } from './cameramodifier';\r\n\r\n\r\n/**\r\n * Math for camera rotation based on the trackball metaphor. The rotation computed by an initial (@see startRotate) and\r\n * subsequent (@see updateRotate) event points and can be applied to a camera via an explicit update (@see update).\r\n */\r\nexport class TrackballModifier extends CameraModifier {\r\n\r\n    protected static readonly DEFAULT_SENSITIVITY = 0.002;\r\n\r\n\r\n    /**\r\n     * Current rotation matrix.\r\n     */\r\n    protected _rotation: mat4 = mat4.create();\r\n\r\n    /** @see {@link sensitivity} */\r\n    protected _sensitivity: number = TrackballModifier.DEFAULT_SENSITIVITY;\r\n\r\n\r\n    /**\r\n     * Initiate a new trackball rotation at a specific event position.\r\n     * @param point - Position of the current event to start the trackball rotation at.\r\n     */\r\n    initiate(point: vec2): void {\r\n        /* Retrieve initial event position. */\r\n        this._initialPoint = point;\r\n    }\r\n\r\n    /**\r\n     * Update the trackball rotation w.r.t. a specific event position.\r\n     * @param point - Position of the current event to continue/update the trackball rotation at.\r\n     */\r\n    process(point: vec2): void {\r\n        /* Retrieve current event positions. */\r\n        this._currentPoint = point;\r\n\r\n        const magnitudes = vec2.subtract(v2(), this._initialPoint, this._currentPoint);\r\n        vec2.scale(magnitudes, magnitudes, window.devicePixelRatio * this._sensitivity);\r\n\r\n        /* Rotation uses difference between two events, thus, initial position is reset. */\r\n        vec2.copy(this._initialPoint, this._currentPoint);\r\n\r\n        /* Create rotation with respect to arbitrary camera center and up vector. */\r\n        const centerToEye = vec3.sub(v3(), this._reference.eye, this._reference.center);\r\n        vec3.normalize(centerToEye, centerToEye);\r\n        const up = vec3.normalize(v3(), this._reference.up);\r\n\r\n        /* Create vertical rotation axis. */\r\n        const ortho = vec3.cross(v3(), centerToEye, up);\r\n        vec3.scale(up, up, magnitudes[1]);\r\n        vec3.scale(ortho, ortho, magnitudes[0]);\r\n\r\n        /* Create overall rotation axis for quaternion based rotation. */\r\n        const axis = vec3.cross(v3(), vec3.add(v3(), up, ortho), centerToEye);\r\n        vec3.normalize(axis, axis);\r\n\r\n        /* Create quaternion and modify rotation transformation. */\r\n        const q = quat.setAxisAngle(quat.create(), axis, vec2.len(magnitudes));\r\n        mat4.multiply(this._rotation, this._rotation, mat4.fromQuat(m4(), q));\r\n\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Actually applies the trackball rotation to the given camera.\r\n     */\r\n    update(): void {\r\n        if (this._camera === undefined) {\r\n            return;\r\n        }\r\n\r\n        /* Adjust for arbitrary camera center and rotate using quaternion based rotation. */\r\n        const T = mat4.fromTranslation(m4(), this._reference.center);\r\n        mat4.multiply(T, T, this._rotation);\r\n        mat4.translate(T, T, vec3.negate(v3(), this._reference.center));\r\n\r\n        const up = vec3.transformMat4(v3(), [0.0, 1.0, 0.0], this._rotation);\r\n        const eye = vec3.transformMat4(v3(), this._reference.eye, T);\r\n\r\n        this._camera.up = up;\r\n        this._camera.eye = eye;\r\n    }\r\n\r\n\r\n    /**\r\n     * Rotational sensitivity.\r\n     */\r\n    set sensitivity(sensitivity: number) {\r\n        this._sensitivity = sensitivity;\r\n    }\r\n\r\n    get sensitivity(): number {\r\n        return this._sensitivity;\r\n    }\r\n\r\n}\r\n","\r\nimport { mat4, vec2, vec3 } from 'gl-matrix';\r\n\r\nimport { m4, v3 } from './gl-matrix-extensions';\r\n\r\nimport { CameraModifier } from './cameramodifier';\r\n\r\n\r\n/**\r\n * Math for camera modification based on the first person metaphor.\r\n */\r\nexport class FirstPersonModifier extends CameraModifier {\r\n\r\n    protected static readonly DEFAULT_SENSITIVITY = 0.0008;\r\n\r\n\r\n    /**\r\n     * Current rotation matrix.\r\n     */\r\n    protected _rotation: mat4 = mat4.create();\r\n\r\n    /** @see {@link sensitivity} */\r\n    protected _sensitivity: number = FirstPersonModifier.DEFAULT_SENSITIVITY;\r\n\r\n\r\n    /**\r\n     * Initiate a new camera modification at a specific event position.\r\n     * @param point - Position of the current event to start the modification at.\r\n     */\r\n    initiate(point: vec2): void {\r\n        Object.assign(this._reference, this._camera);\r\n\r\n        /* Retrieve initial event position. */\r\n        this._initialPoint = point;\r\n    }\r\n\r\n    /**\r\n     * Update the ... .r.t. a specific event position.\r\n     * @param point - Position of the current event used to update the yaw and pitch.\r\n     */\r\n    process(point: vec2, movement?: vec2): void {\r\n        /* Current event position is always the same as initial, when pointer lock is active. */\r\n        this._currentPoint = point;\r\n\r\n        const magnitudes = vec2.create();\r\n        if (movement === undefined) {\r\n            vec2.subtract(magnitudes, this._initialPoint, this._currentPoint);\r\n        } else {\r\n            vec2.copy(magnitudes, movement);\r\n        }\r\n        vec2.scale(magnitudes, magnitudes, window.devicePixelRatio * this._sensitivity);\r\n\r\n        /* Difference between two subsequent events, thus, initial position is reset. */\r\n        vec2.copy(this._initialPoint, this._currentPoint);\r\n\r\n        const centerToEye = vec3.sub(v3(), this._reference.eye, this._reference.center);\r\n        vec3.normalize(centerToEye, centerToEye);\r\n        const strafe = vec3.cross(v3(), centerToEye, this._reference.up);\r\n\r\n        const yaw = mat4.fromRotation(m4(), -magnitudes[0], this._reference.up);\r\n        const pitch = mat4.fromRotation(m4(), magnitudes[1], strafe);\r\n\r\n        mat4.mul(this._rotation, pitch, yaw);\r\n\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Actually applies the trackball rotation to the given camera.\r\n     */\r\n    update(): void {\r\n        if (this._camera === undefined) {\r\n            return;\r\n        }\r\n\r\n        const T = mat4.fromTranslation(m4(), this._reference.eye);\r\n        mat4.multiply(T, T, this._rotation);\r\n        mat4.translate(T, T, vec3.negate(v3(), this._reference.eye));\r\n\r\n        // const up = vec3.transformMat4(v3(), [0.0, 1.0, 0.0], this._rotation);\r\n        // const eye = vec3.transformMat4(v3(), this._reference.eye, T);\r\n        const center = vec3.transformMat4(v3(), this._reference.center, T);\r\n\r\n\r\n        // this._camera.up = up;\r\n        // this._camera.eye = eye;\r\n        this._camera.center = center;\r\n\r\n        Object.assign(this._reference, this._camera);\r\n    }\r\n\r\n\r\n    /**\r\n     * Rotational sensitivity.\r\n     */\r\n    set sensitivity(sensitivity: number) {\r\n        this._sensitivity = sensitivity;\r\n    }\r\n\r\n    get sensitivity(): number {\r\n        return this._sensitivity;\r\n    }\r\n\r\n}\r\n","\r\nimport { mat4, vec3 } from 'gl-matrix';\r\nimport { m4 } from './gl-matrix-extensions';\r\n\r\nimport { DEG2RAD, log, LogLevel } from './auxiliaries';\r\nimport { GLsizei2 } from './tuples';\r\n\r\n\r\n/**\r\n * Virtual 3D camera specified by eye, center, up, fovy, near, far, and a viewport size. It provides access to cached\r\n * view, projection, and view projection matrices. Cached by means of whenever one of the attributes change, all\r\n * matrices are invalidated and recalculated only once and only when requested. Please note that eye denotes the\r\n * position in a virtual 3D scene and center denotes the position which is being looked at.\r\n */\r\nexport class Camera {\r\n\r\n    private static readonly DEFAULT_EYE: vec3 = vec3.fromValues(0.0, 0.0, 1.0);\r\n    private static readonly DEFAULT_CENTER: vec3 = vec3.fromValues(0.0, 0.0, 0.0);\r\n    private static readonly DEFAULT_UP: vec3 = vec3.fromValues(0.0, 1.0, 0.0);\r\n\r\n    private static readonly DEFAULT_FOVY = 45.0;\r\n\r\n    private static readonly DEFAULT_NEAR = 2.0;\r\n    private static readonly DEFAULT_FAR = 8.0;\r\n\r\n\r\n    /** @see {@link eye} */\r\n    protected _eye: vec3;\r\n\r\n    /** @see {@link center} */\r\n    protected _center: vec3;\r\n\r\n    /** @see {@link up} */\r\n    protected _up: vec3;\r\n\r\n    /** @see {@link fovy} */\r\n    protected _fovy = Camera.DEFAULT_FOVY;\r\n\r\n    /** @see {@link near} */\r\n    protected _near = Camera.DEFAULT_NEAR;\r\n\r\n    /** @see {@link far} */\r\n    protected _far = Camera.DEFAULT_FAR;\r\n\r\n    /** @see {@link viewport} */\r\n    protected _viewport: GLsizei2 = [1, 1];\r\n\r\n    /** @see {@link aspect} */\r\n    protected _aspect: GLfloat = 1.0;\r\n\r\n    /** @see {@link view} */\r\n    protected _view: mat4 | undefined;\r\n    /** @see {@link viewInverse} */\r\n    protected _viewInverse: mat4 | undefined | null;\r\n\r\n    /** @see {@link projection} */\r\n    protected _projection: mat4 | undefined;\r\n    /** @see {@link projectionInverse} */\r\n    protected _projectionInverse: mat4 | undefined | null;\r\n\r\n    /** @see {@link viewProjection} */\r\n    protected _viewProjection: mat4 | undefined;\r\n    /** @see {@link viewProjectionInverse} */\r\n    protected _viewProjectionInverse: mat4 | undefined | null;\r\n\r\n    /** @see {@link altered} */\r\n    protected _altered = false;\r\n\r\n\r\n    /**\r\n     * Computes a vertical field of view angle based on the display height and distance to eye. Since both parameters\r\n     * are highly dependent of the device, this function can only be used to derive a rough estimate for a reasonable\r\n     * field of view. Note that both parameters should be passed using the same unit, e.g., inch or centimeters.\r\n     * @param elementDisplayHeight - Height of an element on the display.\r\n     * @param eyeToDisplayDistance - Distance from the users eye to that element.\r\n     * @returns - Vertical field of view angle in radian.\r\n     */\r\n    static calculateFovY(elementDisplayHeight: number, eyeToDisplayDistance: number): number {\r\n        return Math.atan(elementDisplayHeight * 0.5 / eyeToDisplayDistance) * 2.0;\r\n    }\r\n\r\n    /**\r\n     * Constructor setting up the camera's eye, center and up vectors.\r\n     * @param eye - The viewpoint of the virtual camera\r\n     * @param center - The look-at point in the scene\r\n     * @param up - The up-vector of the virtual camera\r\n     */\r\n    constructor(eye?: vec3, center?: vec3, up?: vec3) {\r\n        this._eye = eye ? vec3.clone(eye) : vec3.clone(Camera.DEFAULT_EYE);\r\n        this._center = center ? vec3.clone(center) : vec3.clone(Camera.DEFAULT_CENTER);\r\n        this._up = up ? vec3.clone(up) : vec3.clone(Camera.DEFAULT_UP);\r\n    }\r\n\r\n\r\n    /**\r\n     * Invalidates derived matrices, i.e., view, projection, and view-projection. The view should be invalidated on\r\n     * eye, center, and up changes. The projection should be invalidated on fovy, viewport, near, and far changes.\r\n     * The view projection invalidates whenever either one or both view and projection are to be invalidated.\r\n     */\r\n    protected invalidate(invalidateView: boolean, invalidateProjection: boolean): void {\r\n        if (invalidateView) {\r\n            this._view = undefined;\r\n            this._viewInverse = undefined;\r\n        }\r\n        if (invalidateProjection) {\r\n            this._projection = undefined;\r\n            this._projectionInverse = undefined;\r\n        }\r\n        if (invalidateView || invalidateProjection) {\r\n            this._viewProjection = undefined;\r\n            this._viewProjectionInverse = undefined;\r\n        }\r\n        this._altered = true;\r\n    }\r\n\r\n    /**\r\n     * Position of the virtual camera in a virtual 3D scene, the point of view.\r\n     */\r\n    get eye(): vec3 {\r\n        return this._eye;\r\n    }\r\n\r\n    /**\r\n     * Sets the eye. Invalidates the view.\r\n     */\r\n    set eye(eye: vec3) {\r\n        if (vec3.equals(this._eye, eye)) {\r\n            return;\r\n        }\r\n        this._eye = vec3.clone(eye);\r\n        this.invalidate(true, false);\r\n    }\r\n\r\n    /**\r\n     * Look-at point into a virtual 3D scene.\r\n     */\r\n    get center(): vec3 {\r\n        return this._center;\r\n    }\r\n\r\n    /**\r\n     * Sets the center. Invalidates the view.\r\n     */\r\n    set center(center: vec3) {\r\n        if (vec3.equals(this._center, center)) {\r\n            return;\r\n        }\r\n        this._center = vec3.clone(center);\r\n        this.invalidate(true, false);\r\n    }\r\n\r\n    /**\r\n     * Up-vector of the virtual camera.\r\n     */\r\n    get up(): vec3 {\r\n        return this._up;\r\n    }\r\n\r\n    /**\r\n     * Sets the up vector. Invalidates the view.\r\n     */\r\n    set up(up: vec3) {\r\n        if (vec3.equals(this._up, up)) {\r\n            return;\r\n        }\r\n        this._up = vec3.clone(up);\r\n        this.invalidate(true, false);\r\n    }\r\n\r\n    /**\r\n     * Vertical field of view in degree.\r\n     */\r\n    get fovy(): GLfloat {\r\n        return this._fovy;\r\n    }\r\n\r\n    /**\r\n     * Sets the vertical field-of-view. Invalidates the projection.\r\n     */\r\n    set fovy(fovy: GLfloat) {\r\n        if (this._fovy === fovy) {\r\n            return;\r\n        }\r\n        this._fovy = fovy;\r\n        this.invalidate(false, true);\r\n    }\r\n\r\n    /**\r\n     * Distance of near-plane in view coordinates.\r\n     */\r\n    get near(): GLfloat {\r\n        return this._near;\r\n    }\r\n\r\n    /**\r\n     * Sets the distance to the near clipping plane. Invalidates the projection.\r\n     */\r\n    set near(near: GLfloat) {\r\n        if (this._near === near) {\r\n            return;\r\n        }\r\n        if (this._near >= this._far) {\r\n            log(LogLevel.Dev, `near expected to be smaller than far (${this._far}), given ${near}`);\r\n            return;\r\n        }\r\n        this._near = near;\r\n        this.invalidate(false, true);\r\n    }\r\n\r\n    /**\r\n     * Distance of far-plane in view coordinates.\r\n     */\r\n    get far(): GLfloat {\r\n        return this._far;\r\n    }\r\n\r\n    /**\r\n     * Sets the distance to the far clipping plane. Invalidates the projection.\r\n     */\r\n    set far(far: GLfloat) {\r\n        if (this._far === far) {\r\n            return;\r\n        }\r\n        if (this._near >= this._far) {\r\n            log(LogLevel.Dev, `far expected to be greater than near (${this._near}), given ${far}`);\r\n            return;\r\n        }\r\n        this._far = far;\r\n        this.invalidate(false, true);\r\n    }\r\n\r\n    /**\r\n     * Sets the viewport size. Invalidates the projection.\r\n     */\r\n    set viewport(size: GLsizei2) {\r\n        if (this._viewport[0] === size[0] && this._viewport[1] === size[1]) {\r\n            return;\r\n        }\r\n        this._viewport = size;\r\n        this.invalidate(false, true);\r\n    }\r\n\r\n    /**\r\n     * The size of the target viewport used to determine the aspect ratio for subsequent perspective matrix projection\r\n     * computation.\r\n     */\r\n    get viewport(): GLsizei2 {\r\n        return this._viewport;\r\n    }\r\n\r\n    /**\r\n     * Access to the viewport width.\r\n     */\r\n    get width(): GLsizei {\r\n        return this._viewport[0];\r\n    }\r\n\r\n    /**\r\n     * Access to the viewport height.\r\n     */\r\n    get height(): GLsizei {\r\n        return this._viewport[1];\r\n    }\r\n\r\n    /**\r\n     * Sets the aspect ratio (width over height). However, this is not derived from viewport to allow for\r\n     * differentiation between viewport size and scale.\r\n     */\r\n    set aspect(aspect: GLfloat) {\r\n        if (this._aspect === aspect) {\r\n            return;\r\n        }\r\n        this._aspect = aspect;\r\n    }\r\n\r\n    /**\r\n     * Computes the ratio of width over height (set explicitly for differentiation between viewport size and scale).\r\n     */\r\n    get aspect(): GLfloat {\r\n        return this._aspect;\r\n    }\r\n\r\n    /**\r\n     * Either returns the cached view matrix or derives the current one after invalidation and caches it.\r\n     */\r\n    get view(): mat4 {\r\n        if (this._view) { // return cached value\r\n            return this._view;\r\n        }\r\n        this._view = mat4.lookAt(m4(), this._eye, this._center, this._up);\r\n        return this._view;\r\n    }\r\n\r\n    /**\r\n     * Either returns the inverse cached view matrix or derives the current one after invalidation and caches it.\r\n     */\r\n    get viewInverse(): mat4 | null {\r\n        if (this._viewInverse !== undefined) { // return cached value\r\n            return this._viewInverse;\r\n        }\r\n        this._viewInverse = mat4.invert(m4(), this.view);\r\n        return this._viewInverse;\r\n    }\r\n\r\n    /**\r\n     * Either returns the cached projection matrix or derives the current one after invalidation and caches it.\r\n     */\r\n    get projection(): mat4 {\r\n        if (this._projection) { // return cached value\r\n            return this._projection;\r\n        }\r\n        this._projection = mat4.perspective(m4(), this.fovy * DEG2RAD, this.aspect, this.near, this.far);\r\n        return this._projection;\r\n    }\r\n\r\n    /**\r\n     * Either returns the cached inverse projection matrix or derives the current one after invalidation and caches it.\r\n     */\r\n    get projectionInverse(): mat4 | null {\r\n        if (this._projectionInverse !== undefined) { // return cached value\r\n            return this._projectionInverse;\r\n        }\r\n        this._projectionInverse = mat4.invert(m4(), this.projection);\r\n        return this._projectionInverse;\r\n    }\r\n\r\n    /**\r\n     * Returns the view projection matrix based on view and projection. This is also cached (since matrix\r\n     * multiplication is involved).\r\n     */\r\n    get viewProjection(): mat4 {\r\n        if (this._viewProjection) { // return cached value\r\n            return this._viewProjection;\r\n        }\r\n        this._viewProjection = mat4.multiply(m4(), this.projection, this.view);\r\n        return this._viewProjection;\r\n    }\r\n\r\n    /**\r\n     * Returns the inverse view projection matrix based on view and projection. This is also cached (since matrix\r\n     * multiplication is involved).\r\n     */\r\n    get viewProjectionInverse(): mat4 | null {\r\n        if (this._viewProjectionInverse !== undefined) { // return cached value\r\n            return this._viewProjectionInverse;\r\n        }\r\n        this._viewProjectionInverse = mat4.invert(m4(), this.viewProjection);\r\n        return this._viewProjectionInverse;\r\n    }\r\n\r\n    /**\r\n     * Whether or not any other public property has changed. Please note that the alteration status is detached from\r\n     * caching state of lazily computed properties.\r\n     */\r\n    get altered(): boolean {\r\n        return this._altered;\r\n    }\r\n\r\n    /**\r\n     * Intended for resetting alteration status.\r\n     */\r\n    set altered(status: boolean) {\r\n        this._altered = status;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { Context } from './context';\r\n\r\n\r\nexport type FramePrecisionString = 'float' | 'half' | 'byte' | 'auto';\r\n\r\n/**\r\n * This wizard provides means for non-trivial, context specific framebuffer setups, texture formats, etc.\r\n */\r\nexport class Wizard {\r\n\r\n    /**\r\n     * Queries the internal texture format matching the target format best for the given context. For 'auto' precision\r\n     * the format of maximum accuracy supported is returned.\r\n     * @param context - Wrapped gl context for function resolution (passed to all stages).\r\n     * @param target - Target format, e.g., gl.RGBA, used to find the supported precision/accuracy for.\r\n     * @param precision - Requested precision of the internal format: 'auto', 'float', 'half', 'byte'.\r\n     * @returns - 2-tuple containing the internal format and the type (required for some internal formats to work ...).\r\n     */\r\n    static queryInternalTextureFormat(context: Context, target: GLenum,\r\n        precision: FramePrecisionString): [GLenum, GLenum] {\r\n\r\n        const gl = context.gl;\r\n        const gl2facade = context.gl2facade;\r\n\r\n        /**\r\n         * In WebGL1 contexts, OES_texture_float always implies WEBGL_color_buffer_float and OES_texture_half_float\r\n         * implies EXT_color_buffer_half_float.\r\n         */\r\n        const floatWriteSupport = (context.isWebGL1 && context.supportsTextureFloat) ||\r\n            (context.isWebGL2 && context.supportsColorBufferFloat);\r\n        const halfWriteSupport = (context.isWebGL1 && context.supportsTextureHalfFloat) ||\r\n            (context.isWebGL2 && context.supportsColorBufferFloat);\r\n\r\n        let query = precision;\r\n        if (precision === 'auto') { /* Derive maximum supported write to texture/buffer format. */\r\n            query = floatWriteSupport ? 'float' : halfWriteSupport ? 'half' : 'byte';\r\n        }\r\n\r\n        let type: GLenum;\r\n        let internalFormatIndex: GLint; /* Utility index to reduce tuple return logic (see switch). */\r\n\r\n        /* Query type and, if required), enable extension. */\r\n        if (query === 'half' && halfWriteSupport) {\r\n            /* tslint:disable-next-line:no-unused-expression */\r\n            context.isWebGL2 ? context.colorBufferFloat : context.textureHalfFloat;\r\n            type = gl2facade.HALF_FLOAT;\r\n            internalFormatIndex = 1;\r\n        } else if ((query === 'float' || query === 'half') && floatWriteSupport) {\r\n            /* If not explicitly requested, fallback for half_float. */\r\n            /* tslint:disable-next-line:no-unused-expression */\r\n            context.isWebGL2 ? context.colorBufferFloat : context.textureFloat;\r\n            type = gl.FLOAT;\r\n            internalFormatIndex = 0;\r\n        } else {\r\n            type = gl.UNSIGNED_BYTE;\r\n            internalFormatIndex = 2;\r\n        }\r\n\r\n        /* In this case, no specialized internal formats are available. */\r\n        if (context.isWebGL1) {\r\n            return [target, type];\r\n        }\r\n\r\n        switch (target) {\r\n            case gl.RGBA:\r\n                return [[gl.RGBA32F, gl.RGBA16F, gl.RGBA8][internalFormatIndex], type];\r\n            case gl.RGB:\r\n                return [[gl.RGB32F, gl.RGB16F, gl.RGB8][internalFormatIndex], type];\r\n            default:\r\n                assert(false, `internal format querying is not yet supported for formats other than RGBA, RGB`);\r\n        }\r\n        return [gl.NONE, gl.NONE];\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * Wrapper for drawable objects by means of multiple vertex buffer that could be bound to a vertex array. If the\r\n * context supports vertex array objects either natively (webgl2) or by extension, the drawable buffer are bound\r\n * only once on initialization and only a single VAO bind and unbind is required for a rendering pass.\r\n *\r\n * The VertexArray can be used wrapped around any VertexBuffer interface:\r\n * ```\r\n * export class ScreenFillingTriangle extends VertexBuffer {\r\n * // ...\r\n *     bind(index: GLuint): void { ...  }\r\n *     unbind(index: GLuint): void { ... }\r\n *     draw(): void { ... }\r\n * }\r\n *\r\n * export class ScreenFillingTriangleVAO extends VertexArray<ScreenFillingTriangle> { }\r\n * ```\r\n *\r\n * With that the screen-filling triangle can be drawn as follows:\r\n * ```\r\n * this.someTriangleVAO.draw();\r\n * ```\r\n */\r\nexport class VertexArray extends AbstractObject<any> implements Bindable {\r\n\r\n    /**\r\n     * Default vertex array, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_VERTEX_ARRAY = undefined;\r\n\r\n\r\n    /**\r\n     * Flag to track one-time initialization (in case vertex arrays are supported).\r\n     */\r\n    protected _buffersBound = false;\r\n\r\n    /**\r\n     * The feature specific bind function. This is mapped on initialization either to native VAO bind, extension based\r\n     * VAO bind or directly to the drawable's bind.\r\n     */\r\n    protected _bind: () => void;\r\n    /**\r\n     * The feature specific unbind function. This is mapped on initialization either to native VAO unbind, extension\r\n     * based VAO unbind or directly to the drawable's unbind.\r\n     */\r\n    protected _unbind: () => void;\r\n\r\n\r\n    /**\r\n     * Depending on the context features, a vertex array object is created and the bind method is specified (either\r\n     * native, by extension, or none/direct bind).\r\n     * @param bindBOs - Function that should bind all VBOs and IBOs required for drawing.\r\n     * @param unbindBOs - Function that should unbind all VBOs and IBOs used for drawing.\r\n     */\r\n    protected create(bindBOs: () => void, unbindBOs: () => void): any /* WebGLVertexArrayObject */ | undefined {\r\n\r\n        if (this.context.isWebGL2 || this.context.supportsVertexArrayObject) {\r\n            const gl2facade = this.context.gl2facade;\r\n\r\n            this._object = gl2facade.createVertexArray();\r\n            /* note that gl.isVertexArray requires the vertex array to be bound */\r\n            this._valid = this._object !== undefined;\r\n\r\n            this._bind = () => {\r\n                gl2facade.bindVertexArray(this.object);\r\n                if (this._buffersBound) {\r\n                    return;\r\n                }\r\n                bindBOs();\r\n                this._buffersBound = true;\r\n            };\r\n            this._unbind = () => gl2facade.bindVertexArray(VertexArray.DEFAULT_VERTEX_ARRAY);\r\n\r\n        } else {\r\n            this._bind = () => bindBOs();\r\n            this._unbind = () => unbindBOs();\r\n            this._valid = true;\r\n        }\r\n\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * On deletion either the VAO is deleted (when VAOs are supported natively or by extension) or nothing happens. Note\r\n     * that the VAO does not own any of its associated buffers (which can be shared over multiple VAO instances or\r\n     * used directly).\r\n     */\r\n    protected delete(): void {\r\n        if (!this.context.isWebGL2 && !this.context.supportsVertexArrayObject) {\r\n            this._valid = false;\r\n            return;\r\n        }\r\n\r\n        assert(this._object !== undefined, `expected WebGLVertexArrayObject object`);\r\n        this._context.gl2facade.deleteVertexArray(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n\r\n        this._buffersBound = false;\r\n    }\r\n\r\n    /**\r\n     * Invokes the preset bind function.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(): void {\r\n        this._bind();\r\n    }\r\n\r\n    /**\r\n     * Invokes the preset unbind function.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(): void {\r\n        this._unbind();\r\n    }\r\n\r\n}\r\n","\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\n\r\nimport { assert, log, logIf, LogLevel } from './auxiliaries';\r\nimport { clamp } from './gl-matrix-extensions';\r\n\r\n\r\nexport interface Controllable {\r\n\r\n    /**\r\n     * Used to trigger an renderer update. Returns true iff rendering is invalidated and\r\n     * a new multi-frame should be rendered-\r\n     */\r\n    update(multiFrameNumber: number): boolean;\r\n\r\n    /**\r\n     * Used to prepare rendering of a multi-frame.\r\n     */\r\n    prepare(): void;\r\n\r\n    /**\r\n     * Used to trigger rendering of a single, intermediate frame.\r\n     */\r\n    frame(frameNumber: number): void;\r\n\r\n    /**\r\n     * Used to swap/blit frame from back to front buffer.\r\n     */\r\n    swap(): void;\r\n\r\n}\r\n\r\n\r\n/**\r\n * This class controls the rendering flow by means of triggering rendering of a well defined amount of frames\r\n * (multi-frame number) for frame accumulation. Single frame rendering is handled with a multi-frame number of 1. If a\r\n * full multi-frame is accumulated, rendering halts. The rendering is not intended to be controlled by owning objects,\r\n * but via invalidation from within the renderer instead. However, an explicit redraw of a full single or multi-frame\r\n * can be invoked by calling `update()`. Furthermore, when using multi-frame rendering, the renderer can be halted at a\r\n * specific frame by setting a debug-frame number.\r\n *\r\n * Terminology: a multi-frame is the final result after accumulating a number of intermediate frames (frame). The\r\n * number of intermediate frames is defined by the multi-frame number. For a multi-frame, the controller invokes the\r\n * `prepare` on a controllable first, followed by multiple `frame` and `swap` calls. Please note that the\r\n * adaptive batch mode is yet experimental (can be enabled using `batchSize`).\r\n */\r\n\r\nexport class Controller {\r\n\r\n    /**\r\n     * Number of intermediate frames that are rendered during one browser frame\r\n     */\r\n    protected _batchSize = 1;\r\n    set batch(size: number) {\r\n        log(LogLevel.Dev, `(adaptive) batch multi-frame rendering is experimental for now`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Toggle for debug outputs; if true control flow will be logged.\r\n     */\r\n    protected _debug = false;\r\n    set debug(value: boolean) {\r\n        this._debug = value;\r\n    }\r\n\r\n\r\n    /**\r\n     * @see {@link multiFrameNumber}\r\n     * This property can be observed, e.g., `aController.multiFrameNumberObservable.subscribe()`.\r\n     */\r\n    protected _multiFrameNumber = 1;\r\n    protected _multiFrameNumberSubject = new ReplaySubject<number>(1);\r\n\r\n    /**\r\n     * @see {@link debugFrameNumber}\r\n     * This property can be observed, e.g., `aController.debugFrameNumberObservable.subscribe()`.\r\n     */\r\n    protected _debugFrameNumber = 0;\r\n    protected _debugFrameNumberSubject = new ReplaySubject<number>(1);\r\n\r\n    /**\r\n     * @see {@link frameNumber}\r\n     * This property can be observed, e.g., `aController.frameNumberObservable.subscribe()`.\r\n     */\r\n    protected _frameNumber = 0;\r\n    protected _frameNumberSubject = new ReplaySubject<number>(1);\r\n\r\n\r\n    /**\r\n     * Controllable, e.g., an instance of a Renderer.\r\n     */\r\n    protected _controllable: Controllable | undefined;\r\n\r\n\r\n    /**\r\n     * Holds the handle of the pending animate frame request, if requested. Throughout the controller, only a single\r\n     * request at a time is allowed.\r\n     */\r\n    protected _pendingRequest = 0;\r\n\r\n    /**\r\n     * Stores the controller's pause state.\r\n     */\r\n    protected _pause = false;\r\n\r\n    /**\r\n     * Blocking updates can be used to re-configure the controller without triggering\r\n     */\r\n    protected _block = false;\r\n\r\n    /**\r\n     * Number of update requested while being in blocked mode. If there is one or more blocked requests, an update will\r\n     * be triggered when unblocked.\r\n     */\r\n    protected _blockedUpdates = 0;\r\n\r\n\r\n    /* Debug and  reporting facilities. */\r\n\r\n    /**\r\n     * Total number of rendered intermediate frames.\r\n     */\r\n    protected _intermediateFrameCount = 0;\r\n\r\n    /**\r\n     * Total number of completed multi-frames.\r\n     */\r\n    protected _multiFrameCount = 0;\r\n\r\n    /**\r\n     * Time tracker used to the minimum and maximum frame time of an intermediate frame (per multi-frame).\r\n     */\r\n    protected _intermediateFrameTimes = new Array<number>(2);\r\n    /**\r\n     * Time tracker used to accumulate all durations of executed frame and swap callbacks per multi-frame. This is the\r\n     * net rendering time and is used to derive the average frame time.\r\n     */\r\n    protected _multiFrameTime: number;\r\n    /**\r\n     * Time tracker used to capture the time the update callback took.\r\n     */\r\n    protected _updateFrameTime: number;\r\n\r\n    /**\r\n     * Used to measure the gross rendering time of a multi-frame. The first point in time denotes the start of the\r\n     * rendering, the second, the point in time the last frame was rendered.\r\n     *\r\n     * Note: point in times might be shifted due to (un)pausing. Their intent is to allow measuring the rendering\r\n     * duration, nothing else.\r\n     */\r\n    protected _multiTime: Array<number> = [0.0, 0.0];\r\n\r\n    /**\r\n     * Point in time when the pause started. This is used to shift the gross rendering time measurement in _multiTime.\r\n     */\r\n    protected _pauseTime: number | undefined;\r\n\r\n\r\n    /**\r\n     * Triggers a frame invocation before the browser repaints. If no rendering callback is setup, the request\r\n     * is ignored.\r\n     */\r\n    protected request(type?: Controller.RequestType): void {\r\n        /**\r\n         * Prevent unnecessary canceling and requesting of animation frames when updating multiple times before an\r\n         * actual first frame is triggered.\r\n         */\r\n        if (this._pendingRequest !== 0) {\r\n            logIf(this._debug, LogLevel.ModuleDev, `c request (ignored) | pending: '${this._pendingRequest}'`);\r\n            return;\r\n        }\r\n        if (this._pause || !this._controllable) {\r\n            logIf(this._debug, LogLevel.ModuleDev, `c request (ignored) | pending: '${this._pendingRequest}'`);\r\n            return;\r\n        }\r\n        logIf(this._debug, LogLevel.ModuleDev, `c request           | intermediates: #${this._frameNumber}`);\r\n\r\n        const dfnum = this._debugFrameNumber;\r\n        const mfnum = this._multiFrameNumber;\r\n\r\n        assert(dfnum <= mfnum, `debug-frame number exceeds multi-frame number`);\r\n        assert(this._pendingRequest === 0, `another request is pending, cannot invoke multiple requests`);\r\n\r\n        if (dfnum > 0 && this._frameNumber >= dfnum) {\r\n            this.pause();\r\n        }\r\n\r\n        const numRemainingIntermediates = Math.max((dfnum > 0 ? dfnum : mfnum) - this._frameNumber, 0);\r\n\r\n        if (type !== undefined) {\r\n            this._pendingRequest = window.requestAnimationFrame(() => this.invoke(type));\r\n        } else if (numRemainingIntermediates > 0) {\r\n            this._pendingRequest = window.requestAnimationFrame(() => this.invoke(Controller.RequestType.Frame));\r\n        } else if (dfnum === mfnum || dfnum === 0) {\r\n            ++this._multiFrameCount;\r\n        }\r\n    }\r\n\r\n    protected reset(): boolean {\r\n        const block = this._block || (this._frameNumber === 0 && this._pendingRequest);\r\n        logIf(this._debug, LogLevel.ModuleDev, `c update  ${block ? '(blocked) ' : '          '}| ` +\r\n            `pending: '${this._pendingRequest}', intermediates: #${this._frameNumber}`);\r\n\r\n        if (block) {\r\n            ++this._blockedUpdates;\r\n            return true;\r\n        }\r\n        this.cancel();\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Cancel a pending frame invocation (if existing).\r\n     */\r\n    protected cancel(): void {\r\n        if (this._pendingRequest === 0) {\r\n            logIf(this._debug, LogLevel.ModuleDev, `c cancel  (ignored) |`);\r\n            return;\r\n        }\r\n        logIf(this._debug, LogLevel.ModuleDev, `c cancel            | pending: '${this._pendingRequest}'`);\r\n\r\n        window.cancelAnimationFrame(this._pendingRequest);\r\n        this._pendingRequest = 0;\r\n    }\r\n\r\n    protected invoke(type: Controller.RequestType) {\r\n        assert(this._pendingRequest !== 0, `manual/explicit invocation not anticipated`);\r\n        assert(this._controllable !== undefined, `expected valid controllable for invocation`);\r\n\r\n        this._pendingRequest = 0;\r\n\r\n        /* tslint:disable-next-line:switch-default */\r\n        switch (type) {\r\n            case Controller.RequestType.Update:\r\n                this.invokeUpdate(false);\r\n                break;\r\n            case Controller.RequestType.NonOptionalUpdate:\r\n                this.invokeUpdate(true);\r\n                break;\r\n            case Controller.RequestType.Prepare:\r\n                this.invokePrepare();\r\n                break;\r\n            case Controller.RequestType.Frame:\r\n                this.invokeFrame();\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected invokeUpdate(force: boolean = false): void {\r\n        logIf(this._debug, LogLevel.ModuleDev, `c invoke update     | ` +\r\n            `pending: '${this._pendingRequest}', mfnum: ${this._multiFrameNumber}`);\r\n\r\n        this.unblock();\r\n        assert(!this._pause, `updates should not be invoked when paused`);\r\n\r\n        const redraw: boolean = (this._controllable as Controllable).update(this._multiFrameNumber);\r\n        if (force || redraw) {\r\n            this.invokePrepare();\r\n            return;\r\n        }\r\n        this.invokeFrame();\r\n    }\r\n\r\n    /**\r\n     * Actual invocation of the controllable's prepare method\r\n     */\r\n    protected invokePrepare(): void {\r\n        logIf(this._debug, LogLevel.ModuleDev, `c invoke prepare    |`);\r\n\r\n        this._frameNumber = 0;\r\n\r\n        this._pause = false;\r\n        this._pauseTime = undefined;\r\n\r\n        this._multiFrameTime = 0.0;\r\n        this._intermediateFrameTimes[0] = Number.MAX_VALUE;\r\n        this._intermediateFrameTimes[1] = Number.MIN_VALUE;\r\n\r\n        /* Trigger preparation of a new multi-frame and measure execution time. */\r\n        this._multiTime[0] = performance.now();\r\n        (this._controllable as Controllable).prepare();\r\n        this._multiTime[1] = performance.now();\r\n\r\n        const updateDuration = this._multiTime[1] - this._multiTime[0];\r\n        this._multiFrameTime = updateDuration;\r\n        this._updateFrameTime = updateDuration;\r\n\r\n        this.invokeFrame();\r\n    }\r\n\r\n    /**\r\n     * Invokes rendering of an intermediate frame, increments the frame counter, and requests rendering of the next\r\n     * frame. The rendering is invoked by means of a callback to the canvas renderer. This function implements various\r\n     * asserts to assure correct control logic and absolutely prevent unnecessary frame requests.\r\n     */\r\n    protected invokeFrame(): void {\r\n        assert(!this._pause, `frames should not be invoked when paused`);\r\n        logIf(this._debug, LogLevel.ModuleDev, `c invoke frame      | pending: '${this._pendingRequest}'`);\r\n\r\n        const dfnum = this._debugFrameNumber;\r\n        const mfnum = this._multiFrameNumber;\r\n\r\n        if (this._frameNumber === mfnum) {\r\n            return;\r\n        }\r\n\r\n        const debug = dfnum > 0;\r\n        assert(!debug || this._frameNumber < dfnum, `frame number about to exceed debug-frame number`);\r\n\r\n        assert(this._controllable !== undefined, `update invoked without controllable set`);\r\n\r\n\r\n        /* Trigger an intermediate frame and measure and accumulate execution time for average frame time. This should\r\n        be the only place, any renderer frame method is invoked. */\r\n\r\n        const t0 = performance.now();\r\n\r\n        let batchEnd = Math.min(this._multiFrameNumber, this._frameNumber + this._batchSize);\r\n        if (this._debugFrameNumber > 0) {\r\n            batchEnd = Math.min(batchEnd, this._debugFrameNumber);\r\n        }\r\n\r\n        for (; this._frameNumber < batchEnd; ++this._frameNumber) {\r\n            logIf(this._debug, LogLevel.ModuleDev, `c -> frame          | frame: ${this._frameNumber}`);\r\n            (this._controllable as Controllable).frame(this._frameNumber);\r\n            ++this._intermediateFrameCount;\r\n        }\r\n        logIf(this._debug, LogLevel.ModuleDev, `c -> swap           |`);\r\n\r\n        (this._controllable as Controllable).swap();\r\n        this._multiTime[1] = performance.now();\r\n\r\n        /* Note: critical call sequence; be careful when changing the following lines. */\r\n\r\n        const frameDuration = this._multiTime[1] - t0;\r\n        this._multiFrameTime += frameDuration;\r\n\r\n        /* Keep track of minimum and maximum intermediate frame durations. */\r\n        this._intermediateFrameTimes[0] = Math.min(this._intermediateFrameTimes[0], frameDuration);\r\n        /* Note that the first frame is probably the slowest due to lazy initialization of stages/passes. */\r\n        this._intermediateFrameTimes[1] = Math.max(this._intermediateFrameTimes[1], frameDuration);\r\n\r\n        this.frameNumberNext();\r\n\r\n        this.request();\r\n    }\r\n\r\n\r\n    /**\r\n     * Utility for communicating this._multiFrameNumber changes to its associated subject.\r\n     */\r\n    protected multiFrameNumberNext(): void {\r\n        this._multiFrameNumberSubject.next(this._multiFrameNumber);\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._debugFrameNumber changes to its associated subject.\r\n     */\r\n    protected debugFrameNumberNext(): void {\r\n        this._debugFrameNumberSubject.next(this._debugFrameNumber);\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._frameNumber changes to its associated subject.\r\n     */\r\n    protected frameNumberNext(): void {\r\n        this._frameNumberSubject.next(this._frameNumber);\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets pause state to true which affects subsequent requests. Any pending requests are canceled.\r\n     */\r\n    pause(): void {\r\n        const ignore = this._pause;\r\n        logIf(this._debug, LogLevel.ModuleDev, `c pause   ${ignore ? '(ignored)' : ''}`);\r\n\r\n        if (this._pause) {\r\n            return;\r\n        }\r\n        this._pause = true;\r\n        this._pauseTime = performance.now();\r\n\r\n        this.cancel();\r\n    }\r\n\r\n    /**\r\n     * Sets pause state to false which affects subsequent requests. Furthermore, a request is invoked.\r\n     */\r\n    unpause(): void {\r\n        const ignore = !this._pause;\r\n        logIf(this._debug, LogLevel.ModuleDev, `c unpause ${ignore ? '(ignored)' : ''}`);\r\n\r\n        if (ignore) {\r\n            return;\r\n        }\r\n        this._pause = false;\r\n\r\n        if (this._pauseTime !== undefined && !isNaN(this._pauseTime)) {\r\n            /* Subtract paused time from multi-frame time. */\r\n            const pauseDelay = performance.now() - this._pauseTime;\r\n            this._multiTime[0] += pauseDelay;\r\n\r\n            /* Note: this is just in case the fps is gathered while a request is pending. */\r\n            this._multiTime[1] += pauseDelay;\r\n        }\r\n        this.request();\r\n    }\r\n\r\n    /**\r\n     * Resets multi-frame rendering by restarting at the first frame. If paused, this unpauses the controller.\r\n     * If updates where blocked using ```block```, block updates is disabled.\r\n     */\r\n    update(force: boolean = false): void {\r\n        if (this.reset()) {\r\n            return;\r\n        }\r\n        this.request(force ? Controller.RequestType.NonOptionalUpdate : Controller.RequestType.Update);\r\n    }\r\n\r\n    prepare(): void {\r\n        if (this.reset()) {\r\n            return;\r\n        }\r\n        this.request(Controller.RequestType.Prepare);\r\n    }\r\n\r\n\r\n    /**\r\n     * Block implicit updates, e.g., caused by various setters. This can be used to reconfigure the controller without\r\n     * triggering to multiple intermediate updates. The block updates mode can be exited using ``unblock```.\r\n     */\r\n    block(): void {\r\n        logIf(this._debug, LogLevel.ModuleDev, `c block   ${this._block ? '(ignored) ' : '          '}|`);\r\n\r\n        if (this._block) {\r\n            return;\r\n        }\r\n        this._block = true;\r\n    }\r\n\r\n    /**\r\n     * Unblock updates. If there was at least one blocked update request, an immediate update is invoked.\r\n     */\r\n    unblock(): void {\r\n        logIf(this._debug, LogLevel.ModuleDev, `c unblock ${!this._block ? '(ignored) ' : '          '}` +\r\n            `| blocked: #${this._blockedUpdates}`);\r\n\r\n        if (!this._block) {\r\n            return;\r\n        }\r\n        this._block = false;\r\n        if (this._blockedUpdates > 0) {\r\n            this._blockedUpdates = 0;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns whether or not the control is paused.\r\n     * @returns - True if paused, else false.\r\n     */\r\n    get paused(): boolean {\r\n        return this._pause;\r\n    }\r\n\r\n    /**\r\n     * Returns whether or not the control is blocking updates.\r\n     * @returns - True if blocked, else false.\r\n     */\r\n    get blocked(): boolean {\r\n        return this._block;\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets the controllable, for which updates, frames, and swaps are invoked whenever rendering is\r\n     * invalidated and an updated multi-frame is required. Swap is detached from frame since rendering an intermediate\r\n     * frame is usually done offscreen and explicit swap control can be useful.\r\n     * @param controllable - Controllable for update, frame, and swap invocation.\r\n     */\r\n    set controllable(controllable: Controllable | undefined) {\r\n        if (controllable === this._controllable) {\r\n            return;\r\n        }\r\n        this._controllable = controllable;\r\n        this.update();\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns the multi-frame number. The number is greater than or equal to zero. Multi-frame number is implemented\r\n     * as a property and allows for change callback.\r\n     * @returns - Multi-frame number.\r\n     */\r\n    get multiFrameNumber(): number {\r\n        return this._multiFrameNumber;\r\n    }\r\n\r\n    /**\r\n     * Changes the multi-frame number. If the provided value equals the current number set, nothing happens. If the\r\n     * provided value is negative, the multi-frame number is set to 1.\r\n     * @param multiFrameNumber - The multi-frame number targeted for rendering.\r\n     */\r\n    set multiFrameNumber(multiFrameNumber: number) {\r\n        const value: number = Math.max(1, isNaN(multiFrameNumber) ? 1 : multiFrameNumber);\r\n        if (value === this._multiFrameNumber) {\r\n            return;\r\n        }\r\n\r\n        this._multiFrameNumber = value;\r\n        this.multiFrameNumberNext();\r\n\r\n        logIf(value !== multiFrameNumber, LogLevel.ModuleDev,\r\n            `multi-frame number adjusted to ${value}, given ${multiFrameNumber}`);\r\n\r\n        if (this.debugFrameNumber > this.multiFrameNumber) {\r\n            this.debugFrameNumber = this.multiFrameNumber;\r\n        } else {\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to multi-frame number changes.\r\n     */\r\n    get multiFrameNumberObservable(): Observable<number> {\r\n        return this._multiFrameNumberSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns the debug-frame number greater than or equal to zero.\r\n     * @returns - Debug-frame number.\r\n     */\r\n    get debugFrameNumber(): number {\r\n        return this._debugFrameNumber;\r\n    }\r\n\r\n    /**\r\n     * Sets the debug.-frame number (debug number) that, if greater than zero, causes the rendering to halt when the\r\n     * current frame number (frame number) equals the debug number. Debugging can be disabled by setting the debug\r\n     * number to zero.\r\n     *\r\n     * If the debug number is greater than the frame number rendering is restarted by means of an update(). If the\r\n     * debug number is less than the frame number the rendering continues and halts accordingly. If the debug number\r\n     * equals the current debug number set, nothing happens. If the debug number is greater than the multi-frame\r\n     * number, it is reduced to the multi-frame number.\r\n     *\r\n     * Note: in contrast to setting the multi-frame number, setting the debug-frame number unpauses the controller.\r\n     *\r\n     * @param debugFrameNumber - Debug-frame number.\r\n     */\r\n    set debugFrameNumber(debugFrameNumber: number) {\r\n        const value: number = clamp(isNaN(debugFrameNumber) ? 0 : debugFrameNumber, 0, this.multiFrameNumber);\r\n        if (value === this._debugFrameNumber) {\r\n            return;\r\n        }\r\n\r\n        this._debugFrameNumber = value;\r\n        this.debugFrameNumberNext();\r\n\r\n        logIf(value !== debugFrameNumber, LogLevel.ModuleDev,\r\n            `debug-frame number adjusted to ${value}, given ${debugFrameNumber}`);\r\n\r\n        if (this._block) {\r\n            return;\r\n        }\r\n\r\n        if (this.debugFrameNumber < this._frameNumber) {\r\n            this.prepare();\r\n        } else if (!this._pendingRequest) {\r\n            this.unpause();\r\n            this.request();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to debug-frame number changes.\r\n     */\r\n    get debugFrameNumberObservable(): Observable<number> {\r\n        return this._debugFrameNumberSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * The current multi-frame number; it is less than or equal to the multi-frame number and enumerates the last\r\n     * rendered frame. Note that this does not denote the number of 'completed' multi-frames rendered (not a continuous\r\n     * frame count).\r\n     * @returns - The current (intermediate) frame number.\r\n     */\r\n    get frameNumber(): number {\r\n        return this._frameNumber;\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to frame number changes.\r\n     */\r\n    get frameNumberObservable(): Observable<number> {\r\n        return this._frameNumberSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns the total number of rendered (requested and probably completed) intermediate frames.\r\n     * @returns - The total number of intermediate frames rendered.\r\n     */\r\n    get intermediateFrameCount(): number {\r\n        return this._intermediateFrameCount;\r\n    }\r\n\r\n    /**\r\n     * Returns the total number of completed multi-frames.\r\n     * @returns - The total number of multi-frames completed.\r\n     */\r\n    get multiFrameCount(): number {\r\n        return this._multiFrameCount;\r\n    }\r\n\r\n    /**\r\n     * Provides the average time it takes to render an intermediate frame within the current displayed multi-frame (if\r\n     * a new multi-frame is triggered, the average frame time is reset).\r\n     * @returns - Average frame time (intermediate frame rendering) in ms\r\n     */\r\n    get averageFrameTime(): number {\r\n        return this._frameNumber === 0 ? 0.0 : this._multiFrameTime / this._frameNumber;\r\n    }\r\n\r\n    /**\r\n     * Provides the update time tracked for the current multi-frame.\r\n     * @returns - Time of the multi-frame update (before first intermediate frame is rendered) in ms\r\n     */\r\n    get updateFrameTime(): number {\r\n        return this._updateFrameTime;\r\n    }\r\n\r\n    /**\r\n     * Provides the minimum rendering time tracked over all intermediate frames of the current multi-frame.\r\n     * @returns - Minimum intermediate frame time in ms\r\n     */\r\n    get minimumFrameTime(): number {\r\n        return this._intermediateFrameTimes[0];\r\n    }\r\n\r\n    /**\r\n     * Provides the maximum rendering time tracked over all intermediate frames of the current multi-frame. Note that\r\n     * the maximum frame time is most often caused by the first intermediate frame within a multi-frame due to lazy\r\n     * stage initialization or reconfiguration.\r\n     * @returns - Maximum intermediate frame time in ms\r\n     */\r\n    get maximumFrameTime(): number {\r\n        return this._intermediateFrameTimes[1];\r\n    }\r\n\r\n    /**\r\n     * The time in milliseconds that passed since the current multi-frame (up to the current frame number) was\r\n     * requested. This time excludes time spent paused (e.g., caused by halting rendering at debug-frame number).\r\n     * Note that this is not a measure of frame rendering performance. The number of frame requests per second might be\r\n     * limited to 60Hz even though the rendering of an intermediate frame takes only a few milliseconds.\r\n     * @returns - Time passed for current multi-frame in milliseconds.\r\n     */\r\n    get multiFrameTime(): number {\r\n        return this._frameNumber === 0 ? 0.0 : this._multiTime[1] - this._multiTime[0];\r\n    }\r\n\r\n    /**\r\n     * The frames per second is based on the average number of a full intermediate frame request up to the current\r\n     * frame number.\r\n     * @returns - Number of frames per second based on the current multi-frame\r\n     */\r\n    get framesPerSecond(): number {\r\n        return this._frameNumber === 0 ? 0.0 : 1000.0 / (this.multiFrameTime / this._frameNumber);\r\n    }\r\n\r\n}\r\n\r\n\r\nexport namespace Controller {\r\n\r\n    export enum RequestType { Update, NonOptionalUpdate, Prepare, Frame }\r\n\r\n}\r\n","\r\nimport { assert, log, LogLevel } from './auxiliaries';\r\n\r\nimport { clamp } from './gl-matrix-extensions';\r\n\r\nimport { clampf, clampf3, clampf4, duplicate4, equals4, GLclampf3, GLclampf4, GLclampf5 } from './tuples';\r\n\r\n\r\n/**\r\n * Color class that allows for specification and conversion of colors in various color spaces. Please not that most of\r\n * the color conversion math is based on  {@link https://www.easyrgb.com/en/math.php}. The internal color representation\r\n * is a 4-tuple of GLclampf components in RGB color space and additional alpha. All color conversion, e.g., getters is\r\n * computed on the fly, not cached, and is not optimized for, e.g., massive pixel processing.\r\n */\r\nexport class Color {\r\n\r\n    protected static readonly DEFAULT_ALPHA: GLclampf = 1.0;\r\n    protected static readonly HEX_FORMAT_REGEX = new RegExp(/^(#|0x)?(([0-9a-f]{3}){1,2}|([0-9a-f]{4}){1,2})$/i);\r\n\r\n    protected _rgba: GLclampf4 = [0.0, 0.0, 0.0, Color.DEFAULT_ALPHA];\r\n\r\n\r\n    /** @see {@link altered} */\r\n    protected _altered = false;\r\n\r\n\r\n    /**\r\n     * Converts a hue value into an rgb value.\r\n     */\r\n    protected static hue2rgb(p: GLfloat, q: GLfloat, t: GLfloat) {\r\n        assert(t >= -1.0 && t <= 2.0, `t is expected to be between -1 and 2`);\r\n        if (t < 0.0) {\r\n            t += 1.0;\r\n        } else if (t > 1.0) {\r\n            t -= 1.0;\r\n        }\r\n\r\n        if ((6.0 * t) < 1.0) {\r\n            return p + (q - p) * 6.0 * t;\r\n        }\r\n        if ((2.0 * t) < 1.0) {\r\n            return q;\r\n        }\r\n        if ((3.0 * t) < 2.0) {\r\n            return p + (q - p) * 6.0 * (2.0 / 3.0 - t);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    /**\r\n     * Converts a float value to two-character HEX code.\r\n     * @param value - A float value in [0.0, 1.0].\r\n     * @returns - Two-character hexadecimal representation in [00, FF].\r\n     */\r\n    protected static to2CharHexCode(value: number): string {\r\n        return (value < 15.5 / 255.0 ? '0' : '') + Math.round(value * 255.0).toString(16);\r\n    }\r\n\r\n    /**\r\n     * Converts a color from HSL space to RGB space.\r\n     * @param hsl - HSL color tuple: hue, saturation, and lightness, each in [0.0, 1.0].\r\n     * @returns - RGB color tuple: red, green, and blue, each in [0.0, 1.0].\r\n     */\r\n    static hsl2rgb(hsl: GLclampf3): GLclampf3 {\r\n        const hslF = clampf3(hsl, 'HSL input');\r\n\r\n        if (hslF[1] === 0.0) {\r\n            return [hslF[2], hslF[2], hslF[2]];\r\n        }\r\n\r\n        const q = hslF[2] < 0.5 ? hslF[2] * (1.0 + hslF[1]) : (hslF[2] + hslF[1]) - (hslF[1] * hslF[2]);\r\n        const p = 2.0 * hslF[2] - q;\r\n\r\n        return [Color.hue2rgb(p, q, hslF[0] + (1.0 / 3.0))\r\n            , Color.hue2rgb(p, q, hslF[0]), Color.hue2rgb(p, q, hslF[0] - (1.0 / 3.0))];\r\n    }\r\n\r\n    /**\r\n     * Converts a color from HSL space to RGB space.\r\n     * @param rgb - RGB color tuple: red, green, and blue, each in [0.0, 1.0].\r\n     * @returns - HSL color tuple: hue, saturation, and lightness, each in [0.0, 1.0].\r\n     */\r\n    static rgb2hsl(rgb: GLclampf3): GLclampf3 {\r\n        const rgbF = clampf3(rgb, 'RGB input');\r\n        const hsl: GLclampf3 = [0.0, 0.0, 0.0];\r\n\r\n        const min = Math.min(rgbF[0], rgbF[1], rgbF[2]);\r\n        const max = Math.max(rgbF[0], rgbF[1], rgbF[2]);\r\n        const delta = max - min;\r\n\r\n        hsl[2] = (max + min) * 0.5;\r\n\r\n        if (delta === 0.0) {\r\n            return hsl;\r\n        }\r\n\r\n        hsl[1] = hsl[2] < 0.5 ? delta / (max + min) : delta / (2.0 - max - min);\r\n\r\n        const deltaR = (((max - rgbF[0]) / 6.0) + (delta / 2.0)) / delta;\r\n        const deltaG = (((max - rgbF[1]) / 6.0) + (delta / 2.0)) / delta;\r\n        const deltaB = (((max - rgbF[2]) / 6.0) + (delta / 2.0)) / delta;\r\n\r\n        if (rgbF[0] === max) {\r\n            hsl[0] = deltaB - deltaG;\r\n        } else if (rgbF[1] === max) {\r\n            hsl[0] = deltaR - deltaB + (1.0 / 3.0);\r\n        } else { // if (rgbF[2] === max) {\r\n            hsl[0] = deltaG - deltaR + (2.0 / 3.0);\r\n        }\r\n        return hsl;\r\n    }\r\n\r\n\r\n    /**\r\n     * Converts a color from LAB space to XYZ space.\r\n     * @param lab - LAB color tuple: lightness, greenRed, and blueYellow, each in [0.0, 1.0].\r\n     * @returns - XYZ color tuple: x, y, and z, each in [0.0, 1.0].\r\n     */\r\n    static lab2xyz(lab: GLclampf3): GLclampf3 {\r\n        const labF = clampf3(lab, 'LAB input');\r\n\r\n        const yr = (labF[0] * 100.0 + 16.0) / 116.0;\r\n        const xr = labF[1] * 100 / 500.0 + yr;\r\n        const zr = yr - labF[2] * 100 / 200.0;\r\n\r\n        const yr3 = yr * yr * yr;\r\n        const xr3 = xr * xr * xr;\r\n        const zr3 = zr * zr * zr;\r\n\r\n        /* D65/2° illuminant for XYZ conversion */\r\n        const y = 1.00000 * (yr3 > 0.008856 ? yr3 : (yr - 16.0 / 116.0) / 7.787);\r\n        const x = 0.95047 * (xr3 > 0.008856 ? xr3 : (xr - 16.0 / 116.0) / 7.787);\r\n        const z = 1.08883 * (zr3 > 0.008856 ? zr3 : (zr - 16.0 / 116.0) / 7.787);\r\n\r\n        return [x, y, z];\r\n    }\r\n\r\n    /**\r\n     * Converts a color from XYZ space to LAB space.\r\n     * @param xyz - XYZ color tuple: x, y, and z, each in [0.0, 1.0].\r\n     * @returns - LAB color tuple: lightness, greenRed, and blueYellow, each in [0.0, 1.0].\r\n     */\r\n    static xyz2lab(xyz: GLclampf3): GLclampf3 {\r\n        // DO NOT CLAMP! const xyzF = clampf3(xyz, 'XYZ input');\r\n        const xyzF = [xyz[0] / 0.95047, xyz[1] * 1.00000, xyz[2] / 1.08883];\r\n\r\n        /* implicit illuminant of [1.0, 1.0, 1.0] assumed */\r\n        const x = xyzF[0] > 0.008856 ? Math.pow(xyzF[0], 1.0 / 3.0) : (7.787 * xyzF[0]) + (16.0 / 116.0);\r\n        const y = xyzF[1] > 0.008856 ? Math.pow(xyzF[1], 1.0 / 3.0) : (7.787 * xyzF[1]) + (16.0 / 116.0);\r\n        const z = xyzF[2] > 0.008856 ? Math.pow(xyzF[2], 1.0 / 3.0) : (7.787 * xyzF[2]) + (16.0 / 116.0);\r\n\r\n        return clampf3([\r\n            0.01 * (116.0 * y - 16.0),\r\n            0.01 * (500.0 * (x - y)),\r\n            0.01 * (200.0 * (y - z))]);\r\n    }\r\n\r\n\r\n    /**\r\n     * Converts a color from XYZ space to Adobe-RGB space.\r\n     * @param xyz - XYZ color tuple: x, y, and z, and refer to the D65/2° illuminant.\r\n     * @returns - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     */\r\n    static xyz2rgb(xyz: GLclampf3): GLclampf3 {\r\n        // DO NOT CLAMP! const xyzF = clampf3(xyz, 'XYZ input');\r\n\r\n        const r = xyz[0] * +2.04159 + xyz[1] * -0.56501 + xyz[2] * -0.34473;\r\n        const g = xyz[0] * -0.96924 + xyz[1] * +1.87597 + xyz[2] * +0.04156;\r\n        const b = xyz[0] * +0.01344 + xyz[1] * -0.11836 + xyz[2] * +1.01517;\r\n\r\n        return clampf3([\r\n            Math.pow(r, 1.0 / 2.19921875),\r\n            Math.pow(g, 1.0 / 2.19921875),\r\n            Math.pow(b, 1.0 / 2.19921875)]);\r\n\r\n        // Standard-RGB\r\n        // let r = xyz[0] * +3.2406 + xyz[1] * -1.5372 + xyz[2] * -0.4986;\r\n        // let g = xyz[0] * -0.9689 + xyz[1] * +1.8758 + xyz[2] * +0.0415;\r\n        // let b = xyz[0] * +0.0557 + xyz[1] * -0.2040 + xyz[2] * +1.0570;\r\n\r\n        // r = r > 0.0031308 ? 1.055 * Math.pow(r, 1.0 / 2.4) - 0.055 : 12.92 * r;\r\n        // g = g > 0.0031308 ? 1.055 * Math.pow(g, 1.0 / 2.4) - 0.055 : 12.92 * g;\r\n        // b = b > 0.0031308 ? 1.055 * Math.pow(b, 1.0 / 2.4) - 0.055 : 12.92 * b;\r\n        // return [r, g, b];\r\n    }\r\n\r\n    /**\r\n     * Converts a color from Adobe-RGB space to XYZ space.\r\n     * @param rgb - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     * @returns - XYZ color tuple: x, y, and z, each in [0.0, 1.0].\r\n     */\r\n    static rgb2xyz(rgb: GLclampf3): GLclampf3 {\r\n        const rgbF = clampf3(rgb, 'RGB input');\r\n\r\n        const r = Math.pow(rgbF[0], 2.19921875);\r\n        const g = Math.pow(rgbF[1], 2.19921875);\r\n        const b = Math.pow(rgbF[2], 2.19921875);\r\n\r\n        const x = r * 0.57667 + g * 0.18556 + b * 0.18823;\r\n        const y = r * 0.29734 + g * 0.62736 + b * 0.07529;\r\n        const z = r * 0.02703 + g * 0.07069 + b * 0.99134;\r\n        return [x, y, z];\r\n    }\r\n\r\n\r\n    /**\r\n     * Converts a color from LAB space to RGB space.\r\n     * @param lab - LAB color tuple: lightness, greenRed, and blueYellow, each in [0.0, 1.0].\r\n     * @returns - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     */\r\n    static lab2rgb(lab: GLclampf3): GLclampf3 {\r\n        return Color.xyz2rgb(Color.lab2xyz(lab));\r\n    }\r\n\r\n    /**\r\n     * Converts a color from RGB space to LAB space.\r\n     * @param lab - LAB color tuple: lightness, greenRed, and blueYellow, each in [0.0, 1.0].\r\n     * @returns - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     */\r\n    static rgb2lab(rgb: GLclampf3): GLclampf3 {\r\n        return Color.xyz2lab(Color.rgb2xyz(rgb));\r\n    }\r\n\r\n\r\n    /**\r\n     * Converts a color from CMYK space to RGB space.\r\n     * @param cmyk - CMYK color tuple: cyan, magenta, yellow, and key, each in [0.0, 1.0].\r\n     * @returns - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     */\r\n    static cmyk2rgb(cmyk: GLclampf4): GLclampf3 {\r\n        const cmykF = clampf4(cmyk, 'CMYK input');\r\n\r\n        const k = 1.0 - cmykF[3];\r\n        return [(1.0 - cmykF[0]) * k, (1.0 - cmykF[1]) * k, (1.0 - cmykF[2]) * k];\r\n    }\r\n\r\n    /**\r\n     * Converts a color from RGB space to CMYK space.\r\n     * @param rgb - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     * @returns - CMYK color tuple: cyan, magenta, yellow, and key, each in [0.0, 1.0].\r\n     */\r\n    static rgb2cmyk(rgb: GLclampf3): GLclampf4 {\r\n        const rgbF = clampf3(rgb, 'RGB input');\r\n\r\n        const k1 = 1.0 - Math.max(rgbF[0], rgbF[1], rgbF[2]);\r\n        const k2 = 1.0 - k1;\r\n        const k3 = k2 === 0.0 ? 0.0 : 1.0 / k2;\r\n        return [(k2 - rgbF[0]) * k3, (k2 - rgbF[1]) * k3, (k2 - rgbF[2]) * k3, k1];\r\n    }\r\n\r\n\r\n    /**\r\n     * Converts a color from HEX string to RGBA space. The hex string can start with '#' or '0x' or neither of these.\r\n     * @param hex - Hexadecimal color string: red, green, and blue, each in ['00', 'ff'].\r\n     * @returns - RGBA color tuple: red, green, blue, and alpha, each in [0.0, 1.0]. On error [0, 0, 0, 0] is returned.\r\n     */\r\n    static hex2rgba(hex: string): GLclampf4 {\r\n        const rgba: GLclampf4 = [0.0, 0.0, 0.0, Color.DEFAULT_ALPHA];\r\n\r\n        if (!Color.HEX_FORMAT_REGEX.test(hex)) {\r\n            log(LogLevel.User, `hexadecimal RGBA color string must conform to either \\\r\n'0x0000', '#0000', '0000', '0x00000000', '#00000000', or '00000000', given '${hex}'`);\r\n            return rgba;\r\n        }\r\n\r\n        const offset = hex.startsWith('0x') ? 2 : hex.startsWith('#') ? 1 : 0;\r\n        const length = Math.floor((hex.length - offset) / 3);\r\n        const stride = length - 1;\r\n\r\n        rgba[0] = parseInt(hex[offset + 0 * length] + hex[offset + 0 * length + stride], 16) / 255.0;\r\n        rgba[1] = parseInt(hex[offset + 1 * length] + hex[offset + 1 * length + stride], 16) / 255.0;\r\n        rgba[2] = parseInt(hex[offset + 2 * length] + hex[offset + 2 * length + stride], 16) / 255.0;\r\n        if ((hex.length - offset) === 4 || (hex.length - offset) === 8) {\r\n            rgba[3] = parseInt(hex[offset + 3 * length] + hex[offset + 3 * length + stride], 16) / 255.0;\r\n        }\r\n\r\n        assert(!isNaN(rgba[0]) && !isNaN(rgba[1]) && !isNaN(rgba[2]) && !isNaN(rgba[3]),\r\n            `expected well formated hexadecimal RGBA string, given '${hex}'`);\r\n        return rgba;\r\n    }\r\n\r\n    /**\r\n     * Converts a color from RGB space to HEX string.\r\n     * @param rgb - RGB color tuple: red, green, and blue, each in [0.0, 1.0]\r\n     * @returns - Hexadecimal color string: red, green, and blue, each in ['00', 'ff'], with '#' prefix\r\n     */\r\n    static rgb2hex(rgb: GLclampf3): string {\r\n        const rgbF = clampf3(rgb, 'RGB input');\r\n\r\n        const r = Color.to2CharHexCode(rgbF[0]);\r\n        const g = Color.to2CharHexCode(rgbF[1]);\r\n        const b = Color.to2CharHexCode(rgbF[2]);\r\n        return '#' + r + g + b;\r\n    }\r\n\r\n    /**\r\n     * Converts a color from RGBA space to HEX string.\r\n     * @param rgba - RGBA color tuple: red, green, blue, and alpha, each in [0.0, 1.0]\r\n     * @returns - Hexadecimal color string: red, green, blue, and alpha, each in ['00', 'ff'], with '#' prefix\r\n     */\r\n    static rgba2hex(rgba: GLclampf4): string {\r\n        const rgbaF = clampf4(rgba, 'RGBA input');\r\n\r\n        const r = Color.to2CharHexCode(rgbaF[0]);\r\n        const g = Color.to2CharHexCode(rgbaF[1]);\r\n        const b = Color.to2CharHexCode(rgbaF[2]);\r\n        const a = Color.to2CharHexCode(rgbaF[3]);\r\n        return '#' + r + g + b + a;\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of color (a 4-tuple in RGBA space).\r\n     * @param rgba - Either RGB tuple or RGBA tuple. If none is provided, default will be kept.\r\n     * @param alpha - If RGB tuple is provided an additional alpha value can be specified.\r\n     */\r\n    constructor(rgba?: GLclampf3 | GLclampf4, alpha?: GLclampf) {\r\n        if (rgba === undefined) {\r\n            return;\r\n        }\r\n        if (rgba.length === 3 && alpha !== undefined) {\r\n            this.fromF32(rgba[0], rgba[1], rgba[2], alpha);\r\n        } else if (rgba.length === 4) {\r\n            this.fromF32(rgba[0], rgba[1], rgba[2], rgba[3]);\r\n            assert(alpha === undefined, `expected alpha to be undefined when given an 4-tuple in RGBA`);\r\n        } else {\r\n            this.fromF32(rgba[0], rgba[1], rgba[2]);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Checks whether or not this color matches a second color (based on internal rgba floating representation).\r\n     * @param other - Color to compare color values to.\r\n     * @returns - True iff both colors have the exact same rgba floating point values.\r\n     */\r\n    equals(other: Color): boolean {\r\n        return equals4<GLclampf>(this._rgba, other._rgba);\r\n    }\r\n\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a color in float (32bit) RGBA colors.\r\n     * @param red - Red color component in [0.0, 1.0]\r\n     * @param green - Green color component in [0.0, 1.0]\r\n     * @param blue - Blue color component in [0.0, 1.0]\r\n     * @param alpha - Alpha color component in [0.0, 1.0]\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromF32(red: GLfloat, green: GLfloat, blue: GLfloat, alpha: GLfloat = Color.DEFAULT_ALPHA): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        this._rgba[0] = clampf(red, `red value`);\r\n        this._rgba[1] = clampf(green, `green value`);\r\n        this._rgba[2] = clampf(blue, `blue value`);\r\n        this._rgba[3] = clampf(alpha, `alpha value`);\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a color in unsigned int (8bit) RGBA colors.\r\n     * @param red - Red color component in [0, 255]\r\n     * @param green - Green color component in [0, 255]\r\n     * @param blue - Blue color component in [0, 255]\r\n     * @param alpha - Alpha color component in [0, 255]\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromUI8(red: GLubyte, green: GLubyte, blue: GLubyte,\r\n        alpha: GLubyte = Math.floor(Color.DEFAULT_ALPHA * 255)): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        this._rgba[0] = clamp(red, 0, 255) / 255.0;\r\n        this._rgba[1] = clamp(green, 0, 255) / 255.0;\r\n        this._rgba[2] = clamp(blue, 0, 255) / 255.0;\r\n        this._rgba[3] = clamp(alpha, 0, 255) / 255.0;\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a color in HSL color space.\r\n     * @param hue - Hue color component in [0.0, 1.0]\r\n     * @param saturation - Saturation color component in [0.0, 1.0]\r\n     * @param lightness - Lightness color component in [0.0, 1.0]\r\n     * @param alpha - Alpha color component in [0.0, 1.0]\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromHSL(hue: GLclampf, saturation: GLclampf, lightness: GLclampf,\r\n        alpha: GLclampf = Color.DEFAULT_ALPHA): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        const rgb = Color.hsl2rgb([hue, saturation, lightness]);\r\n        const alphaf = clampf(alpha, 'ALPHA input');\r\n\r\n        this._rgba = [rgb[0], rgb[1], rgb[2], alphaf];\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a color in CIE-Lab color space.\r\n     * @param lightness - Lightness color component in [0.0, 1.0]\r\n     * @param greenRed - Green-Red/a color component in [0.0, 1.0]\r\n     * @param blueYellow - Blue-Yellow/b color component in [0.0, 1.0]\r\n     * @param alpha - Alpha color component in [0.0, 1.0]\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromLAB(lightness: GLclampf, greenRed: GLclampf, blueYellow: GLclampf,\r\n        alpha: GLclampf = Color.DEFAULT_ALPHA): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        const rgb = Color.lab2rgb([lightness, greenRed, blueYellow]);\r\n        const alphaf = clampf(alpha, 'ALPHA input');\r\n\r\n        this._rgba = [rgb[0], rgb[1], rgb[2], alphaf];\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a color in CMYK color space.\r\n     * @param cyan - Cyan color component in [0.0, 1.0]\r\n     * @param magenta - Magenta color component in [0.0, 1.0]\r\n     * @param yellow - Yellow color component in [0.0, 1.0]\r\n     * @param key - Key/Black color component in [0.0, 1.0]\r\n     * @param alpha - Alpha color component in [0.0, 1.0]\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromCMYK(cyan: GLclampf, magenta: GLclampf, yellow: GLclampf, key: GLclampf,\r\n        alpha: GLclampf = Color.DEFAULT_ALPHA): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        const rgb = Color.cmyk2rgb([cyan, magenta, yellow, key]);\r\n        const alphaf = clampf(alpha, 'ALPHA input');\r\n\r\n        this._rgba = [rgb[0], rgb[1], rgb[2], alphaf];\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Specifies the internal rgba store using a hexadecimal color string.\r\n     * @param hex - Hexadecimal color string: red, green, blue, and alpha (optional) each in ['00', 'ff'].\r\n     * @returns - The color instance (this).\r\n     */\r\n    fromHex(hex: string): Color {\r\n        const previous = duplicate4<GLclampf>(this._rgba);\r\n\r\n        this._rgba = Color.hex2rgba(hex);\r\n\r\n        this._altered = !equals4<GLclampf>(this._rgba, previous);\r\n        return this;\r\n    }\r\n\r\n\r\n    gray(algorithm: Color.GrayscaleAlgorithm = Color.GrayscaleAlgorithm.LinearLuminance): GLclampf {\r\n\r\n        switch (algorithm) {\r\n\r\n            /* does not represent shades of grayscale w.r.t. human perception of luminosity. */\r\n            case Color.GrayscaleAlgorithm.Average:\r\n                return (this._rgba[0] + this._rgba[1] + this._rgba[2]) / 3.0;\r\n\r\n            /* flat (reduced contrast) and dark grayscale */\r\n            case Color.GrayscaleAlgorithm.LeastSaturatedVariant:\r\n                return (Math.max(this._rgba[0], this._rgba[1], this._rgba[2])\r\n                    - Math.min(this._rgba[0], this._rgba[1], this._rgba[2])) * 0.5;\r\n\r\n            /* provides a darker grayscale */\r\n            case Color.GrayscaleAlgorithm.MinimumDecomposition:\r\n                return Math.min(this._rgba[0], this._rgba[1], this._rgba[2]);\r\n\r\n            /* provides a brighter grayscale */\r\n            case Color.GrayscaleAlgorithm.MaximumDecomposition:\r\n                return Math.max(this._rgba[0], this._rgba[1], this._rgba[2]);\r\n\r\n            case Color.GrayscaleAlgorithm.LinearLuminance:\r\n            /* falls through */\r\n            default:\r\n                return this._rgba[0] * 0.2126 + this._rgba[1] * 0.7152 + this._rgba[2] * 0.0722;\r\n        }\r\n    }\r\n\r\n\r\n    get rgb(): GLclampf3 {\r\n        return [this._rgba[0], this._rgba[1], this._rgba[2]];\r\n    }\r\n\r\n    get rgbUI8(): Uint8Array {\r\n        const ui8Array = new Uint8Array(3);\r\n        ui8Array[0] = Math.round(this._rgba[0] * 255.0);\r\n        ui8Array[1] = Math.round(this._rgba[1] * 255.0);\r\n        ui8Array[2] = Math.round(this._rgba[2] * 255.0);\r\n        return ui8Array;\r\n    }\r\n\r\n    get rgbF32(): Float32Array {\r\n        const f32Array = new Float32Array(3);\r\n        f32Array[0] = this._rgba[0];\r\n        f32Array[1] = this._rgba[1];\r\n        f32Array[2] = this._rgba[2];\r\n        return f32Array;\r\n    }\r\n\r\n    get rgba(): GLclampf4 {\r\n        return this._rgba;\r\n    }\r\n\r\n    get rgbaUI8(): Uint8Array {\r\n        const ui8Array = new Uint8Array(4);\r\n        ui8Array[0] = Math.round(this._rgba[0] * 255.0);\r\n        ui8Array[1] = Math.round(this._rgba[1] * 255.0);\r\n        ui8Array[2] = Math.round(this._rgba[2] * 255.0);\r\n        ui8Array[3] = Math.round(this._rgba[3] * 255.0);\r\n        return ui8Array;\r\n    }\r\n\r\n    get rgbaF32(): Float32Array {\r\n        return new Float32Array(this._rgba);\r\n    }\r\n\r\n    get r(): GLclampf {\r\n        return this._rgba[0];\r\n    }\r\n\r\n    get g(): GLclampf {\r\n        return this._rgba[1];\r\n    }\r\n\r\n    get b(): GLclampf {\r\n        return this._rgba[2];\r\n    }\r\n\r\n    get a(): GLclampf {\r\n        return this._rgba[3];\r\n    }\r\n\r\n\r\n    get hexRGB(): string {\r\n        return Color.rgb2hex(this.rgb);\r\n    }\r\n\r\n    get hexRGBA(): string {\r\n        return Color.rgba2hex(this._rgba);\r\n    }\r\n\r\n\r\n    get hsl(): GLclampf3 {\r\n        return Color.rgb2hsl(this.rgb);\r\n    }\r\n\r\n    get hsla(): GLclampf4 {\r\n        const hsl = Color.rgb2hsl(this.rgb);\r\n        return [hsl[0], hsl[1], hsl[2], this._rgba[3]];\r\n    }\r\n\r\n\r\n    get lab(): GLclampf3 {\r\n        return Color.rgb2lab(this.rgb);\r\n    }\r\n\r\n    get laba(): GLclampf4 {\r\n        const lab = Color.rgb2lab(this.rgb);\r\n        return [lab[0], lab[1], lab[2], this._rgba[3]];\r\n    }\r\n\r\n\r\n    get cmyk(): GLclampf4 {\r\n        return Color.rgb2cmyk(this.rgb);\r\n    }\r\n\r\n    get cmyka(): GLclampf5 {\r\n        const cmyk = Color.rgb2cmyk(this.rgb);\r\n        return [cmyk[0], cmyk[1], cmyk[2], cmyk[3], this._rgba[3]];\r\n    }\r\n\r\n    /**\r\n     * Whether or not color value has changed.\r\n     */\r\n    get altered(): boolean {\r\n        return this._altered;\r\n    }\r\n\r\n    /**\r\n     * Intended for resetting alteration status.\r\n     */\r\n    set altered(status: boolean) {\r\n        this._altered = status;\r\n    }\r\n\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport namespace Color {\r\n\r\n    export enum GrayscaleAlgorithm {\r\n        Average,\r\n        LinearLuminance, /* CIE1931 */\r\n        LeastSaturatedVariant,\r\n        MinimumDecomposition,\r\n        MaximumDecomposition,\r\n    }\r\n}\r\n","\r\n\r\n/** Namespace that comprises extensions by WebGL version (also cleans up documentation). */\r\nnamespace extensions {\r\n\r\n    /**\r\n     * All extensions specified for WebGL. This array is used to verify extension queries in WebGL contexts. Most of\r\n     * these extensions should not be queried in WebGL2.\r\n     */\r\n    export const WEBGL1_EXTENSIONS: Array<string> = [\r\n\r\n        'ANGLE_instanced_arrays',\r\n\r\n        'EXT_blend_minmax',\r\n        'EXT_color_buffer_half_float',\r\n        'EXT_disjoint_timer_query',\r\n        'EXT_frag_depth',\r\n        'EXT_sRGB',\r\n        'EXT_shader_texture_lod',\r\n        'EXT_texture_filter_anisotropic',\r\n\r\n        'OES_element_index_uint',\r\n        'OES_standard_derivatives',\r\n        'OES_texture_float',\r\n        'OES_texture_float_linear',\r\n        'OES_texture_half_float',\r\n        'OES_texture_half_float_linear',\r\n        'OES_vertex_array_object',\r\n\r\n        'WEBGL_color_buffer_float',\r\n        'WEBGL_compressed_texture_astc',\r\n        'WEBGL_compressed_texture_atc',\r\n        'WEBGL_compressed_texture_etc',\r\n        'WEBGL_compressed_texture_etc1',\r\n        'WEBGL_compressed_texture_pvrtc',\r\n        'WEBGL_compressed_texture_s3tc',\r\n        'WEBGL_compressed_texture_s3tc_srgb',\r\n        'WEBGL_debug_renderer_info',\r\n        'WEBGL_debug_shaders',\r\n        'WEBGL_depth_texture',\r\n        'WEBGL_draw_buffers',\r\n        'WEBGL_lose_context',\r\n    ];\r\n\r\n    /**\r\n     * All extensions specified for WebGL2. This array is used to verify extension queries in WebGL2 contexts.\r\n     */\r\n    export const WEBGL2_EXTENSIONS: Array<string> = [\r\n\r\n        'EXT_color_buffer_float',\r\n        'EXT_disjoint_timer_query_webgl2',\r\n        'EXT_texture_filter_anisotropic',\r\n\r\n        'OES_texture_float_linear',\r\n        'OES_texture_half_float_linear',\r\n\r\n        'WEBGL_compressed_texture_astc',\r\n        'WEBGL_compressed_texture_atc',\r\n        'WEBGL_compressed_texture_etc',\r\n        'WEBGL_compressed_texture_etc1',\r\n        'WEBGL_compressed_texture_pvrtc',\r\n        'WEBGL_compressed_texture_s3tc',\r\n        'WEBGL_compressed_texture_s3tc_srgb',\r\n        'WEBGL_debug_renderer_info',\r\n        'WEBGL_debug_shaders',\r\n        'WEBGL_lose_context',\r\n    ];\r\n\r\n    /**\r\n     * WebGL extensions that are supported by default in WebGL2.\r\n     */\r\n    export const WEBGL2_DEFAULT_EXTENSIONS: Array<string> = [\r\n        'ANGLE_instanced_arrays',\r\n\r\n        'EXT_blend_minmax',\r\n        'EXT_frag_depth',\r\n        'EXT_sRGB',\r\n        'EXT_shader_texture_lod',\r\n\r\n        'OES_element_index_uint',\r\n        'OES_standard_derivatives',\r\n        'OES_texture_float',\r\n        'OES_texture_half_float',\r\n        'OES_vertex_array_object',\r\n\r\n        'WEBGL_depth_texture',\r\n        'WEBGL_draw_buffers',\r\n    ];\r\n\r\n}\r\n\r\nexport = extensions;\r\n","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { WEBGL1_EXTENSIONS, WEBGL2_EXTENSIONS } from './extensions';\r\n\r\nexport class ExtensionsHash {\r\n\r\n    protected static readonly WEBGL_BACKENDS: Array<string> = ['webgl1', 'webgl2'];\r\n\r\n    protected static readonly WEBGL_EXTENSIONS_BY_BACKEND = new Map<number, Array<string>>([\r\n        [0, WEBGL1_EXTENSIONS],\r\n        [1, WEBGL2_EXTENSIONS],\r\n    ]);\r\n\r\n    /**\r\n     * All known WebGL extensions (regardless of WebGL version). When new extensions become known, a new internal\r\n     * version has to be created, comprising all extensions again (some removed, some added w.r.t. previous versions).\r\n     */\r\n    protected static readonly EXTENSIONS_BY_VERSION = new Map<number, Array<string>>([[\r\n        0b000, [\r\n            'ANGLE_instanced_arrays',\r\n            'EXT_blend_minmax',\r\n            'EXT_color_buffer_float',\r\n            'EXT_color_buffer_half_float',\r\n            'EXT_disjoint_timer_query',\r\n            'EXT_disjoint_timer_query_webgl2',\r\n            'EXT_frag_depth',\r\n            'EXT_shader_texture_lod',\r\n            'EXT_sRGB',\r\n            'EXT_texture_filter_anisotropic',\r\n            'OES_element_index_uint',\r\n            'OES_standard_derivatives',\r\n            'OES_texture_float',\r\n            'OES_texture_float_linear',\r\n            'OES_texture_half_float',\r\n            'OES_texture_half_float_linear',\r\n            'OES_vertex_array_object',\r\n            'WEBGL_color_buffer_float',\r\n            'WEBGL_compressed_texture_astc',\r\n            'WEBGL_compressed_texture_atc',\r\n            'WEBGL_compressed_texture_etc',\r\n            'WEBGL_compressed_texture_etc1',\r\n            'WEBGL_compressed_texture_pvrtc',\r\n            'WEBGL_compressed_texture_s3tc',\r\n            'WEBGL_compressed_texture_s3tc_srgb',\r\n            'WEBGL_debug_renderer_info',\r\n            'WEBGL_debug_shaders',\r\n            'WEBGL_depth_texture',\r\n            'WEBGL_draw_buffers',\r\n            'WEBGL_lose_context',\r\n        ]],\r\n    ]);\r\n\r\n    /**\r\n     * Hash versioning is used to account for future, yet unknown/unpublished extensions while maintaining support for\r\n     * existing hashes.\r\n     */\r\n    protected static readonly LATEST_VERSION = 0b000;\r\n\r\n    protected static readonly BASE64_ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-+';\r\n\r\n    /**\r\n     * Encodes a number of bitfield semantics (of 6 bits) into a base64 character.\r\n     * @param base64 - Bitfield of 6 bits (as number).\r\n     */\r\n    protected static encode64(bitfield: number): string {\r\n        assert(bitfield >= 0b000000 && bitfield <= 0b111111,\r\n            `expected bitfield in range [ 0b000000, 0b111111 ], given ${bitfield}`);\r\n        return ExtensionsHash.BASE64_ALPHABET[bitfield];\r\n    }\r\n\r\n    /**\r\n     * Decodes a single base64 encoded character to a number of bitfield semantics.\r\n     * @param base64 - Single base64 encoded character (string).\r\n     */\r\n    protected static decode64(base64: string): number {\r\n        assert(base64.length === 1, `expected single base64 character, given '${base64}'`);\r\n        const bitfield = ExtensionsHash.BASE64_ALPHABET.indexOf(base64);\r\n        assert(bitfield > -1, `unknown base64 character, given '${base64}'`);\r\n        return bitfield;\r\n    }\r\n\r\n    /**\r\n     * Generates a hash that encodes the contexts webgl backend and extension support. This is intended to be queried\r\n     * whenever support for a given context on a foreign client is due. The hash can be used as masquerade input.\r\n     * @param backend - WebGL backend: 'webgl1' or 'webgl2'.\r\n     * @param supported - Array of supported extensions to be encoded.\r\n     */\r\n    static encode(backend: string, supported: Array<string>): string {\r\n        const version = ExtensionsHash.LATEST_VERSION; // should always be set to the latest version\r\n        const extensions = ExtensionsHash.EXTENSIONS_BY_VERSION.get(version) as Array<string>;\r\n\r\n        const backendIndex = ExtensionsHash.WEBGL_BACKENDS.indexOf(backend);\r\n        assert(backendIndex > -1, `expected valid backend ${ExtensionsHash.WEBGL_BACKENDS}, given ${backend} `);\r\n\r\n        let hash: string = ExtensionsHash.encode64((version << 3) | (backendIndex + 1));\r\n        if (supported.length === 0) {\r\n            return hash;\r\n        }\r\n\r\n        let support = 0b000000;\r\n        for (let i = 0; i < extensions.length; ++i) {\r\n            support |= (supported.indexOf(extensions[i]) > -1 ? 0b100000 >> (i % 6) : 0b0);\r\n            if (i % 6 < 5 && i < extensions.length - 1) {\r\n                continue;\r\n            }\r\n            /* Convert every pack of 6 bits into a base64 encoded string and append it to the hash. */\r\n            hash += ExtensionsHash.encode64(support);\r\n            support = 0b000000;\r\n        }\r\n        return hash;\r\n    }\r\n\r\n    /**\r\n     * Decodes a hash into a WebGL backend and supported extensions.\r\n     * @param hash - Versioned extension hash.\r\n     * @returns - Tuple of webgl backend and an array of extensions.\r\n     */\r\n    static decode(hash: string): [string, Array<string>] {\r\n\r\n        const hashHead = ExtensionsHash.decode64(hash[0]);\r\n        const version = hashHead >> 3;\r\n\r\n        const backendIndex = (hashHead & 0b000111) - 1;\r\n        assert(backendIndex < ExtensionsHash.WEBGL_BACKENDS.length,\r\n            `expected valid backend index, given ${backendIndex}`);\r\n\r\n        const backend = ExtensionsHash.WEBGL_BACKENDS[backendIndex];\r\n\r\n        assert(ExtensionsHash.EXTENSIONS_BY_VERSION.has(version), `expected valid hash version, given ${version}`);\r\n        const extensions = ExtensionsHash.EXTENSIONS_BY_VERSION.get(version) as Array<string>;\r\n\r\n        const expectedHashLength = Math.ceil(extensions.length / 6) + 1;\r\n        assert(hash.length === expectedHashLength,\r\n            `expected hash of version ${version} to have a length of ${expectedHashLength}, given ${hash}`);\r\n\r\n        const supported = new Array<string>();\r\n        for (let i = 1; i < hash.length; ++i) {\r\n            const bitfield = ExtensionsHash.decode64(hash[i]);\r\n            const offset = (i - 1) * 6;\r\n\r\n            /* loop explicitly unrolled */\r\n            if (bitfield & 0b100000) {\r\n                supported.push(extensions[offset + 0]);\r\n            }\r\n            if (bitfield & 0b010000) {\r\n                supported.push(extensions[offset + 1]);\r\n            }\r\n            if (bitfield & 0b001000) {\r\n                supported.push(extensions[offset + 2]);\r\n            }\r\n            if (bitfield & 0b000100) {\r\n                supported.push(extensions[offset + 3]);\r\n            }\r\n            if (bitfield & 0b000010) {\r\n                supported.push(extensions[offset + 4]);\r\n            }\r\n            if (bitfield & 0b000001) {\r\n                supported.push(extensions[offset + 5]);\r\n            }\r\n        }\r\n        return [backend, supported];\r\n    }\r\n\r\n    /**\r\n     * For a given set of extensions, this generates the complementary set of extensions for a given backend.\r\n     * @param backend - WebGL backend: 'webgl1' or 'webgl2'.\r\n     * @param extensions - Array of extensions to be complemented to all extensions available to the backend.\r\n     */\r\n    static complement(backend: string, extensions: Array<string>): Array<string> {\r\n        const backendIndex = ExtensionsHash.WEBGL_BACKENDS.indexOf(backend);\r\n        assert(backendIndex > -1, `expected valid backend ${ExtensionsHash.WEBGL_BACKENDS}, given ${backend} `);\r\n\r\n        const webglExtensions = ExtensionsHash.WEBGL_EXTENSIONS_BY_BACKEND.get(backendIndex) as Array<string>;\r\n        return webglExtensions.filter((ext) => extensions.indexOf(ext) < 0);\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, GETparameter } from './auxiliaries';\r\n\r\nimport { ExtensionsHash } from './extensionshash';\r\n\r\n\r\n/**\r\n * Mask object for context masquerade. It is used to artificially restrict the capabilities of context instances.\r\n * It is intended to simplify cross-browser testing without actually using different browsers.\r\n *\r\n * A mask can be instantiated in four different ways:\r\n * 1. by creating the object and explicitly configuring all values as required.\r\n * 2. from a preset identifier (all presets are stored in assets/masquerade.json).\r\n * 3. from an extension hash\r\n * 4. from GET parameters, either 'msqrd_p=<Identifer>' or 'msqrd_h=<ExtensionsHash>'.\r\n *\r\n * Intended use; when the context's static masquerade is set, all subsequent instances apply that mask:\r\n * ```\r\n * Context.masquerade = ContextMasquerade.fromHash('288M01-o');\r\n * ```\r\n */\r\nexport class ContextMasquerade {\r\n\r\n    /** @see {@link presets} */\r\n    protected static readonly MASQUERADE_JSON: ContextMasquerade.Presets = require('./data/masquerade.json');\r\n\r\n    /** @see {@link backend} */\r\n    protected _backend: string;\r\n\r\n    /** @see {@link extensionsStrive} */\r\n    protected _extensionsStrive = new Array<string>();\r\n\r\n    /** @see {@link extensionsConceal} */\r\n    protected _extensionsConceal = new Array<string>();\r\n\r\n    /** @see {@link functionsUndefine} */\r\n    protected _functionsUndefine = new Array<string>();\r\n\r\n    /**\r\n     * Generates a mask based on an extensions hash (encoding backend and extensions_strive). If extensions are strived\r\n     * for, all extensions that are not explicitly mentioned will be added to the list of concealed extensions.\r\n     * @param hash - Hash that is to be decoded for backend and extensions data.\r\n     */\r\n    static fromHash(hash: string): ContextMasquerade {\r\n        const mask = new ContextMasquerade();\r\n        const tuple = ExtensionsHash.decode(hash);\r\n\r\n        mask._backend = tuple[0];\r\n        mask._extensionsStrive = tuple[1];\r\n        mask._extensionsConceal = ExtensionsHash.complement(mask._backend, mask._extensionsStrive);\r\n\r\n        return mask;\r\n    }\r\n\r\n    /**\r\n     * Creates a context mask based on a preset. Note that the presence of an extensions_hash overrides the backend,\r\n     * extensions_strive, as well as extensions_conceal. Only the functions_undefine will be preserved in that case.\r\n     * @param identifier - Name of a preset as specified in masquerade.json.\r\n     */\r\n    static fromPreset(identifier: string): ContextMasquerade {\r\n        const mask = new ContextMasquerade();\r\n\r\n        const identifiers = new Array<string>();\r\n        let preset: ContextMasquerade.Preset | undefined;\r\n        for (const p of ContextMasquerade.presets()) {\r\n            identifiers.push(p.identifier);\r\n            if (p.identifier !== identifier) {\r\n                continue;\r\n            }\r\n            preset = p;\r\n            break;\r\n        }\r\n        assert(preset !== undefined,\r\n            `expected valid identifier, available ['${identifiers.join('\\', \\'')}'], given '${identifier}'`);\r\n\r\n        preset = preset as ContextMasquerade.Preset;\r\n\r\n        if (preset.extensions_hash !== undefined) {\r\n            const tuple = ExtensionsHash.decode(preset.extensions_hash);\r\n            mask._backend = tuple[0];\r\n            mask._extensionsStrive = tuple[1];\r\n        } else {\r\n            mask._backend = preset.backend;\r\n            mask._extensionsConceal = preset.extensions_conceal;\r\n            mask._extensionsStrive = preset.extensions_strive;\r\n        }\r\n        mask._functionsUndefine = preset.functions_undefine;\r\n\r\n        assert(mask._backend !== undefined,\r\n            'expected backend to be included in preset');\r\n\r\n        if (mask._extensionsStrive === undefined) {\r\n            mask._extensionsStrive = [];\r\n        } else {\r\n            mask._extensionsConceal = ExtensionsHash.complement(mask._backend, mask._extensionsStrive);\r\n        }\r\n\r\n        if (mask._extensionsConceal === undefined) {\r\n            mask._extensionsConceal = [];\r\n        }\r\n\r\n        if (mask._functionsUndefine === undefined) {\r\n            mask._functionsUndefine = [];\r\n        }\r\n\r\n        return mask;\r\n    }\r\n\r\n    /**\r\n     * Tries to generate a mask based on GET parameters: if msqrd_h is present, its value is interpreted as\r\n     * extensions hash and a mask is generated from hash. If no hash was found, presence of msqrd_p is evaluated and if\r\n     * found, a mask is generated from preset identifier.\r\n     */\r\n    static fromGET(): ContextMasquerade | undefined {\r\n        const msqrdHash = GETparameter('msqrd_h');\r\n        if (msqrdHash !== undefined) {\r\n            return ContextMasquerade.fromHash(msqrdHash);\r\n        }\r\n        const msqrdPreset = GETparameter('msqrd_p');\r\n        if (msqrdPreset !== undefined) {\r\n            return ContextMasquerade.fromPreset(msqrdPreset);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /*\r\n     * Presets for emulation of various browsers. This can be used to maintain multiple test configurations and\r\n     * simplify cross-browser testing without actually using different browsers.\r\n     */\r\n    static presets() {\r\n        return this.MASQUERADE_JSON.presets;\r\n    }\r\n\r\n    /**\r\n     * Defines the backend (currently either 'webgl1' or 'webgl2').\r\n     */\r\n    get backend() {\r\n        return this._backend;\r\n    }\r\n\r\n    /**\r\n     * Extensions that the context should strive to support. The support can only go as far as the extensions are\r\n     * actually supported.\r\n     */\r\n    get extensionsStrive() {\r\n        return this._extensionsStrive;\r\n    }\r\n\r\n    /**\r\n     * Extensions that the context should conceal support of. This only affects supported extensions, which will\r\n     * be reported to be not supported.\r\n     */\r\n    get extensionsConceal() {\r\n        return this._extensionsConceal;\r\n    }\r\n\r\n    /**\r\n     * Functions that the context should delete during construction. Since WebGL context functions cannot be deleted\r\n     * they are undefined instead.\r\n     */\r\n    get functionsUndefine() {\r\n        return this._functionsUndefine;\r\n    }\r\n}\r\n\r\n\r\nexport namespace ContextMasquerade {\r\n\r\n    /**\r\n     * Interfaces required to prevent implicit any when parsing masquerade.json.\r\n     */\r\n    export interface Preset {\r\n        identifier: string;\r\n        backend: string;\r\n        extensions_hash: string;\r\n        extensions_strive: Array<string>;\r\n        extensions_conceal: Array<string>;\r\n        functions_undefine: Array<string>;\r\n    }\r\n\r\n    /**\r\n     * Interfaces required to prevent implicit any when parsing masquerade.json.\r\n     */\r\n    export interface Presets {\r\n        presets: Array<Preset>;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\n\r\nimport { Context } from './context';\r\nimport { Framebuffer } from './framebuffer';\r\nimport { Initializable } from './initializable';\r\nimport { NdcFillingTriangle } from './ndcfillingtriangle';\r\nimport { Program } from './program';\r\nimport { Shader } from './shader';\r\nimport { Texture2 } from './texture2';\r\n\r\n\r\n/**\r\n * This rendering pass blits the color attachment of a given rgba-framebuffer into the target buffer provided on frame.\r\n * For rendering, a direct blit is used. However, if this is not supported, a textured, screen-aligned triangle is used\r\n * for blitting as fallback.\r\n *\r\n * The blit component can be used as follows:\r\n * ```\r\n * this.blit.framebuffer = this.intermediateFBO;\r\n * this.blit.frame(this.defaultFBO, null, null);\r\n * ```\r\n */\r\nexport class BlitPass extends Initializable {\r\n\r\n    /**\r\n     * Read-only access to the objects context, used to get context information and WebGL API access.\r\n     */\r\n    protected _context: Context;\r\n\r\n    /** @see {@link target} */\r\n    protected _target: Framebuffer;\r\n\r\n    /** @see {@link framebuffer} */\r\n    protected _framebuffer: Framebuffer;\r\n\r\n    /** @see {@link readBuffer} */\r\n    protected _readBuffer: GLenum;\r\n\r\n    /** @see {@link drawBuffer} */\r\n    protected _drawBuffer: GLenum;\r\n\r\n    /* Indirect blit and fallback implementation. */\r\n\r\n    /**\r\n     * Geometry used to draw on. This is not provided by default to allow for geometry sharing. If no triangle is given,\r\n     * the ndc triangle will be created and managed internally.\r\n     */\r\n    protected _ndcTriangle: NdcFillingTriangle;\r\n\r\n    /**\r\n     * Tracks ownership of the ndc-filling triangle.\r\n     */\r\n    protected _ndcTriangleShared = false;\r\n\r\n    protected _program: Program;\r\n\r\n\r\n    constructor(context: Context) {\r\n        super();\r\n        this._context = context;\r\n    }\r\n\r\n    /**\r\n     * Uses direct blit via glBlitFramebuffer for blitting a single read buffer into the given target's draw buffer.\r\n     */\r\n    private functionBlit(): void {\r\n        const gl = this._context.gl;\r\n\r\n        this._target.bind(gl.DRAW_FRAMEBUFFER);\r\n        this._framebuffer.bind(gl.READ_FRAMEBUFFER);\r\n        gl.readBuffer(this._readBuffer);\r\n        gl.drawBuffers([this._drawBuffer]);\r\n\r\n        /**\r\n         * The glClear is somehow required to make the blit work. Reducing the clear area to zero is intended to reduce\r\n         * the actual load of clear.\r\n         */\r\n        gl.enable(gl.SCISSOR_TEST);\r\n        gl.scissor(0, 0, 0, 0);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        gl.disable(gl.SCISSOR_TEST);\r\n\r\n        gl.blitFramebuffer(0, 0, this._framebuffer.width, this._framebuffer.height, 0, 0\r\n            , this._target.width, this._target.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\r\n\r\n        this._framebuffer.unbind(gl.READ_FRAMEBUFFER);\r\n        this._target.unbind(gl.DRAW_FRAMEBUFFER);\r\n    }\r\n\r\n    /**\r\n     * Uses indirect blit by drawing a textured, screen-aligned triangle into the given target framebuffer.\r\n     */\r\n    private programBlit(): void {\r\n        assert(this._ndcTriangle && this._ndcTriangle.initialized, `expected an initialized ndc triangle`);\r\n        const gl = this._context.gl;\r\n\r\n        gl.viewport(0, 0, this._target.width, this._target.height);\r\n\r\n        this._program.bind();\r\n\r\n        const texture = this._framebuffer.texture(this._readBuffer) as Texture2;\r\n        texture.bind(gl.TEXTURE0);\r\n\r\n        const target = this._context.isWebGL2 ? gl.DRAW_FRAMEBUFFER : gl.FRAMEBUFFER;\r\n        this._target.bind(target);\r\n        this._ndcTriangle.bind();\r\n        this._ndcTriangle.draw();\r\n        this._ndcTriangle.unbind();\r\n        this._target.unbind(target);\r\n\r\n        texture.unbind();\r\n\r\n        /* Every pass is expected to bind its own program when drawing, thus, unbinding is not necessary. */\r\n        // this.program.unbind();\r\n    }\r\n\r\n    /**\r\n     * Specializes this pass's initialization. This pass either requires blitFramebuffer support or creates screen-\r\n     * aligned triangle geometry and a single program. All attribute and dynamic uniform locations are cached.\r\n     * @param ndcTriangle - If specified, assumed to be used as shared geometry. If none is specified, a ndc-filling\r\n     * triangle will be created internally.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(ndcTriangle?: NdcFillingTriangle): boolean {\r\n        const gl = this._context.gl;\r\n\r\n        /* Configure program-based blit. */\r\n\r\n        const vert = new Shader(this._context, gl.VERTEX_SHADER, 'ndcvertices.vert (blit)');\r\n        vert.initialize(require('./shaders/ndcvertices.vert'));\r\n        const frag = new Shader(this._context, gl.FRAGMENT_SHADER, 'blit.frag');\r\n        frag.initialize(require('./shaders/blit.frag'));\r\n\r\n        this._program = new Program(this._context, 'BlitProgram');\r\n        this._program.initialize([vert, frag]);\r\n\r\n        this._program.bind();\r\n        gl.uniform1i(this._program.uniform('u_texture'), 0);\r\n        this._program.unbind();\r\n\r\n\r\n        if (ndcTriangle === undefined) {\r\n            this._ndcTriangle = new NdcFillingTriangle(this._context);\r\n        } else {\r\n            this._ndcTriangle = ndcTriangle;\r\n            this._ndcTriangleShared = true;\r\n        }\r\n\r\n        if (!this._ndcTriangle.initialized) {\r\n            const aVertex = this._program.attribute('a_vertex', 0);\r\n            this._ndcTriangle.initialize(aVertex);\r\n        } else {\r\n            this._program.attribute('a_vertex', this._ndcTriangle.aVertex);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Specializes this pass's uninitialization. Program and geometry resources are released (if allocated). Cached\r\n     * uniform and attribute locations are invalidated.\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        if (!this._ndcTriangleShared && this._ndcTriangle.initialized) {\r\n            this._ndcTriangle.uninitialize();\r\n        }\r\n        this._program.uninitialize();\r\n    }\r\n\r\n    /**\r\n     * A blit frame either blits or draws the color attachment of the given framebuffer to the target framebuffer. For\r\n     * program based/indirect blit a viewport filling area, i.e., a screen-aligned triangle is used.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    frame() {\r\n        logIf(!this._target || !this._target.valid, LogLevel.Dev, `valid target expected, given ${this._target}`);\r\n        logIf(!this._framebuffer || !this._framebuffer.valid, LogLevel.Dev,\r\n            `valid framebuffer for blitting from expected, given ${this._framebuffer}`);\r\n\r\n        const gl = this._context.gl;\r\n\r\n        switch (this._readBuffer) {\r\n            /* falls through */\r\n            case gl.DEPTH_ATTACHMENT:\r\n            case gl.STENCIL_ATTACHMENT:\r\n            case gl.DEPTH_STENCIL_ATTACHMENT:\r\n                return this.programBlit();\r\n            default:\r\n                break;\r\n        }\r\n\r\n        /* BlitFramebuffer is not an extension and, thus, it does not need to be enabled. */\r\n        if (this._context.supportsBlitFramebuffer) {\r\n            return this.functionBlit();\r\n        }\r\n        this.programBlit();\r\n    }\r\n\r\n    /**\r\n     * Sets the framebuffer that is to be blitted.\r\n     * @param framebuffer - Framebuffer that is to be blitted.\r\n     */\r\n    set framebuffer(framebuffer: Framebuffer) {\r\n        this.assertInitialized();\r\n        this._framebuffer = framebuffer;\r\n    }\r\n\r\n    /**\r\n     * The read buffer to blit from (currently, this is expected to refer to a texture attachment of this._framebuffer).\r\n     * @param readBuffer - GLenum that is to be queried from the FBO.\r\n     */\r\n    set readBuffer(readBuffer: GLenum) {\r\n        this.assertInitialized();\r\n        this._readBuffer = readBuffer;\r\n    }\r\n\r\n    /**\r\n     * The draw buffer to blit to (currently, this is expected to refer to a texture attachment of this._target or\r\n     * gl.BACK). Please note that this will be ignored if WebGL 1 is used without a WEBGL_draw_buffer extension.\r\n     * Furthermore, if the drawBuffer is gl.BACK, a DefaultBuffer is expected as target.\r\n     * @param drawBuffer - GLenum that specifies the draw buffer.\r\n     */\r\n    set drawBuffer(drawBuffer: GLenum) {\r\n        this.assertInitialized();\r\n        this._drawBuffer = drawBuffer;\r\n    }\r\n\r\n    /**\r\n     * Framebuffer to blit the given framebuffer (@see framebuffer} into.\r\n     * @param target - Framebuffer to blit into.\r\n     */\r\n    set target(target: Framebuffer) {\r\n        this.assertInitialized();\r\n        this._target = target;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, log, logIf, LogLevel } from './auxiliaries';\r\nimport { GLsizei2 } from './tuples';\r\n\r\nimport { ChangeLookup } from './changelookup';\r\nimport { Context } from './context';\r\nimport { Framebuffer } from './framebuffer';\r\nimport { Initializable } from './initializable';\r\nimport { NdcFillingTriangle } from './ndcfillingtriangle';\r\nimport { Program } from './program';\r\nimport { Shader } from './shader';\r\nimport { Texture2 } from './texture2';\r\nimport { FramePrecisionString, Wizard } from './wizard';\r\n\r\n\r\n/**\r\n * This pass accumulates the color attachment 0 of a framebuffer, e.g., the result of an intermediate frame, into an\r\n * accumulation buffer. For accumulation the frame number is used to derive the accumulation weight. For rendering to\r\n * texture, a textured ndc-filling triangle is used.\r\n *\r\n * The accumulation pass can be used as follows:\r\n * ```\r\n * this.accumulate.initialize();\r\n * this.accumulate.texture = this.intermediateFBO.texture(gl2facade.COLOR_ATTACHMENT0);\r\n * this.accumulate.update();\r\n * this.accumulate.frame(frameNumber);\r\n * ```\r\n */\r\nexport class AccumulatePass extends Initializable {\r\n\r\n    /**\r\n     * Read-only access to the objects context, used to get context information and WebGL API access.\r\n     */\r\n    protected _context: Context;\r\n\r\n    /**\r\n     * Alterable auxiliary object for tracking changes on this object's input and lazy updates.\r\n     */\r\n    protected readonly _altered = Object.assign(new ChangeLookup(), {\r\n        any: false, texture: false, precision: false, passThrough: false,\r\n    });\r\n\r\n\r\n    /** @see {@link texture} */\r\n    protected _texture: Texture2;\r\n\r\n    /** @see {@link precision} */\r\n    protected _precision: FramePrecisionString = 'half';\r\n\r\n    /** @see {@link passThrough} */\r\n    protected _passThrough: boolean;\r\n\r\n    /**\r\n     * Two rgba-framebuffers used for accumulation (buffer ping-ponging is used for alternating the buffers for read\r\n     * and write access due to a limitation in WebGL).\r\n     */\r\n    protected _accumulationFBOs: [Framebuffer, Framebuffer];\r\n    protected _accumulationTextures: [Texture2, Texture2];\r\n\r\n\r\n    /**\r\n     * Stores the index of the last buffer written to.\r\n     */\r\n    protected _write: GLuint = 0;\r\n\r\n    /**\r\n     * Geometry used to draw on. This is not provided by default to allow for geometry sharing. If no triangle is given,\r\n     * the ndc triangle will be created and managed internally.\r\n     */\r\n    protected _ndcTriangle: NdcFillingTriangle;\r\n\r\n    /**\r\n     * Tracks ownership of the ndc-filling triangle.\r\n     */\r\n    protected _ndcTriangleShared = false;\r\n\r\n    protected _program: Program;\r\n    protected _uWeight: WebGLUniformLocation;\r\n\r\n\r\n    constructor(context: Context) {\r\n        super();\r\n        this._context = context;\r\n    }\r\n\r\n\r\n    /**\r\n     * Specializes this pass's initialization. This pass requires an ndc-filling triangle, a single accumulation\r\n     * program, and two accumulation framebuffers for ping pong (simultaneous read and write is currently not allowed\r\n     * by webgl). All attribute and dynamic uniform locations are cached.\r\n     * @param ndcTriangle - If specified, assumed to be used as shared geometry. If none is specified, a ndc-filling\r\n     * triangle will be created internally.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(ndcTriangle?: NdcFillingTriangle): boolean {\r\n        const gl = this._context.gl;\r\n\r\n        this._accumulationFBOs = [\r\n            new Framebuffer(this._context, 'AccumPingFBO'),\r\n            new Framebuffer(this._context, 'AccumPongFBO')];\r\n\r\n        this._accumulationTextures = [\r\n            new Texture2(this._context, 'AccumPingTexture'),\r\n            new Texture2(this._context, 'AccumPongTexture')];\r\n\r\n        /* Configure program-based accumulate. */\r\n\r\n        const vert = new Shader(this._context, gl.VERTEX_SHADER, 'ndcvertices.vert (accumulate)');\r\n        vert.initialize(require('./shaders/ndcvertices.vert'));\r\n        const frag = new Shader(this._context, gl.FRAGMENT_SHADER, 'accumulate.frag');\r\n        frag.initialize(require('./shaders/accumulate.frag'));\r\n\r\n        this._program = new Program(this._context, 'AccumulateProgram');\r\n        this._program.initialize([vert, frag]);\r\n\r\n        this._uWeight = this._program.uniform('u_weight');\r\n        this._program.bind();\r\n        gl.uniform1f(this._uWeight, 0.0);\r\n        gl.uniform1i(this._program.uniform('u_accumulationTexture'), 0);\r\n        gl.uniform1i(this._program.uniform('u_currentFrameTexture'), 1);\r\n        this._program.unbind();\r\n\r\n\r\n        if (ndcTriangle === undefined) {\r\n            this._ndcTriangle = new NdcFillingTriangle(this._context);\r\n        } else {\r\n            this._ndcTriangle = ndcTriangle;\r\n            this._ndcTriangleShared = true;\r\n        }\r\n\r\n        if (!this._ndcTriangle.initialized) {\r\n            const aVertex = this._program.attribute('a_vertex', 0);\r\n            this._ndcTriangle.initialize(aVertex);\r\n        } else {\r\n            this._program.attribute('a_vertex', this._ndcTriangle.aVertex);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Specializes this pass's uninitialization. Program and geometry resources are released (if allocated). Cached\r\n     * uniform and attribute locations are invalidated.\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        if (!this._ndcTriangleShared && this._ndcTriangle.initialized) {\r\n            this._ndcTriangle.uninitialize();\r\n        }\r\n        this._program.uninitialize();\r\n\r\n        this._accumulationFBOs[0].uninitialize();\r\n        this._accumulationFBOs[1].uninitialize();\r\n        this._accumulationTextures[0].uninitialize();\r\n        this._accumulationTextures[1].uninitialize();\r\n\r\n        this._write = 0;\r\n    }\r\n\r\n    /**\r\n     * Initialize accumulation textures and FBOs (if not initialized yet). Then verifies if the texture's size has\r\n     * changed, and if so, resizes the accumulation buffers.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    update() {\r\n        if (!this._texture || !this._texture.valid) {\r\n            log(LogLevel.Dev, `valid texture for accumulation update expected, given ${this._texture}`);\r\n            return;\r\n        }\r\n\r\n        if (this._passThrough) {\r\n            return;\r\n        }\r\n\r\n        const sizeAltered = this._altered.texture || this._accumulationTextures[0].width !== this._texture.width ||\r\n            this._accumulationTextures[0].height !== this._texture.height;\r\n        if (!this._altered.any && !sizeAltered) {\r\n            assert(this._accumulationFBOs[0].valid && this._accumulationFBOs[1].valid,\r\n                `valid accumulation framebuffers expected`);\r\n            return;\r\n        }\r\n\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        /* Create and initialize accumulation texture and FBOs. */\r\n\r\n        const textureSize = this._texture.size;\r\n\r\n        if (!this._accumulationTextures[0].initialized) {\r\n            const internalFormat = Wizard.queryInternalTextureFormat(this._context, gl.RGBA, this._precision);\r\n            this._accumulationTextures[0].initialize(textureSize[0], textureSize[1],\r\n                internalFormat[0], gl.RGBA, internalFormat[1]);\r\n            this._accumulationTextures[1].initialize(textureSize[0], textureSize[1],\r\n                internalFormat[0], gl.RGBA, internalFormat[1]);\r\n\r\n        } else {\r\n            if (this._altered.texture || sizeAltered) {\r\n                this._accumulationTextures[0].resize(this._texture.width, this._texture.height);\r\n                this._accumulationTextures[1].resize(this._texture.width, this._texture.height);\r\n            }\r\n            if (this._altered.precision) {\r\n                const internalFormat = Wizard.queryInternalTextureFormat(this._context, gl.RGBA, this._precision);\r\n                this._accumulationTextures[0].reformat(internalFormat[0], gl.RGBA, internalFormat[1]);\r\n                this._accumulationTextures[1].reformat(internalFormat[0], gl.RGBA, internalFormat[1]);\r\n            }\r\n        }\r\n\r\n        if (!this._accumulationFBOs[0].initialized) {\r\n            this._accumulationFBOs[0].initialize([[gl2facade.COLOR_ATTACHMENT0, this._accumulationTextures[0]]]);\r\n            this._accumulationFBOs[1].initialize([[gl2facade.COLOR_ATTACHMENT0, this._accumulationTextures[1]]]);\r\n        }\r\n\r\n        assert(this._accumulationFBOs[0].valid && this._accumulationFBOs[1].valid,\r\n            `valid accumulation framebuffers expected`);\r\n\r\n        this._altered.reset();\r\n    }\r\n\r\n    /**\r\n     * An accumulation frame binds the two accumulation textures (ping-pong framebuffer), one for read, the other for\r\n     * write/accumulating into. A screen-aligned triangle is used to fill the viewport and mix the input texture with\r\n     * the weight of 1 / (frameNumber + 1) with the previous accumulation result. If no texture is specified, pass\r\n     * through is used.\r\n     * @param frameNumber - Frame number used to select the current read and write framebuffer as well as frame weight.\r\n     * @param viewport - If specified, the viewport for accumulation will be set to the given width and height. If not,\r\n     * the currently set viewport is used.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    frame(frameNumber: number, viewport?: GLsizei2) {\r\n        assert(this._accumulationFBOs[0].valid && this._accumulationFBOs[1].valid,\r\n            `valid framebuffer objects for accumulation expected (initialize or update was probably not be called`);\r\n\r\n        if (this._passThrough || this._texture === undefined) {\r\n            return;\r\n        }\r\n        logIf(!this._texture || !this._texture.valid, LogLevel.Dev,\r\n            `valid texture for accumulation frame expected, given ${this._texture}`);\r\n\r\n        const gl = this._context.gl;\r\n\r\n        if (viewport !== undefined) {\r\n            gl.viewport(0, 0, viewport[0], viewport[1]);\r\n        }\r\n\r\n        const readIndex = frameNumber % 2;\r\n        const writeIndex = this._write = 1 - readIndex;\r\n\r\n        const accumTexture = this._accumulationTextures[readIndex];\r\n        const frameTexture = this._texture;\r\n\r\n        accumTexture.bind(gl.TEXTURE0);\r\n        frameTexture.bind(gl.TEXTURE1);\r\n\r\n        this._program.bind();\r\n        gl.uniform1f(this._uWeight, 1.0 / (frameNumber + 1));\r\n\r\n        this._accumulationFBOs[writeIndex].bind(gl.DRAW_FRAMEBUFFER); // bind draw only does not work for IE and EDGE\r\n        this._ndcTriangle.bind();\r\n        this._ndcTriangle.draw();\r\n        this._ndcTriangle.unbind();\r\n        this._accumulationFBOs[writeIndex].unbind(gl.DRAW_FRAMEBUFFER);\r\n\r\n        /** Every pass is expected to bind its own program when drawing, thus, unbinding is not necessary. */\r\n        // this.program.unbind();\r\n\r\n        accumTexture.unbind(gl.TEXTURE0);\r\n        frameTexture.unbind(gl.TEXTURE1);\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets the texture that is to be accumulated. The ping and pong render textures will be resized on next frame\r\n     * automatically if the texture size changed.\r\n     * @param texture - Framebuffer that is to be accumulated.\r\n     */\r\n    set texture(texture: Texture2) {\r\n        this.assertInitialized();\r\n        if (this._texture !== texture) {\r\n            this._texture = texture;\r\n            this._altered.alter('texture');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Allows to specify the accumulation precision.\r\n     */\r\n    set precision(precision: FramePrecisionString) {\r\n        this.assertInitialized();\r\n        if (this._precision !== precision) {\r\n            this._precision = precision;\r\n            this._altered.alter('precision');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Allows to skip accumulation. If pass through is enabled, nothing will be rendered on frame at all and the\r\n     * ping pong render textures will be reduced to a minimum size of [1, 1] until pass through is disabled.\r\n     */\r\n    set passThrough(passThrough: boolean) {\r\n        this.assertInitialized();\r\n\r\n        if (this._passThrough === passThrough) {\r\n            return;\r\n        }\r\n\r\n        if (this._passThrough && this._accumulationTextures[0].initialized) {\r\n            this._accumulationTextures[0].uninitialize();\r\n            this._accumulationTextures[1].uninitialize();\r\n        }\r\n        if (this._passThrough && this._accumulationFBOs[0].initialized) {\r\n            this._accumulationFBOs[0].uninitialize();\r\n            this._accumulationFBOs[1].uninitialize();\r\n        }\r\n\r\n        this._passThrough = passThrough;\r\n        this._altered.alter('passThrough');\r\n    }\r\n\r\n    /**\r\n     * Returns the framebuffer last accumulated into. Note: the accumulation buffer is represented by two framebuffers\r\n     * swapped for read and write every frame. The accumulation result is in the first color attachment.\r\n     * @returns - The rgba framebuffer last accumulated into.\r\n     */\r\n    get framebuffer(): Framebuffer | undefined {\r\n        return this._passThrough ? undefined : this._accumulationFBOs[this._write];\r\n    }\r\n\r\n}\r\n","\r\nimport { RandomSquareKernel } from './randomsquarekernel';\r\n\r\n\r\n/**\r\n * An anti-aliasing kernel which provides NDC offsets for anti-aliasing, e.g., when using multi-frame sampling.\r\n */\r\nexport class AntiAliasingKernel extends RandomSquareKernel {\r\n\r\n    /**\r\n     * @override\r\n     * Seems to only work if the getter of this kernels width setter is redefined here.\r\n     */\r\n    get width(): GLsizei {\r\n        return this._width;\r\n    }\r\n\r\n    /**\r\n     * Changes the size of the kernel and triggers regeneration of all values. If width is either 8 or 64 pre-built\r\n     * kernels will be loaded (golden set). In any other case, a random square kernel will be created.\r\n     */\r\n    set width(width: GLsizei) {\r\n        if (this._width === width) {\r\n            return;\r\n        }\r\n        this._width = width;\r\n        switch (this._width) {\r\n            case 8:\r\n                this.fromJSON(require('./data/goldenset08.json'));\r\n                break;\r\n\r\n            case 64:\r\n                this.fromJSON(require('./data/goldenset64.json'));\r\n                break;\r\n\r\n            default:\r\n                this.resize();\r\n                this.generate();\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\n\r\nimport { vec2, vec4 } from 'gl-matrix';\r\n\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\nimport { clamp, v2 } from './gl-matrix-extensions';\r\n\r\nimport { ChangeLookup } from './changelookup';\r\nimport { Context } from './context';\r\nimport { Controllable } from './controller';\r\nimport { Initializable } from './initializable';\r\nimport { GLclampf4, GLfloat2, GLsizei2, tuple2 } from './tuples';\r\nimport { FramePrecisionString } from './wizard';\r\nimport { MouseEventProvider } from './mouseeventprovider';\r\n\r\n\r\n// export interface IdCallback { (id: number, x?: number, y?: number): void; }\r\n\r\n\r\n/**\r\n * The interface to a callback that is called if the renderer is invalidated.\r\n */\r\nexport interface Invalidate { (force: boolean): void; }\r\n\r\n\r\n/**\r\n * Base class for hardware-accelerated processing and/or image-synthesis. It provides information such as the current\r\n * canvas, the canvas's size (native resolution), and the multi-frame number (for progressive rendering). A renderer's\r\n * properties are expected to be managed by its owning object or the canvas and should not be set directly/manually.\r\n * Alterations to these properties can be tracked with the `_altered` property. This allows an inheritor to implement\r\n * partial asset reallocation and, e.g., speed up dynamic multi-frame reconfiguration. The alterable object can be\r\n * extended using `Object.assign(this._alterable, ... some structure of booleans)`.\r\n *\r\n * This base class further provides the invalidate method that invokes an invalidation callback also provided by the\r\n * owning/controlling canvas.\r\n *\r\n * Since Initializable is extended, the initialization workflow applies to all specialized renderers (requires super\r\n * calls in constructor as well as in initialize and uninitialize).\r\n *\r\n * Note that a renderer is currently intended to always render to the canvas it is bound to. Hence, there is no\r\n * interface for setting a frame target.\r\n */\r\nexport abstract class Renderer extends Initializable implements Controllable {\r\n\r\n    /**\r\n     * The renderer's invalidation callback. This should usually be setup by the canvas and refer to a function in the\r\n     * canvas's controller, e.g., it should trigger an update within the controller.\r\n     */\r\n    protected _invalidate: Invalidate;\r\n\r\n    /** @see {@link context} */\r\n    protected _context: Context;\r\n\r\n\r\n    /**\r\n     * Alterable auxiliary object for tracking changes on renderer input and lazy updates.\r\n     */\r\n    protected readonly _altered = Object.assign(new ChangeLookup(), {\r\n        any: false, multiFrameNumber: false, frameSize: false, canvasSize: false, framePrecision: false,\r\n        clearColor: false, debugTexture: false,\r\n    });\r\n\r\n\r\n    /**\r\n     * This multi-frame number is for lazy reconfiguration and set on update. The inheritor can react to changes using\r\n     * this.altered.multiFrameNumber.\r\n     */\r\n    protected _multiFrameNumber: number;\r\n\r\n    /**\r\n     * Targeted resolution for image synthesis. This might differ from the canvas resolution and should be used in\r\n     * frame calls of inheritors.\r\n     */\r\n    protected _frameSize: GLsizei2 = [0, 0];\r\n\r\n    /**\r\n     * Actual, native resolution for the canvas currently in charge of controlling the renderer. This might differ from\r\n     * the targeted frame resolution but is required, e.g., for specific non-proportional ratios between frame size and\r\n     * canvas size.\r\n     */\r\n    protected _canvasSize: GLsizei2 = [0, 0];\r\n\r\n    /**\r\n     * Targeted frame precision, e.g., used for frame accumulation. Note that any renderer is currently\r\n     * expected to take advantage of progressive rendering (e.g., multi-frame sampling) and accumulation as well as a\r\n     * blit pass (since main intend is multi-frame based rendering).\r\n     */\r\n    protected _framePrecision: FramePrecisionString = 'half';\r\n\r\n    /**\r\n     * The clear color, provided by the canvas the renderer is bound to. This is used in frame calls of inheritors.\r\n     */\r\n    protected _clearColor: GLclampf4 = [0.0, 0.0, 0.0, 1.0];\r\n\r\n\r\n    /**\r\n     * List of textures for debugging purposes such as normals, ids, depth, masks, etc. that can be populated by the\r\n     * inheritor. The index of a texture identifier can then be for specifying a debug output of a render texture.\r\n     */\r\n    protected _debugTextures = new Array<string>();\r\n\r\n    /**\r\n     * @see {@link debugTexture}\r\n     * This property can be observed, e.g., `aRenderer.debugTextureObservable.subscribe()`.\r\n     */\r\n    protected _debugTexture: GLint;\r\n    protected _debugTextureSubject = new ReplaySubject<GLint>(1);\r\n\r\n\r\n    /** @callback Invalidate\r\n     * A callback intended to be invoked whenever the specialized renderer itself or one of its objects is invalid. This\r\n     * callback should be passed during initialization to all objects that might handle invalidation internally as well.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    protected invalidate(force: boolean = false): void {\r\n        this._invalidate(force);\r\n    }\r\n\r\n\r\n    /**\r\n     * Utility for communicating this._debugTexture changes to its associated subject.\r\n     */\r\n    protected debugTextureNext(): void {\r\n        this._debugTextureSubject.next(this._debugTexture);\r\n    }\r\n\r\n    /**\r\n     * Context that can be used for processing and rendering as well as passed to rendering stages.\r\n     */\r\n    protected get context(): Context {\r\n        this.assertInitialized();\r\n        return this._context;\r\n    }\r\n\r\n    protected get canvasSize(): GLsizei2 {\r\n        this.assertInitialized();\r\n        return this._canvasSize;\r\n    }\r\n\r\n    /**\r\n     * Whether or not any of the (relevant/monitored) rendering properties has been altered. This concept should be used\r\n     * by other classes (e.g., camera, rendering stages) for detecting modifications relevant for rendering output.\r\n     */\r\n    protected get altered(): boolean {\r\n        return this._altered.any;\r\n    }\r\n\r\n\r\n    /**\r\n     * Actual initialize call specified by inheritor.\r\n     */\r\n    protected abstract onInitialize(context: Context, callback: Invalidate,\r\n        mouseEventProvider: MouseEventProvider | undefined,\r\n        /* keyEventProvider: KeyEventProvider | undefined, */\r\n        /* touchEventProvider: TouchEventProvider | undefined */): boolean;\r\n\r\n    /**\r\n     * Actual uninitialize call specified by inheritor.\r\n     */\r\n    protected abstract onUninitialize(): void;\r\n\r\n\r\n    /**\r\n     * Actual update call specified by inheritor.\r\n     */\r\n    protected abstract onUpdate(): boolean;\r\n\r\n    /**\r\n     * Actual prepare call specified by inheritor.\r\n     */\r\n    protected abstract onPrepare(): void;\r\n\r\n    /**\r\n     * Actual frame call specified by inheritor.\r\n     */\r\n    protected abstract onFrame(frameNumber: number): void;\r\n\r\n    /**\r\n     * Actual swap call specified by inheritor.\r\n     */\r\n    protected abstract onSwap(): void;\r\n\r\n\r\n    /**\r\n     * When extending (specializing) this class, initialize should initialize all required stages and allocate assets\r\n     * that are shared between multiple stages. Note that `super.initialize()` should always be call first when\r\n     * 'overriding' this function.\r\n     *\r\n     * Note: the context handle is stored in a property, but should be passed to the stages by specializing\r\n     * renderer instead. The renderer itself should not allocate rendering resources directly, thus, it should not\r\n     * require a webgl context.\r\n     *\r\n     * @param context - Wrapped gl context for function resolution (passed to all stages).\r\n     * @param callback - Functions that is invoked when the renderer (or any stage) is invalidated.\r\n     * @param mouseEventProvider - Provider for mouse events referring to the canvas element.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(context: Context, callback: Invalidate,\r\n        mouseEventProvider: MouseEventProvider | undefined,\r\n        /* keyEventProvider: KeyEventProvider | undefined, */\r\n        /* touchEventProvider: TouchEventProvider | undefined */): boolean {\r\n\r\n        assert(context !== undefined, `valid webgl context required`);\r\n        this._context = context;\r\n        assert(callback !== undefined, `valid multi-frame update callback required`);\r\n        this._invalidate = callback;\r\n\r\n        return this.onInitialize(context, callback, mouseEventProvider);\r\n    }\r\n\r\n    /**\r\n     * Should release all assets and uninitialize all stages. `super.uninitialize()` should always be call first when\r\n     * overriding this function.\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        this.onUninitialize();\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     */\r\n    @Initializable.assert_initialized()\r\n    update(multiFrameNumber: number): boolean {\r\n        if (this._canvasSize[0] !== this._context.gl.canvas.width ||\r\n            this._canvasSize[1] !== this._context.gl.canvas.height) {\r\n            this._canvasSize[0] = this._context.gl.canvas.width;\r\n            this._canvasSize[1] = this._context.gl.canvas.height;\r\n            this._altered.alter('canvasSize');\r\n        }\r\n        if (this._multiFrameNumber !== multiFrameNumber) {\r\n            this._multiFrameNumber = multiFrameNumber;\r\n            this._altered.alter('multiFrameNumber');\r\n        }\r\n        return this.onUpdate() || this._altered.any;\r\n    }\r\n\r\n    /**\r\n     * Prepares the rendering of the next frame (or subsequent frames when multi-frame rendering).\r\n     * This is part of the controllable interface. The renderer should reconfigure as lazy as possible.\r\n     * @param multiFrameNumber - The multi-frame number as requested by controller.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    prepare(): void {\r\n        this.onPrepare();\r\n    }\r\n\r\n    /**\r\n     * Controllable interface intended to trigger rendering of a full pass of the renderer that results in either an\r\n     * intermediate frame for accumulation to a full multi-frame or full frame for itself.  The inheritor should invoke\r\n     * frames of relevant rendering and processing stages.\r\n     * @param frameNumber - The current frame number forwarded to onFrame.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    frame(frameNumber: number): void {\r\n        this.onFrame(frameNumber);\r\n    }\r\n\r\n    /**\r\n     * Interface intended to trigger swap (by controller).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    swap(): void {\r\n        this.onSwap();\r\n    }\r\n\r\n\r\n    /**\r\n     * Transforms local viewport coordinates into local intermediate frame coordinates.\r\n     * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n     */\r\n    frameCoords(x: GLint, y: GLint): GLfloat2 {\r\n        const position = vec2.divide(v2(), this._frameSize, this.canvasSize);\r\n        vec2.floor(position, vec2.multiply(position, [x + 0.5, y + 0.5], position));\r\n        vec2.add(position, position, [0.5, 0.5]);\r\n        return tuple2<GLfloat>(position);\r\n    }\r\n\r\n    // /**\r\n    //  * @interface CoordsAccess\r\n    //  * Look up a fragments coordinates by unprojecting the depth using the renderer's camera.\r\n    //  * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n    //  * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n    //  * @param zInNDC - optional depth parameter (e.g., from previous query).\r\n    //  * @returns - 3D coordinate reprojected from NDC/depth to world space.\r\n    //  */\r\n    // abstract coordsAt(x: GLint, y: GLint, zInNDC?: number, viewProjectionInverse?: mat4): vec3 | undefined;\r\n\r\n    // /**\r\n    //  * @interface IDAccess\r\n    //  * Look up an object id at a specific fragment.\r\n    //  * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n    //  * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n    //  * @returns - ID encoded of an object rendered/visible at given position.\r\n    //  */\r\n    // abstract idAt(x: GLint, y: GLint): GLsizei | undefined;\r\n\r\n\r\n    /**\r\n     * Changes the frame size for rendering. This setter should only be used by the canvas this renderer is bound to.\r\n     * Changing the frame size invalidates the renderer.\r\n     *\r\n     * Note: the frame size is detached from the canvas size. When blitting the frame into the canvas, the frame is\r\n     * rescaled to fill or fit the canvas size.\r\n     *\r\n     * @param size - Resolution of the framebuffer.\r\n     */\r\n    set frameSize(size: GLsizei2) {\r\n        this.assertInitialized();\r\n        if (vec2.equals(this._frameSize, size)) {\r\n            return;\r\n        }\r\n        Object.assign(this._frameSize, size);\r\n        this._altered.alter('frameSize');\r\n        this.invalidate();\r\n    }\r\n\r\n    /**\r\n     * Set the frame precision.\r\n     * @param format - The accumulation format. Expected values are one of 'byte', 'half', 'float', or 'auto'\r\n     */\r\n    set framePrecision(precision: FramePrecisionString) {\r\n        this.assertInitialized();\r\n        if (this._framePrecision === precision) {\r\n            return;\r\n        }\r\n        this._framePrecision = precision;\r\n        this._altered.alter('framePrecision');\r\n        this.invalidate();\r\n    }\r\n\r\n    /**\r\n     * Sets the color used for clearing the background. This setter should only be used by the canvas this renderer is\r\n     * bound to. Changing the frame size invalidates the renderer.\r\n     * @param color - Red, green, blue, and alpha color components.\r\n     */\r\n    set clearColor(color: GLclampf4) {\r\n        this.assertInitialized();\r\n        if (vec4.equals(this._clearColor, color)) {\r\n            return;\r\n        }\r\n        Object.assign(this._clearColor, color);\r\n        this._altered.alter('clearColor');\r\n        this.invalidate();\r\n    }\r\n\r\n    /**\r\n     * Read only access to the renderers registered render textures that can be blit to the back buffer for debugging.\r\n     * @returns - Array of render texture identifiers.\r\n     */\r\n    get debugTextures(): Array<string> {\r\n        this.assertInitialized();\r\n        return this._debugTextures;\r\n    }\r\n\r\n    /**\r\n     * The render texture index for debug output. This is -1 when debug output is disabled. This should be used in\r\n     * the renderers swap implementation.\r\n     */\r\n    get debugTexture(): GLint {\r\n        this.assertInitialized();\r\n        return this._debugTexture;\r\n    }\r\n\r\n    /**\r\n     * Enables to specify the index of a render texture to be blit to the back buffer for debugging. This invalidates\r\n     * but should result in a blit only if nothing else changed. When the requested debug texture was blit (and\r\n     * debugTexture was actually altered) `this.debugTextureNext()` should be called to inform observers.\r\n     * @param index - Render texture index based on debuggableTextures array. This should be in [-1, length of array].\r\n     */\r\n    set debugTexture(index: GLint) {\r\n        this.assertInitialized();\r\n        if (this._debugTexture === index) {\r\n            return;\r\n        }\r\n        logIf(index >= this._debugTextures.length, LogLevel.Dev, `invalid texture index, ` +\r\n            `debug texture disabled (index set to -1) | ${index} not in [-1,+${this._debugTextures.length - 1}]`);\r\n        this._debugTexture = index < this._debugTextures.length ?\r\n            clamp(index, -1, this._debugTextures.length - 1) : -1;\r\n        this._altered.alter('debugTexture');\r\n        this.invalidate();\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to debug texture changes.\r\n     */\r\n    get debugTextureObservable(): Observable<GLint> {\r\n        return this._debugTextureSubject.asObservable();\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from './auxiliaries';\r\nimport { GLclampf4 } from './tuples';\r\n\r\nimport { Framebuffer } from './framebuffer';\r\nimport { Initializable } from './initializable';\r\n\r\n\r\n/**\r\n * Default framebuffer with framebuffer interface. It is intended for use as default buffer binding and enables lazy\r\n * target size reconfiguration of stages.\r\n *\r\n * ```\r\n * this._someStage.frame(this._nullFBO, frameNumber, multiFrameNumber);\r\n * ```\r\n *\r\n * Note that this buffer does query its size from the current context's canvas.\r\n */\r\nexport class DefaultFramebuffer extends Framebuffer {\r\n\r\n    /**\r\n     * @override\r\n     * Default framebuffer cannot be created.\r\n     */\r\n    protected create(): WebGLFramebuffer | undefined {\r\n        this._object = Framebuffer.DEFAULT_FRAMEBUFFER;\r\n        this._valid = true;\r\n\r\n        /* Initialize with default clear values */\r\n        this._clearColors = new Array<GLclampf4>(1);\r\n        this._clearDepth = 1.0;\r\n        this._clearStencil = 0;\r\n\r\n        this.clear = this.es2Clear;\r\n\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * Default framebuffer cannot be deleted.\r\n     */\r\n    protected delete(): void {\r\n        this._object = undefined;\r\n        this._valid = false;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * @returns - Always false, since default buffer cannot have any attachments.\r\n     */\r\n    protected hasAttachment(attachment: GLenum): boolean {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * Binds the default framebuffer object to the provided target.\r\n     * @param target - Specifying the binding point (target).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(target: GLenum = this.context.gl.FRAMEBUFFER): void {\r\n        this.context.gl.bindFramebuffer(target, this._object);\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     * Sets the clear color used for clearing the default color buffer. In order to have transparency working, the\r\n     * canvas needs to have the alpha  attribute enabled. This stage also supports premultiplied alpha, which is applied\r\n     * automatically when the context's `premultipliedAlpha` attribute is set.\r\n     * @param color - RGBA clear color.\r\n     */\r\n    clearColor(color: GLclampf4): void {\r\n        super.clearColor(color);\r\n    }\r\n\r\n    /**\r\n     * Resets the size (important for valid size change detection in stages).\r\n     */\r\n    resize(): void {\r\n        assert(false, `the default framebuffer cannot be resized directly`);\r\n    }\r\n\r\n    /**\r\n     * Convenience accessor: returns the renderable width of the canvas back buffer.\r\n     */\r\n    get width(): GLsizei {\r\n        return this.context.gl.canvas.width as GLsizei;\r\n    }\r\n\r\n    /**\r\n     * Convenience accessor: returns the renderable height of the canvas back buffer.\r\n     */\r\n    get height(): GLsizei {\r\n        return this.context.gl.canvas.height as GLsizei;\r\n    }\r\n\r\n}\r\n","\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var ourBase = schema.id ? urilib.resolve(baseuri, schema.id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+schema+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', ((schema.items instanceof Array)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', ((schema.extends instanceof Array)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!(schemas instanceof Array)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  var schemaUri = base;\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","\r\nimport { mat4, vec2, vec3 } from 'gl-matrix';\r\nimport { abs2, abs3, sign, v2, v3 } from './gl-matrix-extensions';\r\n\r\nimport { DEG2RAD } from './auxiliaries';\r\nimport { Camera } from './camera';\r\n\r\n\r\nnamespace ray_math {\r\n\r\n    /**\r\n     * Lots of variables that represent components of other variables or are transformed.\r\n     * For these I (dl) prefer, e.g.,  _component or _transformation notation\r\n     */\r\n    /* tslint:disable:variable-name */\r\n\r\n    /**\r\n     * Computes the intersection point of a given ray and a circle at [0.0, 0.0] and a given radius.\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray's direction.\r\n     * @param radius - Radius of the circle to test for intersection with.\r\n     * @returns The intersection point of the given ray and a circle, undefined if no intersection exists.\r\n     */\r\n    export function rayCircleIntersection(ray0: vec2, ray1: vec2, radius: number = 1.0): vec2 | undefined {\r\n        const ray_direction = vec2.subtract(v2(), ray1, ray0);\r\n        if (vec2.equals(ray_direction, vec2.fromValues(0.0, 0.0))) {\r\n            return undefined;\r\n        }\r\n\r\n        /**\r\n         * This is a default ray circle intersection with common variable names. It's math and math sometimes has no\r\n         * meaning full variable names... (we could use twoTimesDotProductOfRayAndOrigin instead of b, but this is\r\n         * obviously not a good idea :D).\r\n         */\r\n        const a = vec2.squaredLength(ray_direction);\r\n        const b = 2.0 * vec2.dot(ray_direction, ray0);\r\n        const c = vec2.squaredLength(ray0) - radius * radius;\r\n\r\n        const delta = b * b - 4.0 * a * c;\r\n        if (delta < 0.0) {\r\n            return undefined;\r\n        }\r\n\r\n        /* Compute the two possible intersections and use nearest one. */\r\n        const s = Math.sqrt(delta);\r\n        const t = Math.min((-b + s) / (2.0 * a), (-b - s) / (2.0 * a));\r\n        const intersection = vec2.scale(v2(), ray_direction, t);\r\n\r\n        return vec2.add(intersection, intersection, ray0);\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection point of a ray starting at a given point and pointing to the center of an axis-aligned\r\n     * square of a given side length.\r\n     * @param point - Starting point used to derive a ray for intersection.\r\n     * @param edgeLength - Side length of the square.\r\n     * @returns - The intersection point of the square and the derived ray.\r\n     */\r\n    export function pointSquareIntersection(point: vec2, edgeLength: number = 1.0): vec2 {\r\n        const a = abs2(v2(), point);\r\n        if (a[0] >= a[1]) { // intersection is with left or right border\r\n            return vec2.fromValues(sign(point[0]) * edgeLength, point[1] / a[0] * edgeLength);\r\n        }\r\n        return vec2.fromValues(point[0] / a[1] * edgeLength, sign(point[1]) * edgeLength);\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection of a ray with an axis-aligned square at [0.0, 0.0] with side length of 2 * halfLength.\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray's direction.\r\n     * @returns - The intersection point of the square and the ray.\r\n     */\r\n    export function raySquareIntersection(ray0: vec2, ray1: vec2, halfLength: number = 1.0): Array<number> {\r\n        const vertices = [vec2.fromValues(-halfLength, +halfLength), vec2.fromValues(-halfLength, -halfLength),\r\n        vec2.fromValues(+halfLength, -halfLength), vec2.fromValues(+halfLength, +halfLength)];\r\n\r\n        const intersections = new Array<number>();\r\n        for (let i = 0; i < 4; ++i) {\r\n            const intersection = rayLineIntersection(ray0, ray1, vertices[i], vertices[(i + 1) % 4]);\r\n            if (intersection) {\r\n                intersections.push(intersection[1]);\r\n            }\r\n        }\r\n        return intersections;\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection of a ray with a line.\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray direction.\r\n     * @param line0 - Start point of a line.\r\n     * @param line1 - End point of a line.\r\n     * @returns - If ray intersects, a 2-tuple of intersection point and t (ray0 + t + ray1) is returned.\r\n     */\r\n    export function rayLineIntersection(ray0: vec2, ray1: vec2, line0: vec2, line1: vec2): [vec2, number] | undefined {\r\n        const p = ray0; /* do not write to p (or clone ray0) */\r\n        const r = vec2.sub(v2(), ray1, ray0);\r\n\r\n        const q = line0;  /* do not write to q (or clone line0) */\r\n        const s = vec2.sub(v2(), line1, line0);\r\n\r\n        const cross_rs = vec2.cross(v3(), r, s)[2];\r\n        if (cross_rs === 0.0) {\r\n            return undefined;\r\n        }\r\n\r\n        const qp = vec2.sub(v2(), q, p);\r\n        const u = vec2.cross(v3(), qp, vec2.scale(v2(), r, 1.0 / cross_rs))[2];\r\n        const t = vec2.cross(v3(), qp, vec2.scale(v2(), s, 1.0 / cross_rs))[2];\r\n        if (u < 0.0 || u > 1.0 || t < 0.0) { // } || t > 1.0) { // ray intersects line segment in both directions ...\r\n            return undefined;\r\n        }\r\n        return [vec2.add(v2(), q, vec2.scale(v2(), s, u)), t];\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection point of a given ray and a given plane (rooted at [ 0, 0, 0 ]).\r\n     * t = -(dot(plane.xyz, origin) + plane.w) / dot(plane.xyz, ray);\r\n     * The ray intersects when (t > 0.0) && (t < tm) is true.\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray direction.\r\n     * @param origin - Point on a plane with origin [ 0, 0, 0 ].\r\n     * @param normal - Normal of the plane with origin [ 0, 0, 0 ].\r\n     * @returns - If ray intersects, the intersection point on the plane if the plane was hit.\r\n     */\r\n    export function rayPlaneIntersection(ray0: vec3, ray1: vec3\r\n        , origin: vec3 | number[] = [0.0, 0.0, 0.0], normal: vec3 | number[] = [0.0, 1.0, 0.0]): vec3 | undefined {\r\n\r\n        const ray_direction = vec3.normalize(v3(), vec3.subtract(v3(), ray1, ray0));\r\n\r\n        /* Intersect with plane in point normal form. */\r\n        const rdDotN: number = vec3.dot(ray_direction, normal);\r\n\r\n        /* Constrain the intersection to rays that point from front to back with respect to the plane. */\r\n        if (vec3.equals(ray_direction, [0, 0, 0]) || rdDotN >= 0.0) {\r\n            return undefined;\r\n        }\r\n\r\n        /* Retrieve point using the ray. */\r\n        const t: number = vec3.dot(vec3.subtract(v3(), origin, ray0), normal) / rdDotN;\r\n        return vec3.add(v3(), vec3.scale(v3(), ray_direction, t), ray0);\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection point of a given ray and a given sphere.\r\n     * t = -(dot(plane.xyz, origin) + plane.w) / dot(plane.xyz, ray);\r\n     * The ray intersects when (t > 0.0) && (t < tm) is true.\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray direction.\r\n     * @param origin - Location of the sphere.\r\n     * @param radius - Radius of the sphere.\r\n     * @returns - If ray intersects, the intersection point on the plane if the plane was hit.\r\n     */\r\n    export function raySphereIntersection(ray0: vec3, ray1: vec3\r\n        , origin: vec3 = vec3.fromValues(0.0, 0.0, 0.0), radius: number = 1.0): vec3 | undefined {\r\n\r\n        const rayOriginToSphereCenter = vec3.subtract(v3(), ray0, origin); // o - c\r\n        const ray_direction = vec3.normalize(v3(), vec3.subtract(v3(), ray1, ray0)); // l\r\n\r\n        const dot_term = vec3.dot(ray_direction, rayOriginToSphereCenter); // l * (o - c)\r\n\r\n        // Note: dot product can be used to compute the squared length of a vector -> gl-matrix supports squaredLength\r\n        // vec3.squaredLength(rayOriginToSphereCenter); // ||o -c||²\r\n\r\n        const t = dot_term * dot_term - vec3.squaredLength(rayOriginToSphereCenter) + radius * radius;\r\n        if (t <= 0.0) { // no intersection\r\n            return undefined;\r\n        }\r\n        return vec3.add(v3(), ray0, vec3.scale(v3(), ray_direction, -dot_term - Math.sqrt(t)));\r\n    }\r\n\r\n    /**\r\n     * Computes the intersection point of a given ray and a given plane (origin [ 0, 0, 0 ]). The intersection point,\r\n     * however, is constrained to a tube of a given radius. The computation is currently limited to a tube\r\n     * on the plane y = 0 with origin in [0.0, 0.0, 0.0], extending towards [0.0, 1.0, 0.0].\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray direction.\r\n     * @param radius - Constrain intersection point to be within a tube of this radius.\r\n     * @returns - The intersection point on the plane if the plane was hit, undefined otherwise.\r\n     */\r\n    export function rayPlaneIntersection_tube(ray0: vec3, ray1: vec3, radius: number = 1.0): vec3 | undefined {\r\n        const intersection = rayPlaneIntersection(ray0, ray1);\r\n\r\n        if (intersection !== undefined && vec3.length(intersection) < radius) {\r\n            return intersection;\r\n        }\r\n\r\n        /* Project the ray start to the y = 0 plane. */\r\n        const ray0_xz = vec2.fromValues(ray0[0], ray0[2]);\r\n        const ray1_xz = vec2.fromValues(ray1[0], ray1[2]);\r\n\r\n        const intersection2 = rayCircleIntersection(ray0_xz, ray1_xz, radius);\r\n        return intersection2 ? vec3.fromValues(intersection2[0], 0.0, intersection2[1]) : undefined;\r\n    }\r\n\r\n    /**\r\n     * Evaluates whether or not a given point is within a square of a given edge length.\r\n     * @param point - Point to check the within-square-status for.\r\n     * @param halfLength - Half of the side length of the square.\r\n     * @returns - Whether or not the given point is within an axis aligned square at [0.0, 0.0] and edge length.\r\n     */\r\n    export function isPointWithinSquare(point: vec2, halfLength: number = 1.0): boolean {\r\n        const p_abs = abs2(v2(), point);\r\n        return p_abs[0] <= halfLength && p_abs[1] <= halfLength;\r\n    }\r\n\r\n    /**\r\n     * Evaluates whether or not a given point is within the NDC-space (normalized device coordinates) after being\r\n     * transformed by a view projection matrix.\r\n     * @param viewProjection - (Model) view projection matrix to transform the point with.\r\n     * @param point - Point that is to be transformed\r\n     * @returns True if the point should be visible (within NDC), false otherwise.\r\n     */\r\n    export function isPointWithinNDC(viewProjection: mat4, point: vec3): boolean {\r\n        const p_transformed = vec3.transformMat4(v3(), point, viewProjection);\r\n        const p_abs = abs3(v3(), p_transformed);\r\n        return p_abs[0] <= 1.0 && p_abs[1] <= 1.0 && p_transformed[2] >= 0.0 && p_transformed[2] <= 1.0;\r\n    }\r\n\r\n    /**\r\n     * Computes the shortest distance of a point to a ray (closest point on ray distance).\r\n     * @param ray0 - Start point of a ray.\r\n     * @param ray1 - Far point of a ray, used to derive the ray direction.\r\n     * @param point - Point to compute the distance for.\r\n     * @returns - Distance of the closest point on a ray to a point.\r\n     */\r\n    export function distancePointToRay(ray0: vec3, ray1: vec3, point: vec3): number {\r\n        const ray_direction = vec3.subtract(v3(), ray1, ray0);\r\n        const ray_length = vec3.squaredLength(ray_direction);\r\n        if (ray_length === 0.0) {\r\n            return 0.0;\r\n        }\r\n\r\n        const eyeToPoint = vec3.subtract(v3(), point, ray0);\r\n        const theta = vec3.dot(eyeToPoint, ray_direction);\r\n        return theta / ray_length;\r\n    }\r\n\r\n    /**\r\n     * Computes a new eye coordinate for the camera that should have the given point within view. The eye is only\r\n     * modified with respect to its distance to the camera's center (on the camera look-at ray).\r\n     * @param camera - Camera as base constraint for the eye movement (only distance to center is changed).\r\n     * @param point - Point to adjust the camera position for.\r\n     * @returns - Eye coordinate for the given camera that should have the given point within view.\r\n     */\r\n    export function eyeWithPointInView(camera: Camera, point: vec3): vec3 {\r\n        const ray_direction = vec3.subtract(v3(), camera.center, camera.eye);\r\n        const ray_normalized = vec3.normalize(v3(), ray_direction);\r\n\r\n        /* Retrieve u and v for an orthonormal basis. */\r\n        const ortho_v = vec3.normalize(v3(), vec3.cross(v3(), ray_normalized, camera.up));\r\n        const ortho_u = vec3.normalize(v3(), vec3.cross(v3(), ortho_v, ray_normalized));\r\n\r\n        const distance = distancePointToRay(camera.eye, camera.center, point);\r\n\r\n        /* Compute the closest point c on the ray. */\r\n        const closest = vec3.add(v3(), camera.eye, vec3.scale(v3(), ray_direction, distance));\r\n        const t = vec3.subtract(v3(), point, closest);\r\n        const part_v = Math.abs(vec3.dot(t, ortho_v)) / camera.aspect;\r\n        const part_u = Math.abs(vec3.dot(t, ortho_u));\r\n\r\n        /* Retrieve max distance to camera with required fov. */\r\n        const part_max = Math.max(part_v, part_u);\r\n\r\n        /* Require distance from closest to new camera position. */\r\n        const a = part_max / Math.tan(camera.fovy * DEG2RAD * 0.5);\r\n        return vec3.subtract(v3(), closest, vec3.scale(v3(), ray_normalized, a));\r\n    }\r\n\r\n}\r\n\r\nexport = ray_math;\r\n","module.exports = \"\\r\\nprecision highp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\r\\n#else \\r\\n    #define varying in\\r\\n#endif\\r\\n\\r\\n\\r\\nconst float one255ths = 1.0 / 255.0;\\r\\n\\r\\nvec3 float24x1_to_uint8x3(const in float f) {\\r\\n    vec3 uint8x3 = vec3(f, fract(f * 256.0), fract(f * 65536.0));\\r\\n    return floor(uint8x3 * 256.0) * one255ths;\\r\\n}\\r\\n\\r\\nvec4 float24x1_to_uint8x4(const in float f) {\\r\\n    vec4 uint8x4 = vec4(f, fract(f * 256.0), fract(f * 65536.0), fract(f * 16777216.0));\\r\\n    return floor(uint8x4 * 256.0) * one255ths;\\r\\n}\\r\\n\\r\\nconst vec3 premultUint8x3 = vec3(255.0 / 256.0, 255.0 / 65536.0, 255.0 / 16777216.0);\\r\\nfloat uint8x3_to_float24x1(const in vec3 v) {\\r\\n    return dot(v, premultUint8x3); // a1 * b1 + a2 * b2 + a3 * b3  ;)\\r\\n}\\r\\n\\r\\nconst vec4 premultUint8x4 = vec4(255.0 / 256.0, 255.0 / 65536.0, 255.0 / 16777216.0, 255.0 / 4294967296.0);\\r\\nfloat uint8x4_to_float24x1(const in vec4 v) {\\r\\n    return dot(v, premultUint8x4); // a1 * b1 + a2 * b2 + a3 * b3 + a4 * b4  ;)\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define fragDepth gl_FragColor\\r\\n#else \\r\\n    layout(location = 0) out vec4 fragDepth;\\r\\n#endif\\r\\n\\r\\n\\r\\nuniform sampler2D u_texture;\\r\\nuniform vec2 u_offset;\\r\\nuniform vec2 u_scale;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    vec2 uv = vec2(v_uv.x, 1.0 - v_uv.y) * u_scale + u_offset;\\r\\n    float depth = texture(u_texture, uv).r;\\r\\n\\r\\n    fragDepth = vec4(float24x1_to_uint8x3(depth), 1.0);\\r\\n}\\r\\n\"","\r\nimport { mat4, vec3, vec4 } from 'gl-matrix';\r\n\r\nimport { assert } from './auxiliaries';\r\nimport { decode_float24x1_from_uint8x3, decode_uint32_from_rgba8 } from './gl-matrix-extensions';\r\n\r\nimport { Context } from './context';\r\nimport { Framebuffer } from './framebuffer';\r\nimport { Initializable } from './initializable';\r\nimport { NdcFillingTriangle } from './ndcfillingtriangle';\r\nimport { Program } from './program';\r\nimport { Shader } from './shader';\r\nimport { Texture2 } from './texture2';\r\n\r\n\r\n/**\r\n * This stage provides means to sample G-Buffers, in order to give access to world space coordinates, depth values and\r\n * IDs. World space coordinates are calculated by sampling the depth value and unprojecting the normalized device\r\n * coordinates. Depth and ID values are read from the GPU by rendering the requested pixel to a 1x1 texture and reading\r\n * back the value from this texture. Note that depth and ID values are cached as long as no redraw (frame) was invoked.\r\n */\r\nexport class ReadbackPass extends Initializable {\r\n\r\n    /**\r\n     * Read-only access to the objects context, used to get context information and WebGL API access.\r\n     */\r\n    protected _context: Context;\r\n\r\n\r\n    /** @see {@link cache} */\r\n    protected _cache = false;\r\n\r\n\r\n    /** @see {@link depthFBO} */\r\n    protected _depthFBO: Framebuffer;  // This is used if depth is already uint8x3 encoded\r\n\r\n    /** @see {@link depthAttachment} */\r\n    protected _depthAttachment: GLenum = 0;\r\n\r\n    /**\r\n     * Cache providing previously read depth values for a given position hash.\r\n     */\r\n    protected _cachedDepths = new Map<GLsizei, GLfloat | undefined>();\r\n\r\n\r\n    /** @see {@link idFBO} */\r\n    protected _idFBO: Framebuffer;\r\n\r\n    /** @see {@link idAttachment} */\r\n    protected _idAttachment: GLenum;\r\n\r\n    /**\r\n     * Cache providing previously read id values for a given position hash.\r\n     */\r\n    protected _cachedIDs = new Map<GLsizei, GLsizei | undefined>();\r\n\r\n\r\n    /**\r\n     * Buffer to read into.\r\n     */\r\n    protected _buffer = new Uint8Array(4);\r\n\r\n\r\n    /**\r\n     * Properties required for 24bit depth readback workaround. If a valid depth format is available as renderable\r\n     * texture format, a single fragment is rasterized in order to encode the depth of at a specific location into\r\n     * uint8x3 format, rendered into a RGBA texture for readback. This workaround is currently necessary since reading\r\n     * back depth buffer data is not supported. All following protected properties are undefined when this workaround\r\n     * is not required (i.e., in IE11), since the depth texture is already rendered explicitly in a previous render\r\n     * pass.\r\n     */\r\n    protected _texture: Texture2;\r\n    protected _framebuffer: Framebuffer;\r\n\r\n    /**\r\n     * Geometry used to draw on. This is not provided by default to allow for geometry sharing. If no triangle is given,\r\n     * the ndc triangle will be created and managed internally.\r\n     */\r\n    protected _ndcTriangle: NdcFillingTriangle;\r\n\r\n    /**\r\n     * Tracks ownership of the ndc-filling triangle.\r\n     */\r\n    protected _ndcTriangleShared = false;\r\n\r\n\r\n    protected _program: Program;\r\n    protected _uOffset: WebGLUniformLocation;\r\n    protected _uScale: WebGLUniformLocation;\r\n\r\n\r\n    /**\r\n     * Retrieve the depth of a fragment in normalized device coordinates. The implementation of this function is\r\n     * assigned at initialization based on the available WebGL features.\r\n     * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n     */\r\n    depthAt: (x: GLsizei, y: GLsizei) => GLfloat | undefined;\r\n\r\n\r\n    constructor(context: Context) {\r\n        super();\r\n        this._context = context;\r\n    }\r\n\r\n\r\n    /**\r\n     * Frame implementation clearing depth and ID caches. To avoid unnecessary readbacks (potentially causing sync\r\n     * points), the requested and found IDs and depths are cached by position. Hence, these cached values have to be\r\n     * cleared whenever the frame buffers are written/rendered to.\r\n     */\r\n    protected onFrame() {\r\n        this._cachedDepths.clear();\r\n        this._cachedIDs.clear();\r\n    }\r\n\r\n\r\n    /**\r\n     * Create a numerical hash that can be used for efficient look-up (number preferred, no string for now). Note that\r\n     * the implementation assumes that we do not exceed 65k pixel in horizontal or vertical resolution soon.\r\n     * @param x - Horizontal coordinate from the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate from the upper left corner of the viewport origin.\r\n     */\r\n    protected hash(x: GLsizei, y: GLsizei): GLsizei {\r\n        return 0xffff * y + x;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the depth of a fragment in normalized device coordinates. This function implements the direct readback\r\n     * of uint8x3 encoded depth values from a given frame buffer (see depthFBO and depthAttachment).\r\n     * @param x - Horizontal coordinate from the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate from the upper left corner of the viewport origin.\r\n     * @returns - Either the depth at location x, y or undefined, if the far plane was hit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    protected directReadDepthAt(x: GLsizei, y: GLsizei): GLfloat | undefined {\r\n        const hash = this.hash(x, y);\r\n        if (this._cache && this._cachedDepths.has(hash)) {\r\n            return this._cachedDepths.get(hash);\r\n        }\r\n\r\n        assert(this._depthFBO !== undefined && this._depthFBO.valid, `valid depth FBO expected for reading back depth`);\r\n        const texture = this._depthFBO.texture(this._depthAttachment) as Texture2;\r\n\r\n        const gl = this._context.gl;\r\n        const size = texture.size;\r\n\r\n        this._depthFBO.bind();\r\n\r\n        if (this._context.isWebGL2 || this._context.supportsDrawBuffers) {\r\n            gl.readBuffer(this._depthAttachment);\r\n        }\r\n        gl.readPixels(x, size[1] - (y + 0.5), 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, this._buffer);\r\n\r\n        let depth: GLfloat | undefined = decode_float24x1_from_uint8x3(\r\n            vec3.fromValues(this._buffer[0], this._buffer[1], this._buffer[2]));\r\n        /** @todo fix far plane depth to be at 1.0 */\r\n        depth = depth > 0.996 ? undefined : depth;\r\n\r\n        if (this._cache) {\r\n            this._cachedDepths.set(hash, depth);\r\n        }\r\n        return depth;\r\n    }\r\n\r\n\r\n    /**\r\n     * Retrieve the depth of a fragment in normalized device coordinates.\r\n     * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n     * @returns - Either the depth at location x, y or undefined, if the far plane was hit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    renderThenReadDepthAt(x: GLsizei, y: GLsizei): GLfloat | undefined {\r\n        const hash = this.hash(x, y);\r\n        if (this._cache && this._cachedDepths.has(hash)) {\r\n            return this._cachedDepths.get(hash);\r\n        }\r\n\r\n        assert(this._depthFBO !== undefined && this._depthFBO.valid, `valid depth FBO expected for reading back depth`);\r\n        const texture = this._depthFBO.texture(this._depthAttachment) as Texture2;\r\n\r\n        const gl = this._context.gl;\r\n        const size = texture.size;\r\n\r\n        /* Render a single fragment, thereby encoding the depth render texture data of the requested position. */\r\n        gl.viewport(0, 0, 1, 1);\r\n\r\n        this._program.bind();\r\n        gl.uniform2f(this._uOffset, x / size[0], (size[1] - y) / size[1]);\r\n        gl.uniform2f(this._uScale, 1.0 / size[0], 1.0 / size[1]);\r\n\r\n        texture.bind(gl.TEXTURE0);\r\n\r\n        this._framebuffer.bind();\r\n\r\n        this._ndcTriangle.bind();\r\n        this._ndcTriangle.draw();\r\n        this._ndcTriangle.unbind();\r\n\r\n        texture.unbind();\r\n\r\n        /** Every stage is expected to bind its own program when drawing, thus, unbinding is not necessary. */\r\n        // this.program.unbind();\r\n\r\n\r\n        /* Bind the framebuffer and read back the requested pixel. */\r\n\r\n        if ((this._context.isWebGL2 || this._context.supportsDrawBuffers) && gl.readBuffer) {\r\n            gl.readBuffer(gl.COLOR_ATTACHMENT0);\r\n        }\r\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, this._buffer);\r\n        this._framebuffer.unbind();\r\n\r\n        let depth: GLfloat | undefined = decode_float24x1_from_uint8x3(\r\n            vec3.fromValues(this._buffer[0], this._buffer[1], this._buffer[2]));\r\n        /** @todo fix far plane depth to be at 1.0 */\r\n        depth = depth > 0.996 ? undefined : depth;\r\n\r\n        if (this._cache) {\r\n            this._cachedDepths.set(hash, depth);\r\n        }\r\n        return depth;\r\n    }\r\n\r\n\r\n    /**\r\n     * Specializes this pass's initialization. If required. ad screen-filling triangle geometry and a single program\r\n     * are created. All attribute and dynamic uniform locations are cached.\r\n     * @param ndcTriangle - If specified, assumed to be used as shared geometry. If none is specified, a ndc-filling\r\n     * triangle will be created internally.\r\n     */\r\n    @Initializable.initialize()\r\n    initialize(ndcTriangle: NdcFillingTriangle | undefined): boolean {\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        /* If depth is already uint8x3 encoded into a rgb/rgba target no readback workaround is required. */\r\n        if (this._context.isWebGL1 && !this._context.supportsDepthTexture) {\r\n            this.depthAt = this.directReadDepthAt;\r\n            return true;\r\n        }\r\n\r\n        /* Configure read back for depth data. */\r\n        this.depthAt = this.renderThenReadDepthAt;\r\n\r\n\r\n        const vert = new Shader(this._context, gl.VERTEX_SHADER, 'ndcvertices.vert (readback)');\r\n        vert.initialize(require('./shaders/ndcvertices.vert'));\r\n        const frag = new Shader(this._context, gl.FRAGMENT_SHADER, 'readbackdepth.frag');\r\n        frag.initialize(require('./shaders/readbackdepth.frag'));\r\n\r\n        this._program = new Program(this._context, 'ReadbackDepthProgram');\r\n        this._program.initialize([vert, frag]);\r\n\r\n        this._uOffset = this._program.uniform('u_offset');\r\n\r\n        this._program.bind();\r\n        gl.uniform1i(this._program.uniform('u_texture'), 0);\r\n        this._program.unbind();\r\n\r\n        /* Configure read back frame buffer and color attachment. */\r\n\r\n        this._texture = new Texture2(this._context, 'ReadbackRenderTexture');\r\n        this._texture.initialize(1, 1, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE);\r\n\r\n        this._framebuffer = new Framebuffer(this._context, 'ReadbackFBO');\r\n        this._framebuffer.initialize([[gl2facade.COLOR_ATTACHMENT0, this._texture]]);\r\n\r\n\r\n        if (ndcTriangle === undefined) {\r\n            this._ndcTriangle = new NdcFillingTriangle(this._context);\r\n        } else {\r\n            this._ndcTriangle = ndcTriangle;\r\n            this._ndcTriangleShared = true;\r\n        }\r\n\r\n        if (!this._ndcTriangle.initialized) {\r\n            const aVertex = this._program.attribute('a_vertex', 0);\r\n            this._ndcTriangle.initialize(aVertex);\r\n        } else {\r\n            this._program.attribute('a_vertex', this._ndcTriangle.aVertex);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Specializes this stage's uninitialization. Program and geometry resources are released (if allocated). Cached\r\n     * uniform and attribute locations are invalidated.\r\n     */\r\n    @Initializable.uninitialize()\r\n    uninitialize(): void {\r\n        if (this._context.isWebGL1 && !this._context.supportsDepthTexture) {\r\n            return;\r\n        }\r\n\r\n        if (!this._ndcTriangleShared && this._ndcTriangle.initialized) {\r\n            this._ndcTriangle.uninitialize();\r\n        }\r\n\r\n        this._program.uninitialize();\r\n\r\n        this._texture.uninitialize();\r\n        this._framebuffer.uninitialize();\r\n    }\r\n\r\n\r\n    /**\r\n     * Retrieving the world space coordinate of a fragment.\r\n     * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n     * @param zInNDC - optional depth parameter (e.g., from previous query).\r\n     * @param viewProjectionInverse - matrix used to unproject the coordinate from ndc to world space.\r\n     * @returns - The unprojected world space coordinate at location x, y.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    coordsAt(x: GLsizei, y: GLsizei, zInNDC: number | undefined, viewProjectionInverse: mat4): vec3 | undefined {\r\n        const size = (this._depthFBO.texture(this._depthAttachment) as Texture2).size;\r\n        const depth = zInNDC === undefined ? this.depthAt(x, y) : zInNDC;\r\n        if (depth === undefined) {\r\n            return undefined;\r\n        }\r\n        const p = vec3.fromValues(x * 2.0 / size[0] - 1.0, 1.0 - y * 2.0 / size[1], depth * 2.0 - 1.0);\r\n        return vec3.transformMat4(vec3.create(), p, viewProjectionInverse);\r\n    }\r\n\r\n    /**\r\n     * Retrieve the id of an object at fragment position.\r\n     * @param x - Horizontal coordinate for the upper left corner of the viewport origin.\r\n     * @param y - Vertical coordinate for the upper left corner of the viewport origin.\r\n     * @returns - The id rendered at location x, y.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    idAt(x: GLsizei, y: GLsizei): GLsizei | undefined {\r\n        const hash = this.hash(x, y);\r\n        if (this._cache && this._cachedIDs.has(hash)) {\r\n            return this._cachedIDs.get(hash);\r\n        }\r\n\r\n        const gl = this._context.gl;\r\n        const size = (this._idFBO.texture(this._idAttachment) as Texture2).size;\r\n\r\n        this._idFBO.bind();\r\n        if ((this._context.isWebGL2 || this._context.supportsDrawBuffers)\r\n            && gl.readBuffer) {\r\n            gl.readBuffer(this._idAttachment);\r\n        }\r\n        gl.readPixels(x, size[1] - (y + 0.5), 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, this._buffer);\r\n\r\n        const id = decode_uint32_from_rgba8(\r\n            vec4.fromValues(this._buffer[0], this._buffer[1], this._buffer[2], this._buffer[3]));\r\n\r\n        if (this._cache) {\r\n            this._cachedIDs.set(hash, id);\r\n        }\r\n        return id;\r\n    }\r\n\r\n\r\n    /**\r\n     * Whether or not caching of requested depths and ids should be used to reduce performance impact.\r\n     */\r\n    set cache(value: boolean) {\r\n        this._cache = value;\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets the framebuffer object that is to be used for depth readback.\r\n     * @param framebuffer - Framebuffer that is to be used for depth readback.\r\n     */\r\n    set depthFBO(framebuffer: Framebuffer) {\r\n        this._depthFBO = framebuffer;\r\n    }\r\n\r\n    /**\r\n     * Sets the framebuffer's {@link depthFBO} depth attachment that is to be used for depth readback.\r\n     * @param attachment - Depth attachment that is to be used for depth readback.\r\n     */\r\n    set depthAttachment(attachment: GLenum) {\r\n        this._depthAttachment = attachment;\r\n    }\r\n\r\n    /**\r\n     * Sets the framebuffer object that is to be used for id readback.\r\n     * @param framebuffer - Framebuffer that is to be used for id readback.\r\n     */\r\n    set idFBO(framebuffer: Framebuffer) {\r\n        this._idFBO = framebuffer;\r\n    }\r\n\r\n    /**\r\n     * Sets the framebuffer's {@link idFBO} id attachment that is to be used for id readback.\r\n     * @param attachment - ID attachment that is to be used for id readback.\r\n     */\r\n    set idAttachment(attachment: GLenum) {\r\n        this._idAttachment = attachment;\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\r\\n#else \\r\\n    #define varying in\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define fragColor gl_FragColor\\r\\n#else \\r\\n    layout(location = 0) out vec4 fragColor;\\r\\n#endif\\r\\n\\r\\n\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    fragColor = texture(u_texture, v_uv);\\r\\n}\\r\\n\"","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\r\\n#else \\r\\n    #define varying in\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define fragColor gl_FragColor\\r\\n#else\\r\\n    layout(location = 0) out vec4 fragColor;\\r\\n#endif\\r\\n\\r\\n\\r\\nuniform float u_weight;\\r\\nuniform sampler2D u_accumulationTexture;\\r\\nuniform sampler2D u_currentFrameTexture;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    vec4 accumulationColor = texture(u_accumulationTexture, v_uv);\\r\\n    vec4 currentFrameColor = texture(u_currentFrameTexture, v_uv);\\r\\n    fragColor = mix(accumulationColor, currentFrameColor, u_weight);\\r\\n}\\r\\n\"","\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { Buffer } from './buffer';\r\nimport { Context } from './context';\r\nimport { Geometry } from './geometry';\r\nimport { Initializable } from './initializable';\r\n\r\n\r\n/**\r\n * Geometry for a viewport/screen-filling rectangle. The geometry creates rectangle vertices, associated to\r\n * a vertex array object (from geometry base class), and provides a specialized draw call for rendering. It is intended\r\n * for, e.g., viewport/screen-filling rendering in post-processing. The vertices can be used directly as normalized\r\n * device space (NDC) coordinates, e.g., by using the following vertex shader snippet:\r\n *\r\n * ```\r\n * #if __VERSION__ == 100\r\n *     attribute vec2 a_vertex;\r\n * #else\r\n *     layout(location = 0) in vec2 a_vertex;\r\n * #endif\r\n *\r\n * ...\r\n *\r\n * v_uv = a_vertex * 0.5 + 0.5;\r\n * gl_Position = vec4(a_vertex, 0.0, 1.0);\r\n * ```\r\n */\r\nexport class NdcFillingRectangle extends Geometry {\r\n\r\n    /**\r\n     * 2 ───── 3\r\n     * │  \\    │\r\n     * │    \\  │\r\n     * 0 ───── 1\r\n     */\r\n    protected static readonly VERTICES = new Float32Array(\r\n        [-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0]);\r\n\r\n    /**\r\n     * Object constructor, requires a context and an identifier.\r\n     * @param context - Valid context to create the object for.\r\n     * @param identifier - Meaningful name for identification of this instance.\r\n     */\r\n    constructor(context: Context, identifier?: string) {\r\n        super(context, identifier);\r\n\r\n        /* Generate identifier from constructor name if none given. */\r\n        identifier = identifier !== undefined && identifier !== `` ? identifier : this.constructor.name;\r\n\r\n        const vertexVBO = new Buffer(context, identifier + 'VBO');\r\n\r\n        this._buffers.push(vertexVBO);\r\n    }\r\n\r\n\r\n    /**\r\n     * Binds the vertex buffer object (VBO) to an attribute binding point of a given, pre-defined index.\r\n     */\r\n    protected bindBuffers(indices: Array<GLuint>): void {\r\n        /* Please note the implicit bind in attribEnable. */\r\n        this._buffers[0].attribEnable(indices[0], 2, this.context.gl.FLOAT, false, 0, 0, true, false);\r\n    }\r\n\r\n    /**\r\n     * Unbinds the vertex buffer object (VBO) and disables the binding point.\r\n     */\r\n    protected unbindBuffers(indices: Array<GLuint>): void {\r\n        /* Please note the implicit unbind in attribEnable is skipped. */\r\n        this._buffers[0].attribDisable(indices[0], true, true);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates the vertex buffer object (VBO) and creates and initializes the buffer's data store.\r\n     * @param aVertex - Attribute binding point for vertices.\r\n     */\r\n    initialize(aVertex: GLuint): boolean {\r\n        const gl = this.context.gl;\r\n        const valid = super.initialize([gl.ARRAY_BUFFER], [aVertex]);\r\n\r\n        assert(this._buffers[0] !== undefined && this._buffers[0].object instanceof WebGLBuffer,\r\n            `expected valid WebGLBuffer`);\r\n\r\n        this._buffers[0].data(NdcFillingRectangle.VERTICES, gl.STATIC_DRAW);\r\n\r\n        return valid;\r\n    }\r\n\r\n    /**\r\n     * Specifies/invokes the draw of this screen-aligned triangle.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    draw(): void {\r\n        const gl = this.context.gl;\r\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n    }\r\n\r\n}\r\n","\r\nimport { CameraModifier } from './cameramodifier';\r\n\r\n\r\nexport class ZoomModifier extends CameraModifier {\r\n\r\n    update(): void {\r\n\r\n    }\r\n\r\n}\r\n","\r\nimport { CameraModifier } from './cameramodifier';\r\n\r\n\r\nexport class PanModifier extends CameraModifier {\r\n\r\n    update(): void {\r\n\r\n    }\r\n\r\n}\r\n","\r\nimport { vec2 } from 'gl-matrix';\r\n\r\nimport { Camera } from './camera';\r\nimport { EventHandler } from './eventhandler';\r\nimport { MouseEventProvider } from './mouseeventprovider';\r\nimport { PointerLock } from './pointerlock';\r\nimport { Invalidate } from './renderer';\r\n\r\nimport { FirstPersonModifier } from './firstpersonmodifier';\r\nimport { TrackballModifier } from './trackballmodifier';\r\nimport { TurntableModifier } from './turntablemodifier';\r\n\r\n\r\nexport class Navigation {\r\n\r\n    /**\r\n     * The navigation's invalidation callback. This should usually be setup by the owning renderer and invoke the\r\n     * same callback the renderer has been given by the canvas. This invalidation is required, when continuous\r\n     * rendering is not present, events might cause need for new rendering requests.\r\n     */\r\n    protected _invalidate: Invalidate;\r\n\r\n    /** @see {@link camera} */\r\n    protected _camera: Camera;\r\n\r\n    /**\r\n     * Currently active metaphor.\r\n     */\r\n    protected _metaphor: Navigation.Metaphor;\r\n\r\n    /**\r\n     * Identifies the active camera modifier.\r\n     */\r\n    protected _mode: Navigation.Modes | undefined;\r\n\r\n    /**\r\n     * Specifies, whether or not rotation mode should be invoked on any move event, regardless of buttons.\r\n     */\r\n    protected _alwaysRotateOnMove = false;\r\n\r\n    /**\r\n     * First person camera modifier.\r\n     */\r\n    protected _firstPerson: FirstPersonModifier | undefined;\r\n\r\n    /**\r\n     * Trackball camera modifier.\r\n     */\r\n    protected _trackball: TrackballModifier | undefined;\r\n\r\n    /**\r\n     * Turntable camera modifier.\r\n     */\r\n    protected _turntable: TurntableModifier | undefined;\r\n\r\n    /**\r\n     * Even handler used to forward/map events to specific camera modifiers.\r\n     */\r\n    protected _eventHandler: EventHandler;\r\n\r\n\r\n    constructor(invalidate: Invalidate, mouseEventProvider: MouseEventProvider) {\r\n        this._invalidate = invalidate;\r\n\r\n        /* Create event handler that listens to mouse events. */\r\n        this._eventHandler = new EventHandler(invalidate, mouseEventProvider);\r\n\r\n        /* Listen to mouse events. */\r\n        this._eventHandler.pushMouseDownHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onMouseDown(latests, previous));\r\n        this._eventHandler.pushMouseUpHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onMouseUp(latests, previous));\r\n        this._eventHandler.pushMouseMoveHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onMouseMove(latests, previous));\r\n\r\n        this._eventHandler.pushClickHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onClick(latests, previous));\r\n\r\n        // this._eventHandler.pushMouseWheelHandler((latests: Array<WheelEvent>, previous: Array<WheelEvent>) =>\r\n        //     this.onWheel(latests, previous));\r\n\r\n        /* Explicitly use the setter here to create the appropriate modifier. */\r\n        this.metaphor = Navigation.Metaphor.Turntable;\r\n    }\r\n\r\n\r\n    /**\r\n     * Resolves the event to camera modifier mapping by returning the responsible camera modifier.\r\n     * @param event - Event to retrieve navigation mode for.\r\n     */\r\n    protected mode(event: MouseEvent | TouchEvent | KeyboardEvent): Navigation.Modes | undefined {\r\n\r\n        const isPrimaryButtonDown = (event as MouseEvent).buttons & 1;\r\n        const isMouseDown = event.type === 'mousedown';\r\n        const isMouseMove = event.type === 'mousemove';\r\n\r\n        const isPointerLockedRotate = PointerLock.active() && this._alwaysRotateOnMove;\r\n\r\n        if (isPointerLockedRotate || ((isMouseDown || isMouseMove) && isPrimaryButtonDown)) {\r\n            return Navigation.Modes.Rotate;\r\n\r\n            // } else if ((event.type === 'mousedown' || event.type === 'mousemove')\r\n            //     && ((event as MouseEvent).buttons & 2)) {\r\n            //     return Navigation.Modes.Zoom;\r\n\r\n            // } else if (event.type === 'wheel') {\r\n            //     return Navigation.Modes.ZoomStep;\r\n            // }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    protected rotate(event: MouseEvent | TouchEvent, start: boolean): void {\r\n        const point = this._eventHandler.offsets(event)[0];\r\n\r\n        switch (this._metaphor) {\r\n            case Navigation.Metaphor.FirstPerson:\r\n                const firstPerson = this._firstPerson as FirstPersonModifier;\r\n                let movement: vec2 | undefined;\r\n                if (PointerLock.active() && event instanceof MouseEvent) {\r\n                    movement = vec2.fromValues((event as MouseEvent).movementX, (event as MouseEvent).movementY);\r\n                }\r\n                start ? firstPerson.initiate(point) : firstPerson.process(point, movement);\r\n                event.preventDefault();\r\n                break;\r\n\r\n            case Navigation.Metaphor.Trackball:\r\n                const trackball = this._trackball as TrackballModifier;\r\n                start ? trackball.initiate(point) : trackball.process(point);\r\n                event.preventDefault();\r\n                break;\r\n\r\n            case Navigation.Metaphor.Turntable:\r\n                const turntable = this._turntable as TurntableModifier;\r\n                start ? turntable.initiate(point) : turntable.process(point);\r\n                event.preventDefault();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    protected onMouseDown(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        const event: MouseEvent = latests[latests.length - 1];\r\n        // for (const event of latests) {\r\n\r\n        this._mode = this.mode(event);\r\n        switch (this._mode) {\r\n            case Navigation.Modes.Zoom:\r\n                // this.startZoom(event);\r\n                break;\r\n\r\n            case Navigation.Modes.Rotate:\r\n                this.rotate(event, true);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n            // }\r\n        }\r\n    }\r\n\r\n    protected onMouseUp(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        const event: MouseEvent = latests[latests.length - 1];\r\n\r\n        // for (const event of latests) {\r\n        if (undefined === this._mode) {\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        // }\r\n    }\r\n\r\n    protected onMouseMove(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        const event: MouseEvent = latests[latests.length - 1];\r\n        // for (const event of latests) {\r\n\r\n        const modeWasUndefined = (this._mode === undefined);\r\n        this._mode = this.mode(event);\r\n        switch (this._mode) {\r\n            // case Navigation.Modes.Zoom:\r\n            //     // modeWasUndefined ? this.startZoom(event) : this.updateZoom(event);\r\n            //     break;\r\n\r\n            case Navigation.Modes.Rotate:\r\n                this.rotate(event, modeWasUndefined);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n            // }\r\n        }\r\n    }\r\n\r\n    protected onClick(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        // const event: MouseEvent = latests[latests.length - 1];\r\n    }\r\n\r\n\r\n    /**\r\n     * Update should invoke navigation specific event processing. When using, e.g., an event handler, the event handlers\r\n     * update method should be called in order to have navigation specific event processing invoked.\r\n     */\r\n    update(): void {\r\n        this._eventHandler.update();\r\n    }\r\n\r\n    /**\r\n     * The camera that is to be modified in response to various events.\r\n     */\r\n    set camera(camera: Camera) {\r\n        this._camera = camera;\r\n        if (this._firstPerson) {\r\n            this._firstPerson.camera = camera;\r\n        }\r\n        if (this._trackball) {\r\n            this._trackball.camera = camera;\r\n        }\r\n        if (this._turntable) {\r\n            this._turntable.camera = camera;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Configure this navigation's metaphor.\r\n     */\r\n    set metaphor(metaphor: Navigation.Metaphor) {\r\n        if (this._metaphor === metaphor) {\r\n            return;\r\n        }\r\n\r\n        this._firstPerson = undefined;\r\n        this._trackball = undefined;\r\n        this._turntable = undefined;\r\n\r\n        this._eventHandler.exitPointerLock(); /* Might be requested (and active) from FirstPerson or Flight. */\r\n        this._alwaysRotateOnMove = false;\r\n\r\n        this._metaphor = metaphor;\r\n        switch (this._metaphor) {\r\n            case Navigation.Metaphor.FirstPerson:\r\n\r\n                this._eventHandler.requestPointerLock();\r\n                this._alwaysRotateOnMove = true;\r\n\r\n                this._firstPerson = new FirstPersonModifier();\r\n                this._firstPerson.camera = this._camera;\r\n                break;\r\n\r\n            case Navigation.Metaphor.Trackball:\r\n                this._trackball = new TrackballModifier();\r\n                this._trackball.camera = this._camera;\r\n                break;\r\n\r\n            case Navigation.Metaphor.Turntable:\r\n                this._turntable = new TurntableModifier();\r\n                this._turntable.camera = this._camera;\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        this._invalidate(true);\r\n    }\r\n\r\n    get metaphor(): Navigation.Metaphor {\r\n        return this._metaphor;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport namespace Navigation {\r\n\r\n    /**\r\n     * Navigation modes used for identification of the current navigation intend, which is derived based on the event\r\n     * types or gestures, regardless of the active navigation metaphor and its constraints.\r\n     */\r\n    export enum Modes {\r\n        Move,\r\n        Pan,\r\n        Rotate,\r\n        Zoom,\r\n        ZoomStep,\r\n    }\r\n\r\n    /**\r\n     * Navigation metaphors supported by the default navigation implementation.\r\n     */\r\n    export enum Metaphor {\r\n        FirstPerson = 'firstperson',\r\n        Flight = 'flight',\r\n        Trackball = 'trackball',\r\n        Turntable = 'turntable',\r\n    }\r\n}\r\n","\r\nimport { assert, log, LogLevel } from './auxiliaries';\r\nimport { byteSizeOfFormat } from './formatbytesizes';\r\n\r\nimport { Bindable } from './bindable';\r\nimport { TexImage2DData } from './gl2facade';\r\nimport { Initializable } from './initializable';\r\nimport { AbstractObject } from './object';\r\n\r\n\r\n/**\r\n * Wrapper for an WebGL cube texture providing size accessors and requiring for bind, unbind, resize, validity, and\r\n * initialization implementations. The texture cube object is created on initialization and deleted on uninitialization.\r\n * After being initialized, the texture cube can be resized, reformated, and data can set directly or via load:\r\n * ```\r\n * const cubeMap = new TextureCube(context, 'CubeMap');\r\n * cubeMap.initialize(512, gl.RGB8, gl.RGB, gl.UNSIGNED_BYTE);\r\n * cubeMap.load({\r\n *     positiveX: 'data/cubemap.px.png', negativeX: 'data/cubemap.nx.png',\r\n *     positiveY: 'data/cubemap.py.png', negativeY: 'data/cubemap.ny.png',\r\n *     positiveZ: 'data/cubemap.pz.png', negativeZ: 'data/cubemap.nz.png',\r\n * }).then(() => this.invalidate(true);\r\n * ```\r\n * Please note that each of the six textures of a texture cube is required to be of the exact same, square dimensions.\r\n * This is reflected within this classes interface by providing a single size property in favor to width and height.\r\n */\r\nexport class TextureCube extends AbstractObject<WebGLTexture> implements Bindable {\r\n\r\n    /**\r\n     * Default texture, e.g., used for unbind.\r\n     */\r\n    static readonly DEFAULT_TEXTURE = undefined;\r\n\r\n    /** @see {@link size} */\r\n    protected _size: GLsizei = 0;\r\n\r\n    /** @see {@link internalFormat} */\r\n    protected _internalFormat: GLenum = 0;\r\n\r\n    /** @see {@link format} */\r\n    protected _format: GLenum = 0;\r\n\r\n    /** @see {@link type} */\r\n    protected _type: GLenum = 0;\r\n\r\n    /**\r\n     * For tracking approximate use of GPU storage in bytes per face.\r\n     */\r\n    protected _bytes: Array<GLsizei> = [0, 0, 0, 0, 0, 0];\r\n\r\n\r\n    /**\r\n     * Provides an ID for each of the six texture cube identifier (0: +x, 1: -x, 2: +y, 3: -y, 4: +z, 5: -z).\r\n     * @param face - Texture cube face identifier, e.g., `TEXTURE_CUBE_MAP_POSITIVE_X`.\r\n     * @returns - Face ID in the following sequence: 0: +x, 1: -x, 2: +y, 3: -y, 4: +z, 5: -z.\r\n     */\r\n    protected faceID(face: GLenum): GLint {\r\n        const gl = this._context.gl;\r\n        switch (face) {\r\n            case gl.TEXTURE_CUBE_MAP_POSITIVE_X:\r\n                return 0;\r\n            case gl.TEXTURE_CUBE_MAP_NEGATIVE_X:\r\n                return 1;\r\n            case gl.TEXTURE_CUBE_MAP_POSITIVE_Y:\r\n                return 2;\r\n            case gl.TEXTURE_CUBE_MAP_NEGATIVE_Y:\r\n                return 3;\r\n            case gl.TEXTURE_CUBE_MAP_POSITIVE_Z:\r\n                return 4;\r\n            case gl.TEXTURE_CUBE_MAP_NEGATIVE_Z:\r\n                return 5;\r\n            default:\r\n                assert(false, `expected texture cube map identifier (${gl.TEXTURE_CUBE_MAP_POSITIVE_X}, ` +\r\n                    `${gl.TEXTURE_CUBE_MAP_NEGATIVE_X}, ${gl.TEXTURE_CUBE_MAP_POSITIVE_Y}, ` +\r\n                    `${gl.TEXTURE_CUBE_MAP_NEGATIVE_Y}, ${gl.TEXTURE_CUBE_MAP_POSITIVE_Z}, or` +\r\n                    `${gl.TEXTURE_CUBE_MAP_NEGATIVE_Z}), given ${face}`);\r\n                return -1;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Create a texture object on the GPU.\r\n     * @param size - Initial size (width/height) of each face, which are required to be a square texture.\r\n     * @param internalFormat - Internal format of the texture object.\r\n     * @param format - Format of the texture data even though no data is passed.\r\n     * @param type - Data type of the texel data.\r\n     */\r\n    protected create(size: GLsizei, internalFormat: GLenum, format: GLenum, type: GLenum): WebGLTexture | undefined {\r\n\r\n        assert(size > 0, `texture cube requires valid size (width/height) of greater than zero`);\r\n        const gl = this._context.gl;\r\n        const gl2facade = this._context.gl2facade;\r\n\r\n        this._object = gl.createTexture();\r\n\r\n        this._size = size;\r\n        this._internalFormat = internalFormat;\r\n        this._format = format;\r\n        this._type = type;\r\n\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._object);\r\n\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n        gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, this._internalFormat,\r\n            this._size, this._size, 0, this._format, this._type);\r\n\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, TextureCube.DEFAULT_TEXTURE);\r\n        /* note that gl.isTexture requires the texture to be bound */\r\n        this._valid = gl.isTexture(this._object);\r\n        this.context.allocationRegister.reallocate(this._identifier, 0);\r\n\r\n        return this._object;\r\n    }\r\n\r\n    /**\r\n     * Delete the texture object on the GPU. This should have the reverse effect of `create`.\r\n     */\r\n    protected delete(): void {\r\n        assert(this._object instanceof WebGLTexture, `expected WebGLTexture object`);\r\n        this._context.gl.deleteTexture(this._object);\r\n\r\n        this._object = undefined;\r\n        this._valid = false;\r\n\r\n        this._internalFormat = 0;\r\n        this._format = 0;\r\n        this._type = 0;\r\n\r\n        this._size = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * Bind the texture object to a texture unit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    bind(unit?: GLenum): void {\r\n        const gl = this.context.gl;\r\n        if (unit) {\r\n            gl.activeTexture(unit);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._object);\r\n    }\r\n\r\n    /**\r\n     * Unbind the texture object from a texture unit.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    unbind(unit?: GLenum): void {\r\n        const gl = this.context.gl;\r\n        if (unit) {\r\n            gl.activeTexture(unit);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, TextureCube.DEFAULT_TEXTURE);\r\n    }\r\n\r\n    /**\r\n     * Asynchronous load of multiple images (specified per texture cube face) via URI or data URI. Please note\r\n     * that the texture will not be resized and is assumed to be resized upfront accordingly.\r\n     * @param urisByFace - URI linking the image that should be loaded for a specific face. Data URI is also supported.\r\n     * @param crossOrigin - Enable cross origin data loading.\r\n     * @returns - Promise for handling images load status.\r\n     */\r\n    @Initializable.assert_initialized()\r\n    load(urisByFace: TextureCube.PerFaceURI, crossOrigin: boolean = false): Promise<void> {\r\n\r\n        const gl = this.context.gl;\r\n        return new Promise((resolve, reject) => {\r\n            const images = new Array<[GLenum, string]>();\r\n\r\n            if (urisByFace.positiveX) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_POSITIVE_X, urisByFace.positiveX]);\r\n            }\r\n            if (urisByFace.negativeX) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_NEGATIVE_X, urisByFace.negativeX]);\r\n            }\r\n            if (urisByFace.positiveY) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_POSITIVE_Y, urisByFace.positiveY]);\r\n            }\r\n            if (urisByFace.negativeY) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, urisByFace.negativeY]);\r\n            }\r\n            if (urisByFace.positiveZ) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_POSITIVE_Z, urisByFace.positiveZ]);\r\n            }\r\n            if (urisByFace.negativeZ) {\r\n                images.push([gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, urisByFace.negativeZ]);\r\n            }\r\n\r\n            let waiting = images.length;\r\n            for (const tuple of images) {\r\n                const image = new Image();\r\n                image.onerror = () => reject();\r\n\r\n                image.onload = () => {\r\n                    if (image.width !== image.height) {\r\n                        log(LogLevel.Dev, `image ignored, width and height expected to be equal (square image)`);\r\n                        return;\r\n                    }\r\n                    if (image.width !== this._size) {\r\n                        log(LogLevel.Dev, `image ignored, width and height expected to match ` +\r\n                            `this texture's size ${this._size}, given ${image.width}`);\r\n                        return;\r\n                    }\r\n                    this.data([tuple[0], image]);\r\n\r\n                    /* Resolve the promise when all requested images have been loaded. */\r\n                    waiting = waiting - 1;\r\n                    if (waiting === 0) {\r\n                        resolve();\r\n                    }\r\n                };\r\n\r\n                if (crossOrigin) {\r\n                    image.crossOrigin = 'anonymous';\r\n                }\r\n                /* Trigger asynchronous loading of image data. */\r\n                image.src = tuple[1];\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Pass data of six images to the texture cube object.\r\n     * @param data - Per face texel data that will be copied into the objects data store. Either provided via object\r\n     * or as tuple, providing the data associated to the targeted face (as GLenum).\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    data(data: TextureCube.PerFaceData | [GLenum, TexImage2DData], bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n        const gl2facade = this.context.gl2facade;\r\n\r\n        let bytesPerFace = this._size * this._size * byteSizeOfFormat(this.context, this._internalFormat as GLenum);\r\n        // Fix in case of implicit float and half-float texture generation (e.g., in webgl with half_float support).\r\n        if (this._type === this.context.gl2facade.HALF_FLOAT && this._internalFormat !== this.context.gl.RGBA16F) {\r\n            bytesPerFace *= 2;\r\n        } else if (this._type === this.context.gl.FLOAT && this._internalFormat !== this.context.gl.RGBA16F) {\r\n            bytesPerFace *= 4;\r\n        }\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n\r\n        if (data instanceof Array && data.length === 2) { /* if tuple is provided... */\r\n            gl2facade.texImage2D(data[0], 0, this._internalFormat,\r\n                this._size, this._size, 0, this._format, this._type, data[1]);\r\n            const id = this.faceID(data[0]);\r\n            this.context.allocationRegister.deallocate(this._identifier, this._bytes[id]);\r\n            this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n            this._bytes[id] = bytesPerFace;\r\n\r\n        } else {\r\n            const perFaceData = data as TextureCube.PerFaceData;\r\n\r\n            if (perFaceData.positiveX !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.positiveX);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[0]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[0] = bytesPerFace;\r\n            }\r\n            if (perFaceData.negativeX !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.negativeX);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[1]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[1] = bytesPerFace;\r\n            }\r\n            if (perFaceData.positiveY !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.positiveY);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[2]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[2] = bytesPerFace;\r\n            }\r\n            if (perFaceData.negativeY !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.negativeY);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[3]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[3] = bytesPerFace;\r\n            }\r\n            if (perFaceData.positiveZ !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.positiveZ);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[4]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[4] = bytesPerFace;\r\n            }\r\n            if (perFaceData.negativeZ !== undefined) {\r\n                gl2facade.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, this._internalFormat,\r\n                    this._size, this._size, 0, this._format, this._type, perFaceData.negativeZ);\r\n                this.context.allocationRegister.deallocate(this._identifier, this._bytes[5]);\r\n                this.context.allocationRegister.allocate(this._identifier, bytesPerFace);\r\n                this._bytes[5] = bytesPerFace;\r\n            }\r\n        }\r\n\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the texture object's magnification and minification filter.\r\n     * @param mag - Value for the TEXTURE_MAG_FILTER parameter.\r\n     * @param min - Value for the TEXTURE_MIN_FILTER parameter.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    filter(mag: GLenum, min: GLenum, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, mag);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, min);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the texture object's wrapping function for s and t coordinates.\r\n     * @param wrap_s - Value for the TEXTURE_WRAP_S parameter.\r\n     * @param wrap_t - Value for the TEXTURE_WRAP_T parameter.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    /* tslint:disable-next-line:variable-name */\r\n    wrap(wrap_s: GLenum, wrap_t: GLenum, bind: boolean = true, unbind: boolean = true): void {\r\n        const gl = this.context.gl;\r\n\r\n        if (bind) {\r\n            this.bind();\r\n        }\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, wrap_s);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, wrap_t);\r\n        if (unbind) {\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This can be used to reformat the texture image without creating a new texture object. Please note that this\r\n     * resets the texture's image data to undefined. @see {@link data} for setting new image data.\r\n     * @param internalFormat - Internal format of the texture object.\r\n     * @param format - Format of the texture data even though no data is passed.\r\n     * @param type - Data type of the texel data.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    reformat(internalFormat: GLenum, format?: GLenum, type?: GLenum,\r\n        bind: boolean = true, unbind: boolean = true): void {\r\n\r\n        if (internalFormat === this._internalFormat\r\n            && (format === undefined || format === this._format)\r\n            && (type === undefined || type === this._type)) {\r\n            return;\r\n        }\r\n        assert(internalFormat !== undefined, `valid internal format expected`);\r\n        this._internalFormat = internalFormat;\r\n\r\n        if (format) {\r\n            this._format = format;\r\n        }\r\n        if (type) {\r\n            this._type = type;\r\n        }\r\n\r\n        this.data({ clearOnUndefined: true }, bind, unbind);\r\n    }\r\n\r\n    /**\r\n     * This should be used to efficiently resize the texture.\r\n     * @param size - Targeted/new size (width/height) of the texture in px.\r\n     * @param bind - Allows to skip binding the texture (e.g., when binding is handled outside).\r\n     * @param unbind - Allows to skip unbinding the texture (e.g., when binding is handled outside).\r\n     */\r\n    @Initializable.assert_initialized()\r\n    resize(size: GLsizei, bind: boolean = true, unbind: boolean = true): void {\r\n        if (size === this._size) {\r\n            return;\r\n        }\r\n        this._size = size;\r\n\r\n        this.data({ clearOnUndefined: true }, bind, unbind);\r\n    }\r\n\r\n    /**\r\n     * Returns the number of bytes this object approximately allocates on the GPU. The size will be zero when no\r\n     * image data was passed to the texture object.\r\n     */\r\n    get bytes(): GLsizei {\r\n        this.assertInitialized();\r\n        return this.context.allocationRegister.allocated(this._identifier);\r\n    }\r\n\r\n    /**\r\n     * Cached internal format of the texture for efficient resize. This can only be changed by re-initialization.\r\n     */\r\n    get internalFormat(): GLenum {\r\n        this.assertInitialized();\r\n        return this._internalFormat as GLenum;\r\n    }\r\n\r\n    /**\r\n     * Cached format of the data provided to the texture object for efficient resize. This is set on initialization and\r\n     * might change on data transfers.\r\n     */\r\n    get format(): GLenum {\r\n        this.assertInitialized();\r\n        return this._format as GLenum;\r\n    }\r\n\r\n    /**\r\n     * Cached type of the data provided to the texture used for efficient resize. This is set on initialization and\r\n     * might change on data transfers.\r\n     */\r\n    get type(): GLenum {\r\n        this.assertInitialized();\r\n        return this._type as GLenum;\r\n    }\r\n\r\n    /**\r\n     * The width/height of the texture object (each cube map face is required to be a square).\r\n     */\r\n    get size(): GLsizei {\r\n        this.assertInitialized();\r\n        return this._size;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport namespace TextureCube {\r\n\r\n    export interface PerFaceURI {\r\n        positiveX?: string;\r\n        negativeX?: string;\r\n        positiveY?: string;\r\n        negativeY?: string;\r\n        positiveZ?: string;\r\n        negativeZ?: string;\r\n    }\r\n\r\n    export interface PerFaceData {\r\n        positiveX?: TexImage2DData;\r\n        negativeX?: TexImage2DData;\r\n        positiveY?: TexImage2DData;\r\n        negativeY?: TexImage2DData;\r\n        positiveZ?: TexImage2DData;\r\n        negativeZ?: TexImage2DData;\r\n        clearOnUndefined: boolean;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\nimport { GLsizei2 } from './tuples';\r\n\r\n\r\n/**\r\n * Mixin that incorporates resize event handling. The mixin depends on the global window resize event and forwards any\r\n * resize event to every existing instance of this class (global tracking).\r\n */\r\nexport abstract class Resizable {\r\n\r\n    /**\r\n     * Event identifier for resize event (single point of definition).\r\n     */\r\n    private static readonly EVENT_IDENTIFIER = 'resize';\r\n\r\n    /**\r\n     * Array for referencing all instances of resizable.\r\n     */\r\n    private static instances: Array<Resizable> = [];\r\n\r\n    /**\r\n     * Resize event availability (cached value).\r\n     */\r\n    private static eventSupported = false;\r\n\r\n\r\n    /**\r\n     * This function is called when the window is resized (and the event listener was successfully registered). The\r\n     * event is forwarded to each registered resizable object.\r\n     */\r\n    protected static resize(): void {\r\n        assert(Resizable.instances.length > 0, `resize event received without a single resizable registered`);\r\n        Resizable.instances.forEach((item) => item.onResize());\r\n    }\r\n\r\n    /* istanbul ignore next */\r\n    /**\r\n     * Retrieves the native width and height of a given element in device pixel (size on screen in physical pixels). If\r\n     * the element is not found, or either window or its device pixel ratio are not defined, a default vec2 is returned.\r\n     * @param element - DOM element to get the width and height in (native) pixel from.\r\n     * @returns - Size of the element in native screen pixels.\r\n     */\r\n    static elementSize(element: HTMLElement): GLsizei2 {\r\n        if (element === undefined || window === undefined || typeof window.devicePixelRatio !== 'number') {\r\n            return [0, 0];\r\n        }\r\n\r\n        const scale = window.devicePixelRatio;\r\n        const style = getComputedStyle(element);\r\n        const size: GLsizei2 = [parseInt(style.width as string, 10), parseInt(style.height as string, 10)];\r\n\r\n        size[0] = Math.round(size[0] * scale);\r\n        size[1] = Math.round(size[1] * scale);\r\n\r\n        return size;\r\n    }\r\n\r\n\r\n    /**\r\n     * Every instance of resizable is registered in the global list of resizable instances. The first instance, however,\r\n     * triggers the registration of the global window resize event listener.\r\n     */\r\n    constructor() {\r\n        if (Resizable.instances.length === 0) { // initialize once\r\n            const event = `on${Resizable.EVENT_IDENTIFIER}`;\r\n            /* istanbul ignore next */\r\n            Resizable.eventSupported = document && (event in document.documentElement || event in document.body);\r\n\r\n            logIf(!Resizable.eventSupported, LogLevel.Dev, `resize event not supported`);\r\n        }\r\n        /* istanbul ignore next */\r\n        if (Resizable.instances.length === 0 && Resizable.eventSupported) {\r\n            window.addEventListener(Resizable.EVENT_IDENTIFIER, this._resizeEventListener);\r\n        }\r\n        Resizable.instances.push(this);\r\n    }\r\n\r\n    /* istanbul ignore next */\r\n    protected _resizeEventListener = () => Resizable.resize();\r\n\r\n    /**\r\n     * Unregister this instance from the global list of resizable instances. On destruction of the last instance, the\r\n     * resize event handle is removed. Please note that destruction needs to be invoked explicitly.\r\n     */\r\n    protected dispose(): void {\r\n        const i = Resizable.instances.indexOf(this);\r\n        assert(i !== -1, `invalid reference counting of resizable instances`);\r\n\r\n        Resizable.instances.splice(i, 1);\r\n\r\n        /* istanbul ignore next */\r\n        if (Resizable.instances.length === 0 && Resizable.eventSupported) {\r\n            window.removeEventListener(Resizable.EVENT_IDENTIFIER, this._resizeEventListener);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * This function is invoked when a resize event happened.\r\n     */\r\n    protected abstract onResize(): void;\r\n\r\n}\r\n","\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\n\r\nimport { vec2, vec4 } from 'gl-matrix';\r\nimport { clamp2, parseVec2, parseVec4 } from './gl-matrix-extensions';\r\n\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\nimport { GLclampf2, GLsizei2, tuple2, tuple4 } from './tuples';\r\n\r\n\r\nimport { Color } from './color';\r\nimport { Context } from './context';\r\nimport { Controller } from './controller';\r\nimport { MouseEventProvider } from './mouseeventprovider';\r\nimport { Renderer } from './renderer';\r\nimport { Resizable } from './resizable';\r\nimport { FramePrecisionString } from './wizard';\r\n\r\n\r\n/**\r\n * A canvas is associated to a single canvas element (DOM) and integrates or delegates event handling as well as\r\n * control over the rendering loop and the attached renderer respectively. Furthermore, the canvas can bind a single\r\n * renderer (non owning) and sets up communication between controller, renderer, and navigation. The controller invokes\r\n * the renderer's update, frame, and swap methods. The navigation manipulates the renderer's camera. The renderer can\r\n * invalidate itself which causes a controller update.\r\n *\r\n * Note: Since only the multi-frame number is used by the renderer and the controller, the canvas provides getter,\r\n * setter, and change callback setter. Debug-frame and frame number are managed exclusively by the controller.\r\n *\r\n * Note: the canvas should hold any properties that are required to be passed onto a newly bound renderer (in the case\r\n * multiple renderer are used with a canvas). The clear color is one example of such a property.\r\n */\r\nexport class Canvas extends Resizable {\r\n\r\n    /**\r\n     * Default color that is used if none is set via data attributes.\r\n     */\r\n    protected static readonly DEFAULT_CLEAR_COLOR: Color = new Color([0.203, 0.227, 0.250, 1.0]);\r\n\r\n    /**\r\n     * Default frame precision, e.g., accumulation format when multi-frame rendering is used.\r\n     */\r\n    protected static readonly DEFAULT_FRAME_PRECISION: FramePrecisionString = 'auto';\r\n\r\n    /**\r\n     * Default multi-frame number used if none is set via data attributes.\r\n     */\r\n    protected static readonly DEFAULT_MULTI_FRAME_NUMBER = 0;\r\n\r\n\r\n    /** @see {@link context} */\r\n    protected _context: Context;\r\n\r\n    /** @see {@link controller} */\r\n    protected _controller: Controller;\r\n\r\n    /** @see {@link renderer} */\r\n    protected _renderer: Renderer | undefined;\r\n\r\n\r\n    /** @see {@link clearColor} */\r\n    protected _clearColor: Color;\r\n\r\n\r\n    /**\r\n     * @see {@link framePrecision}\r\n     * This property can be observed, e.g., `aCanvas.framePrecisionObservable.subscribe()`.\r\n     */\r\n    protected _framePrecision: FramePrecisionString;\r\n    protected _framePrecisionSubject = new ReplaySubject<FramePrecisionString>(1);\r\n\r\n\r\n    /**\r\n     * @see {@link size}\r\n     * This property can be observed, e.g., `aCanvas.sizeObservable.subscribe()`.\r\n     */\r\n    protected _size: GLsizei2 = [1, 1];\r\n    protected _sizeSubject = new ReplaySubject<GLsizei2>(1);\r\n\r\n    /**\r\n     * @see {@link frameScale}\r\n     * This property can be observed, `aCanvas.frameScaleObservable.subscribe()`.\r\n     */\r\n    protected _frameScale: GLclampf2;\r\n    protected _frameScaleSubject = new ReplaySubject<GLclampf2>(1);\r\n\r\n    /**\r\n     * @see {@link frameSize}\r\n     * This property can be observed, `aCanvas.frameSizeObservable.subscribe()`.\r\n     */\r\n    protected _frameSize: GLsizei2;\r\n    protected _frameSizeSubject = new ReplaySubject<GLsizei2>(1);\r\n\r\n    /**\r\n     * Flag used to determine whether frame size or frame scale is the dominant configuration.\r\n     */\r\n    protected _favorSizeOverScale: boolean;\r\n\r\n\r\n    /** @see {@link element} */\r\n    protected _element: HTMLCanvasElement;\r\n\r\n    /** @see {@link mouseEventProvider} */\r\n    protected _mouseEventProvider: MouseEventProvider;\r\n\r\n\r\n    /**\r\n     * Create and initialize a multi-frame controller, setup a default multi-frame number and get the canvas's webgl\r\n     * context as well as the canvas resolution. The context and resolution will be passed on to the set renderer and\r\n     * its stages/passes appropriately. The canvas does not provide lazy initialization and is strictly bound to a\r\n     * single canvas element (DOM) that cannot be changed.\r\n     *\r\n     * Note: the multi-frame number can be set using a data attribute in the canvas element called\r\n     * 'data-multi-frame-number'.\r\n     *\r\n     * The canvas supports the following data attributes:\r\n     * - data-multi-frame-number {number} - integer greater than 0\r\n     * - data-clear-color {Color} - rgba color for clearing\r\n     * - data-frame-scale {GLclampf2} - width and height frame scale in [0.0,1.0]\r\n     * - data-frame-size {GLizei2} - width and height frame size in pixel\r\n     * - data-frame-precision {RenderPrecision} - precision for, e.g., frame accumulation\r\n     * , either 'float', 'half', 'byte', or 'auto'.\r\n     *\r\n     * Note: data-frame-size takes precedence if both frame-scale and frame-size data attributes are provided.\r\n     * @param element - Canvas element or element id {string} to be used for querying the canvas element.\r\n     */\r\n    constructor(element: HTMLCanvasElement | string) {\r\n        super(); // setup resize event handling\r\n        this._element = element instanceof HTMLCanvasElement ? element :\r\n            document.getElementById(element) as HTMLCanvasElement;\r\n        this._mouseEventProvider = new MouseEventProvider(this._element, 200);\r\n\r\n        const dataset = this._element.dataset;\r\n\r\n        /* Requesting a context asserts when no context could be created. */\r\n        this._context = Context.request(this._element);\r\n        this.configureController(dataset);\r\n\r\n        this.configureSizeAndScale(dataset);\r\n\r\n        /* Retrieve clear color from data attributes or set default. */\r\n        let dataClearColor: vec4 | undefined;\r\n        if (dataset.clearColor) {\r\n            dataClearColor = parseVec4(dataset.clearColor as string);\r\n            logIf(dataClearColor === undefined, LogLevel.Dev,\r\n                `data-clear-color could not be parsed, given '${dataset.clearColor}'`);\r\n        }\r\n        this._clearColor = dataClearColor ? new Color(tuple4<GLclampf>(dataClearColor)) : Canvas.DEFAULT_CLEAR_COLOR;\r\n\r\n        /* Retrieve frame precision (e.g., accumulation format) from data attributes or set default */\r\n        const dataFramePrecision = dataset.accumulationFormat as FramePrecisionString;\r\n        this._framePrecision = dataFramePrecision ? dataFramePrecision : Canvas.DEFAULT_FRAME_PRECISION;\r\n        this.framePrecisionNext();\r\n    }\r\n\r\n    /**\r\n     * Creates and initializes a new controller that is used for this canvas. If provided via data attributes\r\n     * multi-frame number and debug-frame number are set.\r\n     * @param dataset - The attributes data-multi-frame-number and data-debug-frame-number are supported.\r\n     */\r\n    protected configureController(dataset: DOMStringMap) {\r\n        /* Create and setup a multi-frame controller. */\r\n        this._controller = new Controller();\r\n        this._controller.block(); // Remain in block mode until renderer is bound and configured.\r\n\r\n        /* Retrieve multi-frame number from data attributes or set default. */\r\n        let dataMFNum: number | undefined;\r\n        if (dataset.multiFrameNumber) {\r\n            dataMFNum = parseInt(dataset.multiFrameNumber as string, 10);\r\n            logIf(isNaN(dataMFNum), LogLevel.Dev,\r\n                `data-multi-frame-number could not be parsed, given '${dataset.multiFrameNumber}'`);\r\n        }\r\n\r\n        /* Retrieve debug-frame number from data attributes or set default. */\r\n        let dataDFNum: number | undefined;\r\n        if (dataset.debugFrameNumber) {\r\n            dataDFNum = parseInt(dataset.debugFrameNumber as string, 10);\r\n            logIf(isNaN(dataDFNum), LogLevel.Dev,\r\n                `data-debug-frame-number could not be parsed, given '${dataset.debugFrameNumber}'`);\r\n        }\r\n\r\n        this._controller.multiFrameNumber = dataMFNum ? dataMFNum : Canvas.DEFAULT_MULTI_FRAME_NUMBER;\r\n        this._controller.debugFrameNumber = dataDFNum ? dataDFNum : 0;\r\n\r\n        const mfNumChanged = dataMFNum ? dataMFNum !== this._controller.multiFrameNumber : false;\r\n        logIf(mfNumChanged, LogLevel.Dev, `data-multi-frame-number changed to `\r\n            + `${this._controller.multiFrameNumber}, given '${dataset.multiFrameNumber}'`);\r\n\r\n        const dfNumChanged = dataDFNum ? dataDFNum !== this._controller.debugFrameNumber : false;\r\n        logIf(dfNumChanged, LogLevel.Dev, `data-debug-frame-number changed to `\r\n            + `${this._controller.debugFrameNumber}, given '${dataset.debugFrameNumber}'`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Initializes the frame size and scale. By default, the scale is 1.0 for width and height and the size reflects\r\n     * the native canvas size.\r\n     * @param dataset - The attributes data-frame-size and data-frame-scale are supported.\r\n     */\r\n    protected configureSizeAndScale(dataset: DOMStringMap) {\r\n\r\n        /* Setup frame scale with respect to the canvas size. */\r\n        let dataFrameScale: vec2 | undefined;\r\n        if (dataset.frameScale) {\r\n            dataFrameScale = parseVec2(dataset.frameScale);\r\n            logIf(dataset.frameScale !== undefined && dataFrameScale === undefined, LogLevel.Dev,\r\n                `data-frame-scale could not be parsed, given '${dataset.frameScale}'`);\r\n        }\r\n        this._frameScale = dataFrameScale ? tuple2<GLfloat>(dataFrameScale) : [1.0, 1.0];\r\n\r\n        /* Setup frame size. */\r\n        let dataFrameSize: vec2 | undefined;\r\n        if (dataset.frameSize) {\r\n            dataFrameSize = parseVec2(dataset.frameSize);\r\n            logIf(dataset.frameSize !== undefined && dataFrameSize === undefined, LogLevel.Dev,\r\n                `data-frame-size could not be parsed, given '${dataset.frameSize}'`);\r\n        }\r\n        this._favorSizeOverScale = dataFrameSize !== undefined;\r\n        this._frameSize = dataFrameSize ? tuple2<GLsizei>(dataFrameSize) : [this._size[0], this._size[1]];\r\n\r\n        this.onResize(); // invokes frameScaleNext and frameSizeNext\r\n    }\r\n\r\n\r\n    /**\r\n     * Convenience function that triggers the canvas size retrieval. The native width and height of the canvas dom\r\n     * element is cached (in pixel).\r\n     */\r\n    protected retrieveSize(): void {\r\n        const size = Resizable.elementSize(this._element);\r\n        this._size = [size[0], size[1]];\r\n        this.sizeNext();\r\n    }\r\n\r\n    /**\r\n     * Resize is invoked by the resizable mixin. It retrieves the canvas size and promotes it to the renderer.\r\n     */\r\n    protected onResize() {\r\n        this.retrieveSize();\r\n\r\n        /**\r\n         * Set canvas rendering size to pixel size of the canvas. This assures a 1 to 1 mapping of native pixels to\r\n         * fragments and thus should prevent upscaling.\r\n         */\r\n        this._element.width = this._size[0];\r\n        this._element.height = this._size[1];\r\n\r\n        if (this._renderer) {\r\n            this._controller.block();\r\n        }\r\n\r\n        if (this._favorSizeOverScale) {\r\n            this.frameSize = this._frameSize;\r\n        } else {\r\n            this.frameScale = this._frameScale;\r\n        }\r\n\r\n        if (this._renderer) {\r\n            this._controller.unblock();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._framePrecision changes to its associated subject.\r\n     */\r\n    protected framePrecisionNext(): void {\r\n        this._framePrecisionSubject.next(this._framePrecision);\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._size changes to its associated subject.\r\n     */\r\n    protected sizeNext(): void {\r\n        this._sizeSubject.next(this._size);\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._frameScale changes to its associated subject.\r\n     */\r\n    protected frameScaleNext(): void {\r\n        this._frameScaleSubject.next(this._frameScale);\r\n    }\r\n\r\n    /**\r\n     * Utility for communicating this._frameSize changes to its associated subject.\r\n     */\r\n    protected frameSizeNext(): void {\r\n        this._frameSizeSubject.next(this._frameSize);\r\n    }\r\n\r\n\r\n    /**\r\n     * The renderer (if not null) will be connected to the controller and navigation. The controller will\r\n     * immediately trigger a multi-frame, thereby causing the renderer to render frames.\r\n     *\r\n     * Note that no renderer should be bound to multiple canvases\r\n     * simultaneously. The reference is non owning.\r\n     *\r\n     * @param renderer - Either undefined or an uninitialized renderer.\r\n     */\r\n    protected bind(renderer: Renderer | undefined) {\r\n        if (this._renderer === renderer) {\r\n            return;\r\n        }\r\n        this.unbind(); // block controller\r\n        if (renderer === undefined) {\r\n            return;\r\n        }\r\n        assert(this._controller.blocked, `expected controller to be blocked`);\r\n        this._renderer = renderer;\r\n\r\n        /**\r\n         * Note: a renderer that is to be bound to a canvas is expected to be not initialized. For it, initializable\r\n         * throws on re-initialization. Similarly to the frame callback for the controller, the controller's update\r\n         * method is assigned to the pipelines invalidation event.\r\n         */\r\n        this._renderer.initialize(this.context, (force) => this._controller.update(force),\r\n            this._mouseEventProvider /*, this._keyEventProvider, this._touchEventProvider */);\r\n\r\n        this._renderer.frameSize = this._frameSize;\r\n        this._renderer.clearColor = this._clearColor.rgba;\r\n        this._renderer.framePrecision = this._framePrecision;\r\n        this._renderer.debugTexture = -1;\r\n\r\n        /**\r\n         * Note: again, no asserts required since controller and renderer already take care of that.\r\n         * Assign the renderer's update, frame, and swap method to the controller's frame and swap event callback.\r\n         * The assignments trigger immediate update and subsequently updates on invalidation.\r\n         */\r\n        this._controller.controllable = this._renderer;\r\n        this._controller.unblock();\r\n    }\r\n\r\n    /**\r\n     * Unbinds the current renderer from the canvas as well as the controller and navigation, and uninitializes the\r\n     * renderer.\r\n     */\r\n    protected unbind() {\r\n        if (this._renderer === undefined) {\r\n            return;\r\n        }\r\n\r\n        this._controller.block();\r\n        /**\r\n         * Since canvas is not the owner of the renderer it should not dispose it. However, the canvas manages the\r\n         * initialization of bound pipelines.\r\n         */\r\n        this._controller.controllable = undefined;\r\n        this._renderer = undefined;\r\n    }\r\n\r\n\r\n    /**\r\n     * Uninitializes and deletes the controller as well as all other properties.\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n\r\n        if (this._renderer) {\r\n            this._renderer.uninitialize();\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Allows for explicit trigger of onResize, e.g., in case resize event-handling is managed explicitly ...\r\n     */\r\n    resize(): void {\r\n        this.onResize();\r\n    }\r\n\r\n\r\n    /**\r\n     * Single controller that is managing the rendering control flow of a bound renderer.\r\n     * @returns - The controller used by the canvas.\r\n     */\r\n    get controller(): Controller {\r\n        return this._controller;\r\n    }\r\n\r\n    /**\r\n     * The currently bound renderer. If no renderer is bound null is returned. If a renderer is bound, it should\r\n     * always be initialized (renderer initialization handled by the canvas).\r\n     * @returns - The currently bound renderer.\r\n     */\r\n    get renderer(): Renderer | undefined {\r\n        return this._renderer;\r\n    }\r\n\r\n    /**\r\n     * Binds a renderer to the canvas. A previously bound renderer will be unbound (see bind and unbind).\r\n     * @param renderer - A renderer object or undefined.\r\n     */\r\n    set renderer(renderer: Renderer | undefined) {\r\n        this.bind(renderer);\r\n    }\r\n\r\n    /**\r\n     * Targeted scale for rendering with respect to the canvas size. This property can be observed, e.g.,\r\n     * `canvas.frameScaleObservable.subscribe()`.\r\n     * @returns - The frame scale in [0.0, 1.0].\r\n     */\r\n    get frameScale(): GLclampf2 {\r\n        return this._frameScale;\r\n    }\r\n\r\n    /**\r\n     * Set the targeted scale for rendering with respect to the canvas size. The scale will be clamped to [0.0,1.0]. A\r\n     * scale of 0.0 results in 1px frame resolution for the respective component.\r\n     * The frame scale allows to detach the rendering resolution from the native canvas resolution, e.g., in order to\r\n     * decrease rendering cost. The frame resolution can also be specified explicitly by width and height.\r\n     * @param frameScale - Scale of rendering.\r\n     * @returns - The frame scale in [0.0,1.0].\r\n     */\r\n    set frameScale(frameScale: GLclampf2) {\r\n        /* Always apply frame scale, e.g., when canvas is resized scale remains same, but frame size will change. */\r\n        logIf(frameScale[0] < 0.0 || frameScale[0] > 1.0, LogLevel.Dev,\r\n            `frame width scale clamped to [0.0,1.0], given ${frameScale[0]}`);\r\n        logIf(frameScale[1] < 0.0 || frameScale[1] > 1.0, LogLevel.Dev,\r\n            `frame height scale clamped to [0.0,1.0], given ${frameScale[0]}`);\r\n\r\n        const scale = vec2.create();\r\n        clamp2(scale, frameScale, [0.0, 0.0], [1.0, 1.0]);\r\n\r\n        const size = vec2.create();\r\n        vec2.mul(size, this._size, scale);\r\n        vec2.max(size, [1, 1], size);\r\n        vec2.round(size, size);\r\n\r\n        /* Adjust scale based on rounded (integer) frame size. */\r\n        vec2.div(scale, size, this._size);\r\n        logIf(!vec2.exactEquals(scale, frameScale), 2,\r\n            `frame scale was adjusted to ${scale.toString()}, given ${frameScale.toString()}`);\r\n\r\n        this._frameScale = tuple2<GLclampf>(scale);\r\n        this._frameSize = tuple2<GLsizei>(size);\r\n        this._favorSizeOverScale = false;\r\n\r\n        this.frameScaleNext();\r\n        this.frameSizeNext();\r\n\r\n        if (this._renderer) {\r\n            this._renderer.frameSize = this._frameSize;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to frame scale changes.\r\n     */\r\n    get frameScaleObservable(): Observable<GLclampf2> {\r\n        return this._frameScaleSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Targeted resolution (width and height) for rendering in pixel. This property can be observed, e.g.,\r\n     * `canvas.frameSizeObservable.subscribe()`.\r\n     * @returns - The frame size in pixel (must not be physical/native pixels).\r\n     */\r\n    get frameSize(): GLsizei2 {\r\n        return this._frameSize;\r\n    }\r\n\r\n    /**\r\n     * Set the targeted size for rendering in pixels. The size will be clamped to [1, canvas-size]. The frame size\r\n     * allows to detach the rendering resolution from the native canvas resolution, e.g., in order to decrease\r\n     * rendering cost.\r\n     * The render resolution can also be specified implicitly by width and height in scale (@see frameScale).\r\n     * @param frameSize - Size for rendering in pixel (must not be physical/native pixels).\r\n     * @returns - The frame size in [1, canvas-size].\r\n     */\r\n    set frameSize(frameSize: GLsizei2) {\r\n        logIf(frameSize[0] < 1 || frameSize[0] > this._size[0], LogLevel.Dev,\r\n            `frame width scale clamped to [1,${this._size[0]}], given ${frameSize[0]}`);\r\n        logIf(frameSize[1] < 1 || frameSize[1] > this._size[1], LogLevel.Dev,\r\n            `frame height scale clamped to [1, ${this._size[1]}], given ${frameSize[1]}`);\r\n\r\n        const size = vec2.create();\r\n        clamp2(size, frameSize, [1.0, 1.0], this._size);\r\n        vec2.round(size, size);\r\n\r\n        logIf(!vec2.exactEquals(size, frameSize), LogLevel.ModuleDev,\r\n            `frame size was adjusted to ${size.toString()}, given ${frameSize.toString()}`);\r\n\r\n        const scale = vec2.create();\r\n        vec2.div(scale, size, this._size);\r\n\r\n        this._frameScale = tuple2<GLclampf>(scale);\r\n        this._frameSize = tuple2<GLsizei>(size);\r\n        /* Switch back to default mode (scale based) when frame size matches canvas size. */\r\n        this._favorSizeOverScale = !vec2.exactEquals(this._frameSize, this._size);\r\n\r\n        this.frameScaleNext();\r\n        this.frameSizeNext();\r\n\r\n        if (this._renderer) {\r\n            this._renderer.frameSize = this._frameSize;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to frame size changes.\r\n     */\r\n    get frameSizeObservable(): Observable<GLsizei2> {\r\n        return this._frameSizeSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Getter for the canvas's clear color. The clear color is provided to the renderer (on bind). Since this is a\r\n     * canvas specific setting it is stored here, not in a renderer or controller.\r\n     * @returns - Color object passed to any renderer bound to this canvas.\r\n     */\r\n    get clearColor(): Color {\r\n        return this._clearColor;\r\n    }\r\n\r\n    /**\r\n     * Sets the clear color that is then passed to the currently bound renderer as well as to any pipelines bound in\r\n     * the future. The provided color will be clamped to [0.0;1.0] for every component.\r\n     * @param clearColor - Color object that will be referenced.\r\n     */\r\n    set clearColor(clearColor: Color) {\r\n        this._clearColor = clearColor;\r\n        if (this._renderer) {\r\n            this._renderer.clearColor = this._clearColor.rgba;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Getter for the targeted frame precision. This property can be observed, e.g.,\r\n     * `canvas.framePrecisionObservable.subscribe()`.\r\n     * @returns - Accumulation format as string passed to any renderer bound.\r\n     */\r\n    get framePrecision(): FramePrecisionString {\r\n        return this._framePrecision;\r\n    }\r\n\r\n    /**\r\n     * Sets the targeted frame precision that is then passed to the currently bound renderer as well as to any renderers\r\n     * bound in the future. This might be used for frame accumulation in multi-frame based rendering.\r\n     * @param precision - Frame precision, 'float', 'half', 'byte' or 'auto' are supported.\r\n     */\r\n    set framePrecision(precision: FramePrecisionString) {\r\n        this._framePrecision = precision;\r\n\r\n        if (this._renderer) {\r\n            this._renderer.framePrecision = this._framePrecision;\r\n            this._framePrecision = this._renderer.framePrecision; // might change due to missing support\r\n        }\r\n        this.framePrecisionNext();\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to frame precision changes.\r\n     */\r\n    get framePrecisionObservable(): Observable<string> {\r\n        return this._framePrecisionSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Provides access to the WebGL context (leaky abstraction).\r\n     */\r\n    get context(): Context {\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * Getter for the created rendering backend (webgl context type).\r\n     * @returns - Backend that was created on construction, either 'webgl' or 'webgl2' based on which one was created\r\n     * successfully. If no context could be created null is returned.\r\n     */\r\n    get backend(): string {\r\n        return this._context.backendString as string;\r\n    }\r\n\r\n\r\n    /**\r\n     * Size of the canvas measured in physical/native screen pixels. This is the 'managed' canvas width and height. The\r\n     * unmanaged canvas width and height are available via context.gl.canvas.width and context.gl.canvas.height (which\r\n     * should always be the same).\r\n     * This property can be observed, e.g., `allocationRegister.bytesObservable.subscribe()`.\r\n     * @returns - The canvas width and height in physical/native screen pixels as 2-tuple.\r\n     */\r\n    get size(): GLsizei2 {\r\n        return this._size;\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to canvas size changes.\r\n     */\r\n    get sizeObservable(): Observable<GLsizei2> {\r\n        return this._sizeSubject.asObservable();\r\n    }\r\n\r\n\r\n    /**\r\n     * Width of the canvas measured in physical/native screen pixels. This is the 'managed' canvas width. The\r\n     * unmanaged canvas width is available via context.gl.canvas_width (which should always be the same).\r\n     * @returns - The canvas width in physical/native screen pixels.\r\n     */\r\n    get width(): GLsizei {\r\n        return this._size[0];\r\n    }\r\n\r\n    /**\r\n     * Height of the canvas measured in physical/native screen pixels. This is the 'managed' canvas height. The\r\n     * unmanaged canvas height is available via context.gl.canvas_height (which should always be the same).\r\n     * @returns - The canvas height in physical/native screen pixels.\r\n     */\r\n    get height(): GLsizei {\r\n        return this._size[1];\r\n    }\r\n\r\n\r\n    /**\r\n     * Canvas element within the HTML5 document.\r\n     */\r\n    get element(): HTMLElement {\r\n        return this._element;\r\n    }\r\n\r\n\r\n    /**\r\n     * Canvas mouse event provider referring to the canvas element.\r\n     */\r\n    get mouseEventProvider(): MouseEventProvider {\r\n        return this._mouseEventProvider;\r\n    }\r\n\r\n}\r\n","\r\n\r\nimport { assert } from './auxiliaries';\r\n\r\nimport { BackendType, Context } from './context';\r\n\r\n\r\nexport type TexImage2DData = GLintptr | HTMLImageElement | HTMLCanvasElement | HTMLVideoElement |\r\n    ImageBitmap | ImageData | ArrayBufferView | undefined;\r\n\r\n\r\n/**\r\n * A WebGL 2 facade, simplifying the access to gl functions that are either not available, exposed via extension or\r\n * supported directly, e.g., in webgl2. All gl features/interfaces handled by this facade are mandatory.\r\n */\r\nexport class GL2Facade {\r\n\r\n    /* tslint:disable:member-ordering variable-name */\r\n\r\n    /**\r\n     * @param context - Wrapped gl context for function resolution.\r\n     * @param extensions - Identifiers of mandatory extensions for which the support is asserted.\r\n     */\r\n    constructor(context: Context) {\r\n        assert(context !== undefined, `gl2 facade expects a valid WebGL context`);\r\n\r\n        this.queryHalfFloatSupport(context);\r\n        this.queryColorAttachments(context);\r\n        this.queryInstancedArraySupport(context);\r\n        this.queryDrawBuffersSupport(context);\r\n        this.queryVertexArrayObjectSupport(context);\r\n        this.queryMaxUniformVec3Components(context);\r\n        this.queryTexImageInterface(context);\r\n    }\r\n\r\n\r\n    // HALF FLOAT\r\n\r\n    /**\r\n     * Stores the HALF_FLOAT enum if supported. @see {@link HALF_FLOAT}\r\n     */\r\n    protected _halfFloat: GLenum;\r\n\r\n    /**\r\n     * The HALF_FLOAT format enum. Is `undefined` if not supported.\r\n     */\r\n    get HALF_FLOAT(): GLenum {\r\n        return this._halfFloat;\r\n    }\r\n\r\n    /**\r\n     *  For WebGL1 the HALF_FLOAT enum needs to be saved via the extension object.\r\n     */\r\n    protected queryHalfFloatSupport(context: Context): void {\r\n        switch (context.backend) {\r\n            case BackendType.WebGL1:\r\n                this._halfFloat = context.supportsTextureHalfFloat && context.textureHalfFloat ?\r\n                    context.textureHalfFloat.HALF_FLOAT_OES : undefined;\r\n                break;\r\n\r\n            case BackendType.WebGL2:\r\n            /* falls through */\r\n            default:\r\n                this._halfFloat = context.gl.HALF_FLOAT;\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // COLOR ATTACHMENTS\r\n\r\n    /**\r\n     * Stores the lowest color attachment identifier.\r\n     */\r\n    protected _colorAttachmentMin: GLenum;\r\n    /**\r\n     * The lowest color attachment identifier format enum.\r\n     */\r\n    get COLOR_ATTACHMENT_MIN(): GLenum {\r\n        return this._colorAttachmentMin;\r\n    }\r\n\r\n    /**\r\n     * Stores the highest supported color attachment identifier.\r\n     */\r\n    protected _colorAttachmentMax: GLenum;\r\n\r\n    /**\r\n     * Stores all context/backend sepcific color attachment identifier for COLOR_ATTACHMENT# getter.\r\n     */\r\n    protected _colorAttachments: Array<GLenum>;\r\n\r\n    /**\r\n     * The lowest color attachment identifier format enum.\r\n     * Is at least `COLOR_ATTACHMENT_MIN`.\r\n     */\r\n    get COLOR_ATTACHMENT_MAX(): GLenum {\r\n        return this._colorAttachmentMax;\r\n    }\r\n\r\n    get COLOR_ATTACHMENT0(): GLenum {\r\n        return this._colorAttachments[0];\r\n    }\r\n    get COLOR_ATTACHMENT1(): GLenum {\r\n        return this._colorAttachments[1];\r\n    }\r\n    get COLOR_ATTACHMENT2(): GLenum {\r\n        return this._colorAttachments[2];\r\n    }\r\n    get COLOR_ATTACHMENT3(): GLenum {\r\n        return this._colorAttachments[3];\r\n    }\r\n    get COLOR_ATTACHMENT4(): GLenum {\r\n        return this._colorAttachments[4];\r\n    }\r\n    get COLOR_ATTACHMENT5(): GLenum {\r\n        return this._colorAttachments[5];\r\n    }\r\n    get COLOR_ATTACHMENT6(): GLenum {\r\n        return this._colorAttachments[6];\r\n    }\r\n    get COLOR_ATTACHMENT7(): GLenum {\r\n        return this._colorAttachments[7];\r\n    }\r\n    get COLOR_ATTACHMENT8(): GLenum {\r\n        return this._colorAttachments[8];\r\n    }\r\n    get COLOR_ATTACHMENT9(): GLenum {\r\n        return this._colorAttachments[9];\r\n    }\r\n    get COLOR_ATTACHMENT10(): GLenum {\r\n        return this._colorAttachments[10];\r\n    }\r\n    get COLOR_ATTACHMENT11(): GLenum {\r\n        return this._colorAttachments[11];\r\n    }\r\n    get COLOR_ATTACHMENT12(): GLenum {\r\n        return this._colorAttachments[12];\r\n    }\r\n    get COLOR_ATTACHMENT13(): GLenum {\r\n        return this._colorAttachments[13];\r\n    }\r\n    get COLOR_ATTACHMENT14(): GLenum {\r\n        return this._colorAttachments[14];\r\n    }\r\n    get COLOR_ATTACHMENT15(): GLenum {\r\n        return this._colorAttachments[15];\r\n    }\r\n\r\n    /**\r\n     * Queries the valid range of color attachments and provides an interface for convenience.\r\n     */\r\n    protected queryColorAttachments(context: Context): void {\r\n        const gl = context.gl;\r\n\r\n        this._colorAttachments = new Array<GLenum>(16);\r\n        this._colorAttachments[0] = gl.COLOR_ATTACHMENT0;\r\n\r\n        /**\r\n         * In WebGL, draw buffers is supported by extension, in WebGL2 by default.\r\n         * This maps the various default color attachment identifier to a unified interface.\r\n         */\r\n        switch (context.backend) {\r\n            case BackendType.WebGL1:\r\n                const drawBuffers = context.supportsDrawBuffers ? context.drawBuffers : undefined;\r\n\r\n                this._colorAttachmentMin = this._colorAttachments[0];\r\n                this._colorAttachmentMax = this._colorAttachmentMin + (drawBuffers ?\r\n                    gl.getParameter(drawBuffers.MAX_COLOR_ATTACHMENTS_WEBGL) : 0) as GLenum;\r\n\r\n                this._colorAttachments[0] = drawBuffers ? drawBuffers.COLOR_ATTACHMENT0_WEBGL : gl.COLOR_ATTACHMENT0;\r\n                if (!drawBuffers) {\r\n                    break;\r\n                }\r\n                for (let i = 1; i < 16; ++i) {\r\n                    // Enums are assumed to be incremental in their definition ...\r\n                    this._colorAttachments[i] = drawBuffers.COLOR_ATTACHMENT0_WEBGL + i;\r\n                }\r\n                break;\r\n\r\n            case BackendType.WebGL2:\r\n            /* falls through */\r\n            default:\r\n                this._colorAttachmentMin = context.gl.COLOR_ATTACHMENT0;\r\n                this._colorAttachmentMax = context.gl.COLOR_ATTACHMENT0\r\n                    + gl.getParameter(gl.MAX_COLOR_ATTACHMENTS) as GLenum;\r\n\r\n                for (let i = 0; i < 16; ++i) {\r\n                    // Enums are assumed to be incremental in their definition ...\r\n                    this._colorAttachments[i] = gl.COLOR_ATTACHMENT0 + i;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // INSTANCED ARRAYS\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/ANGLE_instanced_arrays/drawArraysInstancedANGLE\r\n     */\r\n    drawArraysInstanced: (mode: GLenum, first: GLint, count: GLsizei, instanceCount: GLsizei) => void;\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/ANGLE_instanced_arrays/drawElementsInstancedANGLE\r\n     */\r\n    drawElementsInstanced: (mode: GLenum, count: GLint, type: GLsizei, offset: GLintptr, primcount: GLsizei) => void;\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/ANGLE_instanced_arrays/vertexAttribDivisorANGLE\r\n     */\r\n    vertexAttribDivisor: (index: GLuint, divisor: GLuint) => void;\r\n\r\n    /**\r\n     * Evaluate wether or not ANGLE_instanced_arrays is supported (either by extension or in WebGL2 by default) and, if\r\n     * supported, binds the associated functions.\r\n     * @param context - WebGL context to query extension support in\r\n     */\r\n    protected queryInstancedArraySupport(context: Context): void {\r\n        if (!context.isWebGL2 && !context.supportsInstancedArrays) {\r\n            return;\r\n        }\r\n\r\n        this.drawArraysInstanced = context.isWebGL2 ?\r\n            (mode: GLenum, first: GLint, count: GLsizei, instanceCount: GLsizei) =>\r\n                context.gl.drawArraysInstanced(mode, first, count, instanceCount) :\r\n            (mode: GLenum, first: GLint, count: GLsizei, instanceCount: GLsizei) =>\r\n                context.instancedArrays.drawArraysInstancedANGLE(mode, first, count, instanceCount);\r\n\r\n        this.drawElementsInstanced = context.isWebGL2 ?\r\n            (mode: GLenum, count: GLint, type: GLsizei, offset: GLintptr, primcount: GLsizei) =>\r\n                context.gl.drawElementsInstanced(mode, count, type, offset, primcount) :\r\n            (mode: GLenum, count: GLint, type: GLsizei, offset: GLintptr, primcount: GLsizei) =>\r\n                context.instancedArrays.drawElementsInstancedANGLE(mode, count, type, offset, primcount);\r\n\r\n        this.vertexAttribDivisor = context.isWebGL2 ?\r\n            (index: GLuint, divisor: GLuint) => context.gl.vertexAttribDivisor(index, divisor) :\r\n            (index: GLuint, divisor: GLuint) => context.instancedArrays.vertexAttribDivisorANGLE(index, divisor);\r\n    }\r\n\r\n\r\n    // DRAW BUFFERS\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WEBGL_draw_buffers/drawBuffersWEBGL\r\n     */\r\n    drawBuffers: ((buffers: Array<GLenum>) => void) | undefined = undefined;\r\n\r\n    /**\r\n     * Evaluate wether or not WEBGL_draw_buffers is supported (either by extension or in WebGL2 by default) and, if\r\n     * supported, binds the associated functions.\r\n     * @param context - WebGL context to query extension support in.\r\n     * @returns - True if WEBGL_draw_buffers is supported and associated functions are bound.\r\n     */\r\n    protected queryDrawBuffersSupport(context: Context): void {\r\n        if (!context.isWebGL2 && !context.supportsDrawBuffers) {\r\n            return;\r\n        }\r\n\r\n        this.drawBuffers = context.isWebGL2 ?\r\n            (buffers: Array<GLenum>) => context.gl.drawBuffers(buffers) :\r\n            (buffers: Array<GLenum>) => context.drawBuffers.drawBuffersWEBGL(buffers);\r\n    }\r\n\r\n\r\n    // VERTEX ARRAY\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/createVertexArray\r\n     */\r\n    createVertexArray: () => any /* WebGLVertexArrayObject */;\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/createVertexArray\r\n     */\r\n    deleteVertexArray: (arrayObject: any /* WebGLVertexArrayObject */) => void;\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/isVertexArray\r\n     */\r\n    isVertexArray: (arrayObject: any /* WebGLVertexArrayObject */) => GLboolean;\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/bindVertexArray\r\n     */\r\n    bindVertexArray: (arrayObject: any /* WebGLVertexArrayObject */) => void;\r\n\r\n    protected queryVertexArrayObjectSupport(context: Context): void {\r\n        if (!context.isWebGL2 && !context.supportsVertexArrayObject) {\r\n            return;\r\n        }\r\n\r\n        this.createVertexArray = context.isWebGL2 ?\r\n            () => context.gl.createVertexArray() :\r\n            () => context.vertexArrayObject.createVertexArrayOES();\r\n\r\n        this.deleteVertexArray = context.isWebGL2 ?\r\n            (arrayObject: any) => context.gl.deleteVertexArray(arrayObject) :\r\n            (arrayObject: any) => context.vertexArrayObject.deleteVertexArrayOES(arrayObject);\r\n\r\n        this.isVertexArray = context.isWebGL2 ?\r\n            (arrayObject: any) => context.gl.isVertexArray(arrayObject) :\r\n            (arrayObject: any) => context.vertexArrayObject.isVertexArrayOES(arrayObject);\r\n\r\n        this.bindVertexArray = context.isWebGL2 ?\r\n            (arrayObject: any) => context.gl.bindVertexArray(arrayObject) :\r\n            (arrayObject: any) => context.vertexArrayObject.bindVertexArrayOES(arrayObject);\r\n    }\r\n\r\n\r\n    // MAX UNIFORM COMPONENTS\r\n\r\n    /** @see {@link maxUniformVec3Components} */\r\n    protected _maxUniformVec3Components: GLint | undefined;\r\n    /**\r\n     * The maximum number of floats, integers, or booleans that can be in storage for a vertex shader.\r\n     */\r\n    get maxUniformVec3Components(): GLint | undefined {\r\n        return this._maxUniformVec3Components;\r\n    }\r\n\r\n    /**\r\n     * Query and store the maximum number of floats, integers, or booleans that can be in storage for a vertex shader.\r\n     * @param context - WebGL context to query the value in.\r\n     */\r\n    protected queryMaxUniformVec3Components(context: Context): void {\r\n        const gl = context.gl;\r\n\r\n        this._maxUniformVec3Components = context.isWebGL2\r\n            ? gl.getParameter(gl.MAX_VERTEX_UNIFORM_COMPONENTS)\r\n            : gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS) * 3;\r\n    }\r\n\r\n\r\n    // TEX IMAGE INTERFACE\r\n\r\n\r\n    /**\r\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/texImage2D\r\n     */\r\n    texImage2D: (target: GLenum, level: GLint, internalformat: GLenum, width: GLsizei, height: GLsizei,\r\n        border: GLint, format: GLenum, type: GLenum, source?: TexImage2DData, offset?: GLintptr) => void;\r\n\r\n    protected queryTexImageInterface(context: Context): void {\r\n        const gl = context.gl;\r\n\r\n        if (context.isWebGL2) {\r\n            this.texImage2D = (target: GLenum, level: GLint, internalformat: GLenum, width: GLsizei, height: GLsizei,\r\n                border: GLint, format: GLenum, type: GLenum, source?: TexImage2DData, offset?: GLintptr) => {\r\n                /* Please note that source must be 'null', not '0' nor 'undefined' for ie and edge to work. */\r\n                if (source instanceof ArrayBuffer) {\r\n                    return gl.texImage2D(target, level, internalformat, width, height, border\r\n                        /* tslint:disable-next-line:no-null-keyword */\r\n                        , format, type, source === undefined ? null : source, offset);\r\n                }\r\n                assert(offset === undefined, `offset expected to be undefined for non ArrayBuffer source`);\r\n                return gl.texImage2D(target, level, internalformat, width, height, border\r\n                    /* tslint:disable-next-line:no-null-keyword */\r\n                    , format, type, source === undefined ? null : source);\r\n            };\r\n\r\n        } else {\r\n            this.texImage2D = (target: GLenum, level: GLint, internalformat: GLenum, width: GLsizei, height: GLsizei,\r\n                border: GLint, format: GLenum, type: GLenum, source?: TexImage2DData, offset?: GLintptr) => {\r\n\r\n                if (source === undefined) {\r\n                    /* tslint:disable-next-line:no-null-keyword */\r\n                    return gl.texImage2D(target, level, internalformat, width, height, border, format, type, null);\r\n                }\r\n                if (source instanceof Int8Array\r\n                    || source instanceof Uint8Array\r\n                    || source instanceof Uint8ClampedArray\r\n                    || source instanceof Int16Array\r\n                    || source instanceof Uint16Array\r\n                    || source instanceof Int32Array\r\n                    || source instanceof Uint32Array\r\n                    || source instanceof Float32Array\r\n                    || source instanceof Float64Array\r\n                    || source instanceof DataView) {\r\n                    return gl.texImage2D(target, level, internalformat, width, height, border, format, type, source);\r\n                }\r\n                return gl.texImage2D(target, level, internalformat, format, type, source);\r\n            };\r\n        }\r\n    }\r\n\r\n}\r\n","\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\n\r\nimport { assert, prettyPrintBytes } from './auxiliaries';\r\n\r\n\r\n/**\r\n * This register enables monitoring of memory (de)allocations and is intended for use in WebGL context for internal GPU\r\n * memory allocation tracking. For it, a unique identifier for registration has to be created:\r\n * ```\r\n * let gpuAllocReg = this.context.gpuAllocationRegister;\r\n * const identifier = gpuAllocReg.createUniqueIdentifier('gpu-object');\r\n * ```\r\n *\r\n * Then allocations, deallocations, and reallocations can be registered:\r\n * ```\r\n * gpuAllocReg.allocate(identifier, this.sizeofRGBAColorAttachment());\r\n * gpuAllocReg.allocate(identifier, this.sizeofDepthStencilAttachment());\r\n * // ... reallocation\r\n * gpuAllocReg.reallocate(identifier,\r\n *     this.sizeofRGBAColorAttachment() + this.sizeofDepthStencilAttachment());\r\n * // ... uninitialize\r\n * gpuAllocReg.reallocate(identifier, 0);\r\n * ```\r\n *\r\n * Requesting the allocated memory can be done as follows:\r\n * ```\r\n * // memory allocated by identifier:\r\n * console.log(mfCanvas.context.gpuAllocationRegister.toString());\r\n * //> IntermediateFBO: 10.582MiB, AccumulationPingFBO: 21.163MiB, AccumulationPongFBO: 21.163MiB\r\n *\r\n * // memory allocated over all identifiers:\r\n * console.log(mfCanvas.context.gpuAllocationRegister.bytesToString());\r\n * //> 52.908MiB\r\n * ```\r\n */\r\nexport class AllocationRegister {\r\n\r\n    /**\r\n     * Map that provides access to the accumulated memory allocations for all registered identifiers.\r\n     */\r\n    protected _bytesByIdentifier = new Map<string, GLsizei>();\r\n\r\n    /** @see {@link bytes} */\r\n    protected _bytes: GLsizei = 0;\r\n    protected _bytesSubject = new ReplaySubject<[GLsizei, string]>(1);\r\n\r\n    /**\r\n     * Utility for communicating this._bytes changes to its associated subject.\r\n     */\r\n    protected bytesNext(): void {\r\n        this._bytesSubject.next([this._bytes, this.bytesToString()]);\r\n    }\r\n\r\n\r\n    /**\r\n     * Asserts existence of an identifier.\r\n     * @param identifier - Identifier to assert the existence of.\r\n     */\r\n    protected assertIdentifier(identifier: string): void {\r\n        assert(this._bytesByIdentifier.has(identifier), `allocation identifier unknown`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates a unique identifier based on a given identifier: if the identifier is already unique it is returned as\r\n     * is. If not, an enumerated identifier is returned, e.g., 'TempFBO-2' when 'TempFBO' already exists. This also\r\n     * enables tracking for the identifier, thus, it should always be called before tracking/monitoring.\r\n     * @param identifier - Requested identifier for allocation registration.\r\n     * @returns - Unique identifier (might differ from given identifier) for which allocation registration is enabled.\r\n     */\r\n    createUniqueIdentifier(identifier: string): string {\r\n        let uniqueIdentifier: string = identifier;\r\n        let unificationSuffix = 2;\r\n\r\n        while (this._bytesByIdentifier.has(uniqueIdentifier)) {\r\n            uniqueIdentifier = `${identifier}-${unificationSuffix}`;\r\n            ++unificationSuffix;\r\n        }\r\n\r\n        this._bytesByIdentifier.set(uniqueIdentifier, 0);\r\n        return uniqueIdentifier;\r\n    }\r\n\r\n    /**\r\n     * Removes a previously created unique identifier from the allocation registry.\r\n     * @param identifier - Identifier that is to be deleted from allocation registration.\r\n     */\r\n    deleteUniqueIdentifier(identifier: string): void {\r\n        assert(this._bytesByIdentifier.has(identifier), `identifier expected to be known for allocation registration`);\r\n        this._bytesByIdentifier.delete(identifier);\r\n    }\r\n\r\n    /**\r\n     * Registers allocated bytes for a given identifier.\r\n     * @param identifier - Identifier to register the allocated bytes for.\r\n     * @param allocate - Allocated bytes to register for identifier.\r\n     */\r\n    allocate(identifier: string, allocate: number): void {\r\n        this.assertIdentifier(identifier);\r\n\r\n        assert(allocate >= 0, `positive number of bytes expected for allocation, given ${allocate}`);\r\n\r\n        /* Nothing to do if no bytes are allocated */\r\n        if (allocate === 0) {\r\n            return;\r\n        }\r\n\r\n        const bytes = (this._bytesByIdentifier.get(identifier) as number) + allocate;\r\n        this._bytesByIdentifier.set(identifier, bytes);\r\n\r\n        this._bytes = this._bytes + allocate; // allocate total\r\n        this.bytesNext();\r\n    }\r\n\r\n    /**\r\n     * Registers deallocated bytes for a given identifier.\r\n     * @param identifier - Identifier to register the deallocated bytes for.\r\n     * @param allocate - Number of deallocated bytes to register for identifier.\r\n     */\r\n    deallocate(identifier: string, deallocate: number): void {\r\n        this.assertIdentifier(identifier);\r\n\r\n        const bytes = this._bytesByIdentifier.get(identifier) as number;\r\n        assert(deallocate >= 0, `positive number of bytes expected for deallocation, given ${deallocate}`);\r\n        assert(deallocate <= bytes, `deallocation cannot exceed previous allocations of ${bytes}, given ${deallocate}`);\r\n\r\n        /* Nothing to do if no bytes are deallocated */\r\n        if (deallocate === 0) {\r\n            return;\r\n        }\r\n\r\n        this._bytesByIdentifier.set(identifier, bytes - deallocate);\r\n\r\n        this._bytes = this._bytes - deallocate; // deallocate total\r\n        this.bytesNext();\r\n    }\r\n\r\n    /**\r\n     * Resets the previously allocated bytes for the given identifier and registers the given allocated bytes instead.\r\n     * @param identifier - Identifier to register the reallocated bytes for.\r\n     * @param allocate - Number of reallocated bytes to register for identifier.\r\n     */\r\n    reallocate(identifier: string, reallocate: number): void {\r\n        this.assertIdentifier(identifier);\r\n        assert(reallocate >= 0, `positive number of bytes expected for reallocation, given ${reallocate}`);\r\n\r\n        const previousBytes = this._bytesByIdentifier.get(identifier) as number;\r\n\r\n        /* Nothing to do if same size should be reallocated */\r\n        if (previousBytes === reallocate) {\r\n            return;\r\n        }\r\n\r\n        this._bytes = this._bytes - previousBytes; // deallocate total\r\n        this._bytesByIdentifier.set(identifier, reallocate);\r\n\r\n        this._bytes = this._bytes + reallocate; // allocate total\r\n        this.bytesNext();\r\n    }\r\n\r\n    /**\r\n     * Provides access to the allocated bytes for an identifier as well as the overall allocated bytes (when identifier\r\n     * is undefined, default). If the identifier is undefined, the overall allocated number of bytes is returned.\r\n     * @param identifier - Identifier to return the allocated bytes for.\r\n     * @param allocate - Number of allocated bytes registered for identifier.\r\n     */\r\n    allocated(identifier?: string): number {\r\n        if (identifier === undefined) {\r\n            return this._bytes;\r\n        }\r\n        this.assertIdentifier(identifier);\r\n        return this._bytesByIdentifier.get(identifier) as number;\r\n    }\r\n\r\n    /**\r\n     * Provides a pretty printed string of the allocated bytes of this register and their identifier. The output for a\r\n     * register of three objects could be as follows:\r\n     * ```\r\n     * IntermediateFBO: 10.582MiB, AccumulationPingFBO: 21.163MiB, AccumulationPongFBO: 21.163MiB\r\n     * ```\r\n     * @returns - Pretty printed string of all memory allocations.\r\n     */\r\n    toString(): string {\r\n        const output = new Array<string>();\r\n        this._bytesByIdentifier.forEach((bytes: number, identifier: string) => {\r\n            output.push(`${identifier}: ${prettyPrintBytes(bytes)}`);\r\n        });\r\n        return output.join(', ');\r\n    }\r\n\r\n    /**\r\n     * Provides a pretty printed string of the overall number of bytes or a specific identifier. If the identifier is\r\n     * undefined, the overall number of bytes is pretty printed.\r\n     * @param identifier - Identifier to pretty print the bytes for.\r\n     * @returns - Pretty printed string of the requested number of bytes.\r\n     */\r\n    bytesToString(identifier?: string): string {\r\n        return prettyPrintBytes(this.allocated(identifier));\r\n    }\r\n\r\n\r\n    /**\r\n     * Cache for the overall number of allocated bytes (over all identifiers). This should always be the sum of the\r\n     * bytes allocated over each identifier, which can be validated using validate().\r\n     *\r\n     * This property can be observed, e.g., `allocationRegister.bytesObservable.subscribe()`.\r\n     */\r\n    get bytes(): GLsizei {\r\n        return this._bytes;\r\n    }\r\n\r\n    /**\r\n     * Observable that can be used to subscribe to bytes value changes. Yields a 2-tuple of overall allocated bytes as\r\n     * number and pretty printed string.\r\n     */\r\n    get bytesObservable(): Observable<[GLsizei, string]> {\r\n        return this._bytesSubject.asObservable();\r\n    }\r\n}\r\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, index) => {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, options),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? encode(key, options) : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? encode(key, options) : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({arrayFormat: 'none'}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = param.replace(/\\+/g, ' ').split('=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decodeComponent(value);\n\n\t\tformatter(decodeComponent(key), value, ret);\n\t}\n\n\treturn Object.keys(ret).sort().reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (obj, options) => {\n\tconst defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\toptions = Object.assign(defaults, options);\n\n\tif (options.sort === false) {\n\t\toptions.sort = () => {};\n\t}\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\treturn obj ? Object.keys(obj).sort(options.sort).map(key => {\n\t\tconst value = obj[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tconst result = [];\n\n\t\t\tfor (const value2 of value.slice()) {\n\t\t\t\tif (value2 === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, value2, result.length));\n\t\t\t}\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&') : '';\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: input.split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","\r\nexport { Context } from './context';\r\nexport { Canvas } from './canvas';\r\nexport { Controller } from './controller';\r\n\r\nexport { ContextMasquerade } from './contextmasquerade';\r\nexport { ExtensionsHash } from './extensionshash';\r\nexport { ChangeLookup } from './changelookup';\r\nexport { MouseEventProvider } from './mouseeventprovider';\r\nexport { EventHandler } from './eventhandler';\r\n\r\nexport { Buffer } from './buffer';\r\nexport { Color } from './color';\r\nexport { DefaultFramebuffer } from './defaultframebuffer';\r\nexport { Framebuffer } from './framebuffer';\r\nexport { Geometry } from './geometry';\r\nexport { Program } from './program';\r\nexport { Renderbuffer } from './renderbuffer';\r\nexport { Renderer, Invalidate } from './renderer';\r\nexport { Shader } from './shader';\r\nexport { Texture2 } from './texture2';\r\nexport { TextureCube } from './texturecube';\r\nexport { VertexArray } from './vertexarray';\r\nexport { Wizard } from './wizard';\r\n\r\nexport { Camera } from './camera';\r\nexport { CameraModifier } from './cameramodifier';\r\nexport { Navigation } from './navigation';\r\nexport { FirstPersonModifier } from './firstpersonmodifier';\r\nexport { PanModifier } from './panmodifier';\r\nexport { PointerLock } from './pointerlock';\r\nexport { TrackballModifier } from './trackballmodifier';\r\nexport { TurntableModifier } from './turntablemodifier';\r\nexport { ZoomModifier } from './zoommodifier';\r\n\r\nexport { NdcFillingRectangle } from './ndcfillingrectangle';\r\nexport { NdcFillingTriangle } from './ndcfillingtriangle';\r\n\r\nexport { AntiAliasingKernel } from './antialiasingkernel';\r\nexport { RandomSquareKernel } from './randomsquarekernel';\r\nexport { KernelF32, KernelI32, KernelI8, KernelUI32, KernelUI8 } from './kernel';\r\n\r\nexport { AccumulatePass } from './accumulatepass';\r\nexport { BlitPass } from './blitpass';\r\nexport { ReadbackPass } from './readbackpass';\r\n\r\n\r\nimport * as root_auxiliaries from './auxiliaries';\r\nexport import auxiliaries = root_auxiliaries;\r\n\r\nimport * as root_gl_matrix_extensions from './gl-matrix-extensions';\r\nexport import gl_matrix_extensions = root_gl_matrix_extensions;\r\n\r\nimport * as root_raymath from './raymath';\r\nexport import ray_math = root_raymath;\r\n\r\nimport * as root_tuples from './tuples';\r\nexport import tuples = root_tuples;\r\n","\r\nimport { EventHandler } from '../eventhandler';\r\nimport { MouseEventProvider } from '../mouseeventprovider';\r\nimport { Invalidate } from '../renderer';\r\n\r\n\r\nexport class TestNavigation {\r\n\r\n    protected _eventHandler: EventHandler;\r\n\r\n    protected _altered = false;\r\n\r\n\r\n    constructor(invalidate: Invalidate, mouseEventProvider: MouseEventProvider) {\r\n        this._eventHandler = new EventHandler(invalidate, mouseEventProvider);\r\n        this._eventHandler.pushMouseEnterHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onMouseEnter(latests, previous));\r\n        this._eventHandler.pushMouseLeaveHandler((latests: Array<MouseEvent>, previous: Array<MouseEvent>) =>\r\n            this.onMouseLeave(latests, previous));\r\n    }\r\n\r\n    protected onMouseEnter(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        this._altered = false;\r\n    }\r\n\r\n    protected onMouseLeave(latests: Array<MouseEvent>, previous: Array<MouseEvent>) {\r\n        this._altered = true;\r\n    }\r\n\r\n    update() {\r\n        this._eventHandler.update();\r\n    }\r\n\r\n    reset() {\r\n        this._altered = false;\r\n    }\r\n\r\n    get altered(): boolean {\r\n        return this._altered;\r\n    }\r\n\r\n}\r\n","\r\nimport { assert } from '../auxiliaries';\r\n\r\n\r\nnamespace viewer {\r\n\r\n    /**\r\n     * Utility class providing simplified access to the clients fullscreen API. The toggle can be used to toggle\r\n     * fullscreen for a HTML element while managing the execution of custom toggle code.\r\n     *\r\n     * ```\r\n     * canvas.element.addEventListener('click', function() { gloperate.viewer.Fullscreen.toggle(canvas.element); });\r\n     * ```\r\n     *\r\n     * Use `:fullscreen` (or `:-moz-full-screen`, `:-webkit-full-screen`, and `:-ms-full-screen`) selectors in order to\r\n     * configure fullscreen specific style. Alternatively, an additional class, e.g., `fullscreen`, could be toggled\r\n     * via callaback.\r\n     */\r\n    export class Fullscreen {\r\n\r\n        /**\r\n         * Cached fullscreenchange event function of the clients specific fullscreen API.\r\n         */\r\n        protected static _event: string;\r\n\r\n        /**\r\n         * Callback that is to be triggered within the remove event listener.\r\n         */\r\n        protected static _callback: (() => void) | undefined;\r\n\r\n        /**\r\n         * Backup of the element's initial width and height.\r\n         */\r\n        protected static _size: [string, string] = ['0', '0'];\r\n\r\n        /**\r\n         * Cached exit call of the clients specific fullscreen API.\r\n         */\r\n        protected static _exit: () => void;\r\n\r\n        /**\r\n         * Cached request call of the clients specific fullscreen API.\r\n         */\r\n        protected static _request: (element: HTMLElement) => void;\r\n\r\n        /**\r\n         * Cached element call returning the fullscreen element specific to the clients fullscreen API.\r\n         */\r\n        protected static _element: () => HTMLElement;\r\n\r\n        /**\r\n         * Event listener used to add the remove event listener using on indirection, that is, the first fullscreen\r\n         * event triggered after a request is ignored. This is important for triggering the fullscreen callback before\r\n         * the request is completed. The listener adds the removeListener and removes itself as listener.\r\n         */\r\n        protected static addEventListener: EventListener = (): void => {\r\n            window.removeEventListener(Fullscreen._event, Fullscreen.addEventListener);\r\n            window.addEventListener(Fullscreen._event, Fullscreen.removeEventListener);\r\n        }\r\n\r\n        /**\r\n         * Event listener that is used to account for implicit fullscreen exit events, e.g., user explicitly uses a GUI\r\n         * element for entering fullscreen, but uses ESC to exit fullscreen. The listener triggers the callback provided\r\n         * on toggle and removes itself as listener.\r\n         */\r\n        protected static removeEventListener: EventListener = (): void => {\r\n            if (Fullscreen._callback) {\r\n                Fullscreen._callback();\r\n                Fullscreen._callback = undefined;\r\n            }\r\n            window.removeEventListener(Fullscreen._event, Fullscreen.removeEventListener);\r\n        }\r\n\r\n        /**\r\n         * Query and cache the client specific fullscreen API.\r\n         */\r\n        protected static queryAndCacheAPI(): void {\r\n            if (Fullscreen._exit !== undefined) {\r\n                return;\r\n            }\r\n\r\n            /**\r\n             * Shadow global document declaration with an untyped one. This is done in order to use vendor specific\r\n             * properties without a compile error.\r\n             */\r\n            const document = window.document as any;\r\n\r\n            // Query the API to use.\r\n            const exits = [\r\n                document.exitFullScreen,\r\n                document.msExitFullscreen,\r\n                document.mozCancelFullScreen, // notice the capital S for Screen\r\n                document.webkitExitFullscreen,\r\n                undefined];\r\n\r\n            let api = 0;\r\n            for (; api < exits.length; ++api) {\r\n                if (exits[api] === undefined) {\r\n                    continue;\r\n                }\r\n                break;\r\n            }\r\n\r\n            switch (api) {\r\n                case 0: // native\r\n                    Fullscreen._exit = () => document.exitFullScreen();\r\n                    Fullscreen._request = (element: HTMLElement) => element.requestFullscreen();\r\n                    Fullscreen._element = () => document.fullscreenElement;\r\n                    Fullscreen._event = 'fullscreenchange';\r\n                    break;\r\n\r\n                case 1: // microsoft\r\n                    Fullscreen._exit = () => document.msExitFullscreen();\r\n                    Fullscreen._request = (element: HTMLElement) => (element as any).msRequestFullscreen();\r\n                    Fullscreen._element = () => document.msFullscreenElement;\r\n                    Fullscreen._event = 'msfullscreenchange';\r\n                    break;\r\n\r\n                case 2: // mozilla\r\n                    Fullscreen._exit = () => document.mozCancelFullScreen();\r\n                    Fullscreen._request = (element: HTMLElement) => (element as any).mozRequestFullScreen();\r\n                    Fullscreen._element = () => document.mozFullScreenElement;\r\n                    Fullscreen._event = 'mozfullscreenchange';\r\n                    break;\r\n\r\n                case 3: // webkit\r\n                    Fullscreen._exit = () => document.webkitExitFullscreen();\r\n                    Fullscreen._request = (element: HTMLElement) => (element as any).webkitRequestFullscreen();\r\n                    Fullscreen._element = () => document.webkitFullscreenElement;\r\n                    Fullscreen._event = 'webkitfullscreenchange';\r\n                    break;\r\n\r\n                default:\r\n                    assert(false, `none of the following fullscreen apis was found: native, ms, moz, or webkit`);\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Returns whether or not a fullscreen element exists, indicating if fullscreen is active or not.\r\n         */\r\n        static active(): boolean {\r\n            /* tslint:disable-next-line:no-null-keyword */\r\n            return Fullscreen._element() !== undefined && Fullscreen._element() !== null;\r\n        }\r\n\r\n        /**\r\n         * Requests or exits fullscreen mode for a given element. If the element is already in fullscreen, fullscreen\r\n         * mode is exited. Else, fullscreen mode is requested. The function considers various platform specific\r\n         * fullscreen interfaces, i.e., native, ms, moz, and webkit.\r\n         * @param element - Element to toggle fullscreen state of.\r\n         */\r\n        static toggle(element: HTMLElement, callback?: () => void): void {\r\n            if (element === undefined) {\r\n                return;\r\n            }\r\n            Fullscreen.queryAndCacheAPI();\r\n\r\n            const isFullscreen = Fullscreen.active();\r\n\r\n            if (!isFullscreen) {\r\n                /* Backup exact size of the element for restore when exiting fullscreen. */\r\n                const style = getComputedStyle(element);\r\n                Fullscreen._size[0] = style.width as string;\r\n                Fullscreen._size[1] = style.height as string;\r\n            }\r\n\r\n            /**\r\n             * The toggle callback is to be triggered first, always. Some browsers do not trigger a reflow when\r\n             * requesting or exiting fullscreen and simultaneously toggling some HTML element classes.\r\n             */\r\n            if (callback) {\r\n                callback();\r\n            }\r\n\r\n            if (!isFullscreen) {\r\n                /**\r\n                 * Requesting fullscreen and adding the addEL event listener to the fullscreenchange always triggers the\r\n                 * event listener on fullscreen request or exit. addEL then removes itself and adds the event listener,\r\n                 * which in turn triggers the given callback and also removes itself as listener. This is a solid way to\r\n                 * assure single callback execution per toggle.\r\n                 */\r\n                Fullscreen._callback = callback;\r\n                window.addEventListener(Fullscreen._event, Fullscreen.addEventListener);\r\n\r\n            } else {\r\n                /**\r\n                 * If the toggle for exiting fullscreen was made explicitly (not by the browser or indirectly) the\r\n                 * event listener is removed here since the callback was already called (above).\r\n                 */\r\n                Fullscreen._callback = undefined;\r\n                window.removeEventListener(Fullscreen._event, Fullscreen.removeEventListener);\r\n\r\n                element.style.width = Fullscreen._size[0];\r\n                element.style.height = Fullscreen._size[1];\r\n            }\r\n\r\n            isFullscreen ? Fullscreen._exit() : Fullscreen._request(element);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport = viewer;\r\n","\r\n\r\nnamespace viewer {\r\n\r\n    interface HTMLEventListener { (event: Event): boolean; }\r\n\r\n    /**\r\n     * Auxiliary class for blocking and unblocking events on a HTML element. Example for blocking the contextmenu:\r\n     * ```\r\n     * blocker = new gloperate.EventBlocker(element);\r\n     * blocker.block('contextmenu');\r\n     * ```\r\n     */\r\n    export class EventBlocker {\r\n\r\n        /**\r\n         * Lookup table for blocked events and their listener.\r\n         */\r\n        private _blockListenerByEvent = new Map<string, HTMLEventListener>();\r\n\r\n        /**\r\n         * Element associated to this blocker.\r\n         */\r\n        protected _element: HTMLElement;\r\n\r\n        /**\r\n         * Creates an event blocker instance associated to a specific HTML element.\r\n         * @param element - Element that is to be associated with this blocker for block und unblock.\r\n         * @param events - Optional events that are blocked immediately.\r\n         */\r\n        constructor(element: HTMLElement, events?: Array<string>) {\r\n            this._element = element;\r\n            if (events === undefined) {\r\n                return;\r\n            }\r\n            for (const event of events) {\r\n                this.block(event);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Blocks a specific event by adding a listener the prevents the default and stops propagation.\r\n         * @param eventIdentifier - Event identifier that is to be blocked, e.g., 'contextmenu'.\r\n         */\r\n        block(eventIdentifier: string): void {\r\n            if (this._blockListenerByEvent.has(eventIdentifier)) {\r\n                return;\r\n            }\r\n            this._blockListenerByEvent.set(eventIdentifier,\r\n                (event): boolean => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    return false;\r\n                });\r\n            this._element.addEventListener(eventIdentifier,\r\n                this._blockListenerByEvent.get(eventIdentifier) as HTMLEventListener);\r\n        }\r\n\r\n        /**\r\n         * Unblocks a previously blocked event by removing the blocker/listener.\r\n         * @param eventIdentifier - Event identifier that is to be unblocked, e.g., 'contextmenu'.\r\n         */\r\n        unblock(eventIdentifier: string): void {\r\n            if (!this._blockListenerByEvent.has(eventIdentifier)) {\r\n                return;\r\n            }\r\n            this._element.removeEventListener(eventIdentifier,\r\n                this._blockListenerByEvent.get(eventIdentifier) as HTMLEventListener);\r\n            this._blockListenerByEvent.delete(eventIdentifier);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport = viewer;\r\n","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\r\\n#else \\r\\n    #define varying in\\r\\n#endif\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    #define fragColor gl_FragColor\\r\\n    #extension GL_OES_standard_derivatives : enable\\r\\n#else \\r\\n    layout(location = 0) out vec4 fragColor;\\r\\n#endif\\r\\n\\r\\nuniform int u_frameNumber;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    vec3 color = vec3(28.0 / 255.0, 117.0 / 255.0, 188.0 / 255.0);\\r\\n    color += (vec3(0.0, v_uv) - 0.5) * 0.125;\\r\\n\\r\\n    vec2 awidth = fwidth(v_uv) * (sin(float(u_frameNumber) * 0.1) * 7.0 + 8.0);\\r\\n    vec2 cstep = abs(step(awidth, v_uv) - step(awidth, 1.0 - v_uv));\\r\\n    if(!any(bvec2(cstep))) {\\r\\n        discard;\\r\\n    }\\r\\n    fragColor = vec4(color, 1.0); \\r\\n}\\r\\n\"","module.exports = \"\\r\\nprecision lowp float;\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n#else \\r\\n    #define varying out\\r\\n#endif\\r\\n\\r\\n\\r\\nvoid ndcOffset(inout vec4 vertex, in vec2 offset) {\\r\\n    vertex.xy = offset * vec2(vertex.w) + vertex.xy;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n#if __VERSION__ == 100\\r\\n    attribute vec2 a_vertex;\\r\\n#else \\r\\n    layout(location = 0) in vec2 a_vertex;\\r\\n#endif\\r\\n\\r\\nuniform vec2 u_ndcOffset;\\r\\n\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n\\r\\nvoid main(void)\\r\\n{\\r\\n    v_uv = a_vertex.xy * 0.5 + 0.5;\\r\\n\\r\\n    vec4 vertex = vec4(a_vertex, 0.0, 1.0);\\r\\n    ndcOffset(vertex, u_ndcOffset);\\r\\n\\r\\n    gl_Position = vertex;\\r\\n}\\r\\n\"","\r\nimport { assert } from '../auxiliaries';\r\n\r\nimport { AccumulatePass } from '../accumulatepass';\r\nimport { AntiAliasingKernel } from '../antialiasingkernel';\r\nimport { BlitPass } from '../blitpass';\r\nimport { Context } from '../context';\r\nimport { DefaultFramebuffer } from '../defaultframebuffer';\r\nimport { Framebuffer } from '../framebuffer';\r\nimport { MouseEventProvider } from '../mouseeventprovider';\r\nimport { NdcFillingTriangle } from '../ndcfillingtriangle';\r\nimport { Program } from '../program';\r\nimport { Renderbuffer } from '../renderbuffer';\r\nimport { Invalidate, Renderer } from '../renderer';\r\nimport { Shader } from '../shader';\r\nimport { Texture2 } from '../texture2';\r\nimport { TestNavigation } from './testnavigation';\r\n\r\n\r\nnamespace debug {\r\n\r\n    export class TestRenderer extends Renderer {\r\n\r\n        protected _extensions = false;\r\n        protected _program: Program;\r\n\r\n        protected _ndcOffsetKernel: AntiAliasingKernel;\r\n        protected _uNdcOffset: WebGLUniformLocation;\r\n        protected _uFrameNumber: WebGLUniformLocation;\r\n        protected _ndcTriangle: NdcFillingTriangle;\r\n\r\n        protected _accumulate: AccumulatePass;\r\n        protected _blit: BlitPass;\r\n\r\n        protected _defaultFBO: DefaultFramebuffer;\r\n        protected _colorRenderTexture: Texture2;\r\n        protected _depthRenderbuffer: Renderbuffer;\r\n        protected _intermediateFBO: Framebuffer;\r\n\r\n        protected _testNavigation: TestNavigation;\r\n\r\n\r\n        protected onInitialize(context: Context, callback: Invalidate,\r\n            mouseEventProvider: MouseEventProvider,\r\n            /* keyEventProvider: KeyEventProvider, */\r\n            /* touchEventProvider: TouchEventProvider */): boolean {\r\n\r\n            const gl = this._context.gl;\r\n            const gl2facade = this._context.gl2facade;\r\n\r\n            /* Enable required extensions. */\r\n\r\n            if (this._extensions === false && this._context.isWebGL1) {\r\n                assert(this._context.supportsStandardDerivatives, `expected OES_standard_derivatives support`);\r\n                /* tslint:disable-next-line:no-unused-expression */\r\n                this._context.standardDerivatives;\r\n                this._extensions = true;\r\n            }\r\n\r\n            /* Create and configure program and geometry. */\r\n\r\n            const vert = new Shader(this._context, gl.VERTEX_SHADER, 'testrenderer.vert');\r\n            vert.initialize(require('./testrenderer.vert'));\r\n            const frag = new Shader(this._context, gl.FRAGMENT_SHADER, 'testrenderer.frag');\r\n            frag.initialize(require('./testrenderer.frag'));\r\n\r\n            this._program = new Program(this._context);\r\n            this._program.initialize([vert, frag]);\r\n\r\n            this._uNdcOffset = this._program.uniform('u_ndcOffset');\r\n            this._uFrameNumber = this._program.uniform('u_frameNumber');\r\n\r\n            this._ndcTriangle = new NdcFillingTriangle(this._context);\r\n            const aVertex = this._program.attribute('a_vertex', 0);\r\n            this._ndcTriangle.initialize(aVertex);\r\n\r\n            this._ndcOffsetKernel = new AntiAliasingKernel(this._multiFrameNumber);\r\n\r\n            /* Create framebuffers, textures, and render buffers. */\r\n\r\n            this._defaultFBO = new DefaultFramebuffer(this._context, 'DefaultFBO');\r\n            this._defaultFBO.initialize();\r\n\r\n            this._colorRenderTexture = new Texture2(this._context, 'ColorRenderTexture');\r\n            this._depthRenderbuffer = new Renderbuffer(this._context, 'DepthRenderbuffer');\r\n\r\n            this._intermediateFBO = new Framebuffer(this._context, 'IntermediateFBO');\r\n\r\n            /* Create and configure accumulation pass. */\r\n\r\n            this._accumulate = new AccumulatePass(this._context);\r\n            this._accumulate.initialize(this._ndcTriangle);\r\n            this._accumulate.precision = this._framePrecision;\r\n            this._accumulate.texture = this._colorRenderTexture;\r\n            // this._accumulate.depthStencilAttachment = this._depthRenderbuffer;\r\n\r\n            /* Create and configure blit pass. */\r\n\r\n            this._blit = new BlitPass(this._context);\r\n            this._blit.initialize(this._ndcTriangle);\r\n            this._blit.readBuffer = gl2facade.COLOR_ATTACHMENT0;\r\n            this._blit.drawBuffer = gl.BACK;\r\n            this._blit.target = this._defaultFBO;\r\n\r\n            /* Create and configure test navigation. */\r\n\r\n            this._testNavigation = new TestNavigation(() => this.invalidate(), mouseEventProvider);\r\n\r\n            return true;\r\n        }\r\n\r\n        protected onUninitialize(): void {\r\n            super.uninitialize();\r\n\r\n            this._uNdcOffset = -1;\r\n            this._uFrameNumber = -1;\r\n            this._program.uninitialize();\r\n\r\n            this._ndcTriangle.uninitialize();\r\n\r\n            this._intermediateFBO.uninitialize();\r\n            this._defaultFBO.uninitialize();\r\n            this._colorRenderTexture.uninitialize();\r\n            this._depthRenderbuffer.uninitialize();\r\n\r\n            this._blit.uninitialize();\r\n        }\r\n\r\n\r\n        protected onUpdate(): boolean {\r\n            this._testNavigation.update();\r\n\r\n            const redraw = this._testNavigation.altered;\r\n            this._testNavigation.reset();\r\n\r\n            if (!redraw && !this._altered.any) {\r\n                return false;\r\n            }\r\n\r\n            if (this._altered.multiFrameNumber) {\r\n                this._ndcOffsetKernel.width = this._multiFrameNumber;\r\n            }\r\n\r\n            return redraw;\r\n        }\r\n\r\n        protected onPrepare(): void {\r\n            const gl = this._context.gl;\r\n            const gl2facade = this._context.gl2facade;\r\n\r\n            if (!this._intermediateFBO.initialized) {\r\n                this._colorRenderTexture.initialize(this._frameSize[0], this._frameSize[1],\r\n                    this._context.isWebGL2 ? gl.RGBA8 : gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE);\r\n                this._depthRenderbuffer.initialize(this._frameSize[0], this._frameSize[1], gl.DEPTH_COMPONENT16);\r\n                this._intermediateFBO.initialize([[gl2facade.COLOR_ATTACHMENT0, this._colorRenderTexture]\r\n                    , [gl.DEPTH_ATTACHMENT, this._depthRenderbuffer]]);\r\n\r\n            } else if (this._altered.frameSize) {\r\n                this._intermediateFBO.resize(this._frameSize[0], this._frameSize[1]);\r\n            }\r\n\r\n            if (this._altered.clearColor) {\r\n                this._intermediateFBO.clearColor(this._clearColor);\r\n            }\r\n\r\n            this._accumulate.update();\r\n\r\n            this._altered.reset();\r\n        }\r\n\r\n        protected onFrame(frameNumber: number): void {\r\n            const gl = this._context.gl;\r\n\r\n            gl.viewport(0, 0, this._frameSize[0], this._frameSize[1]);\r\n\r\n            this._program.bind();\r\n\r\n            const ndcOffset = this._ndcOffsetKernel.get(frameNumber);\r\n            ndcOffset[0] = 2.0 * ndcOffset[0] / this._frameSize[0];\r\n            ndcOffset[1] = 2.0 * ndcOffset[1] / this._frameSize[1];\r\n            gl.uniform2fv(this._uNdcOffset, ndcOffset);\r\n            gl.uniform1i(this._uFrameNumber, frameNumber);\r\n\r\n            this._intermediateFBO.clear(gl.COLOR_BUFFER_BIT, true, false);\r\n            this._ndcTriangle.bind();\r\n            this._ndcTriangle.draw();\r\n            this._intermediateFBO.unbind();\r\n\r\n            this._accumulate.frame(frameNumber);\r\n        }\r\n\r\n        protected onSwap(): void {\r\n            this._blit.framebuffer = this._accumulate.framebuffer ?\r\n                this._accumulate.framebuffer : this._blit.framebuffer = this._intermediateFBO;\r\n            this._blit.frame();\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport = debug;\r\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'exclusiveMinimum': true,\n  'exclusiveMaximum': true,\n  'additionalItems': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      return v.id && ('<' + v.id + '>') || (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  options.throwError = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n\n  if (! res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n      ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var msg = (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n      ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, properties[property], options, ctx);\n    }\n\n    var prop = Object.hasOwnProperty.call(instance, property) ? instance[property] : undefined;\n    var res = this.validateSchema(prop, properties[property], options, ctx.makeChild(properties[property], property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existance tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"additionalProperty \" + JSON.stringify(property) + \" exists in instance when not allowed\",\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var expr = new RegExp(pattern);\n      if (!expr.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, patternProperties[pattern], options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], patternProperties[pattern], options, ctx.makeChild(patternProperties[pattern], property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    })\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (!schema.items) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    var items = Array.isArray(schema.items) ? (schema.items[i] || schema.additionalItems) : schema.items;\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = true;\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    valid = instance > schema.minimum;\n  } else {\n    valid = instance >= schema.minimum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'minimum',\n      argument: schema.minimum,\n      message: \"must have a minimum value of \" + schema.minimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid;\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    valid = instance < schema.maximum;\n  } else {\n    valid = instance <= schema.maximum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'maximum',\n      argument: schema.maximum,\n      message: \"must have a maximum value of \" + schema.maximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument)\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatability with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\"\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(instance[n]===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.match(schema.pattern)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates that every item in an instance array is unique, when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  function testArrays (v, i, a) {\n    for (var j = i + 1; j < a.length; j++) if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n    return true;\n  }\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var schemaId = type && type.id && ('<' + type.id + '>') || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    this.unresolvedRefs.push(uri);\n  }\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!(schemas instanceof Array)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if (!options) {\n    options = {};\n  }\n  var propertyName = options.propertyName || 'instance';\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var base = urilib.resolve(options.base||anonymousBase, schema.id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, propertyName, base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if (schema) {\n    var result = this.validateSchema(instance, schema, options, ctx);\n    if (!result) {\n      throw new Error('Result undefined');\n    }\n    return result;\n  }\n  throw new SchemaError('no schema specified', schema);\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n    // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (schema['extends'] instanceof Array) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema;\n  if (switchSchema = shouldResolve(schema)) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.propertyPath, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n}\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref;\n  if(ref = shouldResolve(schema)) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n}\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance) === 'object' && !(instance instanceof Array) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","\r\nimport { Validator } from 'jsonschema';\r\n\r\nimport { assert, logIf, LogLevel } from './auxiliaries';\r\n\r\nimport { ChangeLookup } from './changelookup';\r\n\r\n\r\nnamespace properties {\r\n\r\n    /**\r\n     * Validates if an object (POJO/JSON) adheres to a specific structure using a JSON schema.\r\n     * @param instance - Object to validate.\r\n     * @param schema - JSON schema used for validation.\r\n     * @param references - Schema references for types etc.\r\n     * @returns - True iff the provided instance in valid according to the schema.\r\n     */\r\n    export function validate(instance: any, schema: object, references?: Array<[object, string]>): boolean {\r\n        const validator = new Validator();\r\n        if (references !== undefined) {\r\n            for (const reference of references) {\r\n                validator.addSchema(reference[0], reference[1]);\r\n            }\r\n        }\r\n        /* Validate of (sub) schema of given POJO/JSON. */\r\n        const result = validator.validate(instance, schema);\r\n\r\n        logIf(!result.valid, LogLevel.Dev, `schema conformance issue (setter ignored):\\n${result.toString()}`);\r\n        return result.valid;\r\n    }\r\n\r\n\r\n    /**\r\n     * Complements default values for all (nested) properties and array's of objects of a given object (POJO/JSON).\r\n     * ```\r\n     * const schema: any = { type: 'object', properties: {\r\n     *          foo: { type: 'object', properties: {\r\n     *              bar: { type: 'string', default: 'moep' },\r\n     *              baz: { type: 'string' } } } } };\r\n     *\r\n     * const object: any = { };\r\n     * JsonSchema.complement(object, schema);\r\n     * console.log(object.foo.bar); // should exist and output 'moep'\r\n     * ```\r\n     *\r\n     * @param instance - Object to complement default values for.\r\n     * @param schema - Schema used for validation.\r\n     */\r\n    export function complement(instance: any | undefined, schema: any): void {\r\n        if (instance === undefined) {\r\n            return;\r\n        }\r\n        assert((schema.hasOwnProperty('properties') && (schema as any)['type'] === 'object') ||\r\n            (schema.hasOwnProperty('items') && (schema as any)['type'] === 'array'),\r\n            `expected schema to have 'properties' or 'items', given ${schema}`);\r\n\r\n        /* tslint:disable-next-line:switch-default */\r\n        switch ((schema as any)['type']) {\r\n\r\n            case 'object':\r\n                const propertiesSchema = (schema as any)['properties'];\r\n                const properties = Object.getOwnPropertyNames(propertiesSchema);\r\n\r\n                for (const key of properties) {\r\n                    const propertySchema = propertiesSchema[key];\r\n                    const type: string | undefined = propertySchema['type'];\r\n\r\n                    const isObject = type === 'object';\r\n                    const isDefined = instance.hasOwnProperty(key);\r\n\r\n                    const hasProperties = propertySchema.hasOwnProperty('properties');\r\n                    const hasDefault = propertySchema.hasOwnProperty('default');\r\n\r\n                    assert((hasProperties && isObject) || (!hasProperties && !isObject),\r\n                        `expected property '${key}' to be of type 'object', given '${propertySchema['type']}'`);\r\n\r\n                    if (isDefined && hasProperties) {\r\n                        /* Invoke recursive defaulting for already defined object with properties. */\r\n                        complement(instance[key], propertySchema);\r\n\r\n                    } else if (hasProperties) {\r\n                        /* Invoke recursive defaulting for not yet defined object with properties. */\r\n                        Object.defineProperty(instance, key, { value: {} });\r\n                        complement(instance[key], propertySchema);\r\n\r\n                    } else if (!isDefined && hasDefault) {\r\n                        /* Default value for not yet defined property. */\r\n                        Object.defineProperty(instance, key, { value: propertySchema['default'] });\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case 'array':\r\n                const itemsSchema = (schema as any)['items'];\r\n                if (itemsSchema['type'] !== 'object') {\r\n                    break;\r\n                }\r\n                /* Invoke recursive defaulting for array of objects. */\r\n                for (const name of Object.getOwnPropertyNames(instance)) {\r\n                    if (name === 'length') {\r\n                        continue;\r\n                    }\r\n                    complement(instance[name], itemsSchema);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deep comparison of two objects. It returns whether or not changes have been found (returns true) or objects\r\n     * seem to be equal w.r.t. to their property structure and respective values (returns false). All changes that\r\n     * are found will be passed to the alteration lookup.\r\n     * @param objectL - Left operand for deep comparison.\r\n     * @param objectR - Right operand for deep comparison.\r\n     * @param lookup - Actual alteration lookup used for top-down property traversal.\r\n     * @returns - False iff both objects are equal w.r.t. structure and values. True otherwise.\r\n     */\r\n    export function compare(objectL: any | undefined, objectR: any | undefined,\r\n        tracker?: ChangeLookup, path: string = ''): boolean {\r\n\r\n        const track = tracker !== undefined;\r\n        assert(!track || (tracker as object).hasOwnProperty('any'),\r\n            `expected allocation lookup object to have 'any' key`);\r\n\r\n        if ((objectL === undefined && objectR !== undefined) || (objectL !== undefined && objectR === undefined)) {\r\n            if (track) {\r\n                (tracker as ChangeLookup).alter(path);\r\n            }\r\n            return true;\r\n        }\r\n\r\n        let equals = true;\r\n\r\n        /* Primitive compare if at least one operand is neither object nor array. */\r\n        let types: [string, string] = [typeof objectL, typeof objectR];\r\n        const isArray: [boolean, boolean] = [objectL instanceof Array, objectR instanceof Array];\r\n\r\n        if ((!isArray[0] || !isArray[1]) && (types[0] !== 'object' || types[1] !== 'object')) {\r\n            equals = objectL === objectR;\r\n            if (!equals && track) {\r\n                (tracker as ChangeLookup).alter(`${path}`);\r\n            }\r\n            return !equals;\r\n        }\r\n\r\n        /* Get set of unique names of both objects. */\r\n        const names: Array<string> = Array.from(new Set<string>(\r\n            Array<string>().concat(Object.getOwnPropertyNames(objectL), Object.getOwnPropertyNames(objectR))).values());\r\n\r\n        /* Deep compare if both operands are either object or array. */\r\n        for (const name of names) {\r\n            if (name === 'length') {\r\n                continue;\r\n            }\r\n            const values = [(objectL as any)[name], (objectR as any)[name]];\r\n            types = [typeof values[0], typeof values[1]];\r\n\r\n            const propertyPath = `${path}${path.length > 0 && !isArray[0] ? '.' : ''}${!isArray[0] ? name : ''}`;\r\n\r\n            if ((values[0] instanceof Array && values[1] instanceof Array) ||\r\n                (types[0] === 'object' && types[1] === 'object')) {\r\n                equals = equals && !compare(values[0], values[1], tracker, propertyPath);\r\n            } else {\r\n                if (types[0] === types[1] && values[0] === values[1]) {\r\n                    continue;\r\n                }\r\n                equals = false;\r\n                if (track) {\r\n                    (tracker as ChangeLookup).alter(propertyPath);\r\n                }\r\n            }\r\n        }\r\n        return !equals;\r\n    }\r\n\r\n}\r\n\r\nexport = properties;\r\n","\r\nexport * from './webgl-operate.slim';\r\n\r\n\r\n// /* ADVANCED facilities */\r\n\r\nimport * as root_properties from './properties';\r\nexport import properties = root_properties;\r\n\r\n\r\n// /* DEBUG facilities */\r\n\r\nimport * as debug_TestNavigation from './debug/testnavigation';\r\nimport * as debug_TestRenderer from './debug/testrenderer';\r\n\r\nexport namespace debug {\r\n    export import TestRenderer = debug_TestRenderer.TestRenderer;\r\n    export import TestNavigation = debug_TestNavigation.TestNavigation;\r\n}\r\n\r\n\r\n/* VIEWER facilities */\r\n\r\nimport * as viewer_EventBlocker from './viewer/eventblocker';\r\nimport * as viewer_Fullscreen from './viewer/fullscreen';\r\n\r\nexport namespace viewer {\r\n    export import EventBlocker = viewer_EventBlocker.EventBlocker;\r\n    export import Fullscreen = viewer_Fullscreen.Fullscreen;\r\n}\r\n\r\n\r\n/* DEVELOPMENT facilities (should be none when publishing) */\r\n"],"sourceRoot":""}